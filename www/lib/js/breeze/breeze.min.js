




<!DOCTYPE html>
<html>
  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#">
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Breeze/Breeze.Client/Scripts/breeze.min.js at 88c64091b5bdd5a548860b318448541c5dba2f41 Â· IdeaBlade/Breeze</title>
    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub" />
    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub" />
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-114.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-144.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144.png" />
    <meta property="fb:app_id" content="1401488693436528"/>

      <meta content="@github" name="twitter:site" /><meta content="summary" name="twitter:card" /><meta content="IdeaBlade/Breeze" name="twitter:title" /><meta content="Breeze.js is a JavaScript library for managing data in data rich-client HTML/JS applications." name="twitter:description" /><meta content="https://2.gravatar.com/avatar/71ad5494fdaca465b1328099bd6f093f?d=https%3A%2F%2Fidenticons.github.com%2F2daadd736c98f50a1ed2efbe6d6fed30.png&amp;r=x&amp;s=400" name="twitter:image:src" />
<meta content="GitHub" property="og:site_name" /><meta content="object" property="og:type" /><meta content="https://2.gravatar.com/avatar/71ad5494fdaca465b1328099bd6f093f?d=https%3A%2F%2Fidenticons.github.com%2F2daadd736c98f50a1ed2efbe6d6fed30.png&amp;r=x&amp;s=400" property="og:image" /><meta content="IdeaBlade/Breeze" property="og:title" /><meta content="https://github.com/IdeaBlade/Breeze" property="og:url" /><meta content="Breeze.js is a JavaScript library for managing data in data rich-client HTML/JS applications." property="og:description" />

    <meta name="hostname" content="github-fe125-cp1-prd.iad.github.net">
    <meta name="ruby" content="ruby 2.1.0p0-github-tcmalloc (87c9373a41) [x86_64-linux]">
    <link rel="assets" href="https://github.global.ssl.fastly.net/">
    <link rel="conduit-xhr" href="https://ghconduit.com:25035/">
    <link rel="xhr-socket" href="/_sockets" />


    <meta name="msapplication-TileImage" content="/windows-tile.png" />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta name="selected-link" value="repo_source" data-pjax-transient />
    <meta content="collector.githubapp.com" name="octolytics-host" /><meta content="collector-cdn.github.com" name="octolytics-script-host" /><meta content="github" name="octolytics-app-id" /><meta content="1891EBD6:3BA4:3F482BF:530237F3" name="octolytics-dimension-request_id" /><meta content="1481586" name="octolytics-actor-id" /><meta content="joshuarose" name="octolytics-actor-login" /><meta content="f79d7cfbee507f2e4610f3fb83ad8256662a211b4bc1c35d5a9e8c959e7169af" name="octolytics-actor-hash" />
    

    
    
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />

    <meta content="authenticity_token" name="csrf-param" />
<meta content="dTfo4jFCyMHXHTeMBuluARn0yxOiMh5D4HJR1F6Two8=" name="csrf-token" />

    <link href="https://github.global.ssl.fastly.net/assets/github-c21d65ad69c42ef0b66883ca1e3d87132a74a579.css" media="all" rel="stylesheet" type="text/css" />
    <link href="https://github.global.ssl.fastly.net/assets/github2-d0c84fb768ff582acb2168e18b8ae157fff086fc.css" media="all" rel="stylesheet" type="text/css" />
    
    


      <script src="https://github.global.ssl.fastly.net/assets/frameworks-693e11922dcacc3a7408a911fe1647da4febd3bd.js" type="text/javascript"></script>
      <script async="async" defer="defer" src="https://github.global.ssl.fastly.net/assets/github-bd27f243e7b2eca092fc3aebe451c0c71008e4b8.js" type="text/javascript"></script>
      
      <meta http-equiv="x-pjax-version" content="2b72802d34707843b48d76f02b52a3e0">

        <link data-pjax-transient rel='permalink' href='/IdeaBlade/Breeze/blob/88c64091b5bdd5a548860b318448541c5dba2f41/Breeze.Client/Scripts/breeze.min.js'>

  <meta name="description" content="Breeze.js is a JavaScript library for managing data in data rich-client HTML/JS applications." />

  <meta content="1630193" name="octolytics-dimension-user_id" /><meta content="IdeaBlade" name="octolytics-dimension-user_login" /><meta content="5578548" name="octolytics-dimension-repository_id" /><meta content="IdeaBlade/Breeze" name="octolytics-dimension-repository_nwo" /><meta content="true" name="octolytics-dimension-repository_public" /><meta content="false" name="octolytics-dimension-repository_is_fork" /><meta content="5578548" name="octolytics-dimension-repository_network_root_id" /><meta content="IdeaBlade/Breeze" name="octolytics-dimension-repository_network_root_nwo" />
  <link href="https://github.com/IdeaBlade/Breeze/commits/88c64091b5bdd5a548860b318448541c5dba2f41.atom" rel="alternate" title="Recent Commits to Breeze:88c64091b5bdd5a548860b318448541c5dba2f41" type="application/atom+xml" />

  </head>


  <body class="logged_in  env-production macintosh vis-public page-blob tipsy-tooltips">
    <div class="wrapper">
      
      
      
      


      <div class="header header-logged-in true">
  <div class="container clearfix">

    <a class="header-logo-invertocat" href="https://github.com/">
  <span class="mega-octicon octicon-mark-github"></span>
</a>

    
    <a href="/notifications" aria-label="You have no unread notifications" class="notification-indicator tooltipped downwards" data-gotokey="n">
        <span class="mail-status all-read"></span>
</a>

      <div class="command-bar js-command-bar  in-repository">
          <form accept-charset="UTF-8" action="/search" class="command-bar-form" id="top_search_form" method="get">

<input type="text" data-hotkey="/ s" name="q" id="js-command-bar-field" placeholder="Search or type a command" tabindex="1" autocapitalize="off"
    
    data-username="joshuarose"
      data-repo="IdeaBlade/Breeze"
      data-branch="88c64091b5bdd5a548860b318448541c5dba2f41"
      data-sha="5ed7e177683ef5a36a96ea4835eb65d0559bdaaf"
  >

    <input type="hidden" name="nwo" value="IdeaBlade/Breeze" />

    <div class="select-menu js-menu-container js-select-menu search-context-select-menu">
      <span class="minibutton select-menu-button js-menu-target">
        <span class="js-select-button">This repository</span>
      </span>

      <div class="select-menu-modal-holder js-menu-content js-navigation-container">
        <div class="select-menu-modal">

          <div class="select-menu-item js-navigation-item js-this-repository-navigation-item selected">
            <span class="select-menu-item-icon octicon octicon-check"></span>
            <input type="radio" class="js-search-this-repository" name="search_target" value="repository" checked="checked" />
            <div class="select-menu-item-text js-select-button-text">This repository</div>
          </div> <!-- /.select-menu-item -->

          <div class="select-menu-item js-navigation-item js-all-repositories-navigation-item">
            <span class="select-menu-item-icon octicon octicon-check"></span>
            <input type="radio" name="search_target" value="global" />
            <div class="select-menu-item-text js-select-button-text">All repositories</div>
          </div> <!-- /.select-menu-item -->

        </div>
      </div>
    </div>

  <span class="octicon help tooltipped downwards" aria-label="Show command bar help">
    <span class="octicon octicon-question"></span>
  </span>


  <input type="hidden" name="ref" value="cmdform">

</form>
        <ul class="top-nav">
          <li class="explore"><a href="/explore">Explore</a></li>
            <li><a href="https://gist.github.com">Gist</a></li>
            <li><a href="/blog">Blog</a></li>
          <li><a href="https://help.github.com">Help</a></li>
        </ul>
      </div>

    


  <ul id="user-links">
    <li>
      <a href="/joshuarose" class="name">
        <img alt="joshuarose" class=" js-avatar" data-user="1481586" height="20" src="https://1.gravatar.com/avatar/13ffaa0845ace2d974ce8fc8e9566268?d=https%3A%2F%2Fidenticons.github.com%2F7d646b691979179ed5c2a009ed14306b.png&amp;r=x&amp;s=140" width="20" /> joshuarose
      </a>
    </li>

    <li class="new-menu dropdown-toggle js-menu-container">
      <a href="#" class="js-menu-target tooltipped downwards" aria-label="Create new...">
        <span class="octicon octicon-plus"></span>
        <span class="dropdown-arrow"></span>
      </a>

      <div class="js-menu-content">
      </div>
    </li>

    <li>
      <a href="/settings/profile" id="account_settings"
        class="tooltipped downwards"
        aria-label="Account settings ">
        <span class="octicon octicon-tools"></span>
      </a>
    </li>
    <li>
      <a class="tooltipped downwards" href="/logout" data-method="post" id="logout" aria-label="Sign out">
        <span class="octicon octicon-log-out"></span>
      </a>
    </li>

  </ul>

<div class="js-new-dropdown-contents hidden">
  

<ul class="dropdown-menu">
  <li>
    <a href="/new"><span class="octicon octicon-repo-create"></span> New repository</a>
  </li>
  <li>
    <a href="/organizations/new"><span class="octicon octicon-organization"></span> New organization</a>
  </li>


</ul>

</div>


    
  </div>
</div>

      

        




          <div class="site" itemscope itemtype="http://schema.org/WebPage">
    
    <div class="pagehead repohead instapaper_ignore readability-menu">
      <div class="container">
        

<ul class="pagehead-actions">

    <li class="subscription">
      <form accept-charset="UTF-8" action="/notifications/subscribe" class="js-social-container" data-autosubmit="true" data-remote="true" method="post"><div style="margin:0;padding:0;display:inline"><input name="authenticity_token" type="hidden" value="dTfo4jFCyMHXHTeMBuluARn0yxOiMh5D4HJR1F6Two8=" /></div>  <input id="repository_id" name="repository_id" type="hidden" value="5578548" />

    <div class="select-menu js-menu-container js-select-menu">
      <a class="social-count js-social-count" href="/IdeaBlade/Breeze/watchers">
        103
      </a>
      <span class="minibutton select-menu-button with-count js-menu-target" role="button" tabindex="0">
        <span class="js-select-button">
          <span class="octicon octicon-eye-watch"></span>
          Watch
        </span>
      </span>

      <div class="select-menu-modal-holder">
        <div class="select-menu-modal subscription-menu-modal js-menu-content">
          <div class="select-menu-header">
            <span class="select-menu-title">Notification status</span>
            <span class="octicon octicon-remove-close js-menu-close"></span>
          </div> <!-- /.select-menu-header -->

          <div class="select-menu-list js-navigation-container" role="menu">

            <div class="select-menu-item js-navigation-item selected" role="menuitem" tabindex="0">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <div class="select-menu-item-text">
                <input checked="checked" id="do_included" name="do" type="radio" value="included" />
                <h4>Not watching</h4>
                <span class="description">You only receive notifications for conversations in which you participate or are @mentioned.</span>
                <span class="js-select-button-text hidden-select-button-text">
                  <span class="octicon octicon-eye-watch"></span>
                  Watch
                </span>
              </div>
            </div> <!-- /.select-menu-item -->

            <div class="select-menu-item js-navigation-item " role="menuitem" tabindex="0">
              <span class="select-menu-item-icon octicon octicon octicon-check"></span>
              <div class="select-menu-item-text">
                <input id="do_subscribed" name="do" type="radio" value="subscribed" />
                <h4>Watching</h4>
                <span class="description">You receive notifications for all conversations in this repository.</span>
                <span class="js-select-button-text hidden-select-button-text">
                  <span class="octicon octicon-eye-unwatch"></span>
                  Unwatch
                </span>
              </div>
            </div> <!-- /.select-menu-item -->

            <div class="select-menu-item js-navigation-item " role="menuitem" tabindex="0">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <div class="select-menu-item-text">
                <input id="do_ignore" name="do" type="radio" value="ignore" />
                <h4>Ignoring</h4>
                <span class="description">You do not receive any notifications for conversations in this repository.</span>
                <span class="js-select-button-text hidden-select-button-text">
                  <span class="octicon octicon-mute"></span>
                  Stop ignoring
                </span>
              </div>
            </div> <!-- /.select-menu-item -->

          </div> <!-- /.select-menu-list -->

        </div> <!-- /.select-menu-modal -->
      </div> <!-- /.select-menu-modal-holder -->
    </div> <!-- /.select-menu -->

</form>
    </li>

  <li>
  

  <div class="js-toggler-container js-social-container starring-container ">
    <a href="/IdeaBlade/Breeze/unstar"
      class="minibutton with-count js-toggler-target star-button starred upwards"
      title="Unstar this repository" data-remote="true" data-method="post" rel="nofollow">
      <span class="octicon octicon-star-delete"></span><span class="text">Unstar</span>
    </a>

    <a href="/IdeaBlade/Breeze/star"
      class="minibutton with-count js-toggler-target star-button unstarred upwards"
      title="Star this repository" data-remote="true" data-method="post" rel="nofollow">
      <span class="octicon octicon-star"></span><span class="text">Star</span>
    </a>

      <a class="social-count js-social-count" href="/IdeaBlade/Breeze/stargazers">
        596
      </a>
  </div>

  </li>


        <li>
          <a href="/IdeaBlade/Breeze/fork" class="minibutton with-count js-toggler-target fork-button lighter upwards" title="Fork this repo" rel="nofollow" data-method="post">
            <span class="octicon octicon-git-branch-create"></span><span class="text">Fork</span>
          </a>
          <a href="/IdeaBlade/Breeze/network" class="social-count">154</a>
        </li>


</ul>

        <h1 itemscope itemtype="http://data-vocabulary.org/Breadcrumb" class="entry-title public">
          <span class="repo-label"><span>public</span></span>
          <span class="mega-octicon octicon-repo"></span>
          <span class="author">
            <a href="/IdeaBlade" class="url fn" itemprop="url" rel="author"><span itemprop="title">IdeaBlade</span></a>
          </span>
          <span class="repohead-name-divider">/</span>
          <strong><a href="/IdeaBlade/Breeze" class="js-current-repository js-repo-home-link">Breeze</a></strong>

          <span class="page-context-loader">
            <img alt="Octocat-spinner-32" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
          </span>

        </h1>
      </div><!-- /.container -->
    </div><!-- /.repohead -->

    <div class="container">
      

      <div class="repository-with-sidebar repo-container new-discussion-timeline js-new-discussion-timeline  ">
        <div class="repository-sidebar clearfix">
            

<div class="sunken-menu vertical-right repo-nav js-repo-nav js-repository-container-pjax js-octicon-loaders">
  <div class="sunken-menu-contents">
    <ul class="sunken-menu-group">
      <li class="tooltipped leftwards" aria-label="Code">
        <a href="/IdeaBlade/Breeze" aria-label="Code" class="selected js-selected-navigation-item sunken-menu-item" data-gotokey="c" data-pjax="true" data-selected-links="repo_source repo_downloads repo_commits repo_tags repo_branches /IdeaBlade/Breeze">
          <span class="octicon octicon-code"></span> <span class="full-word">Code</span>
          <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>


      <li class="tooltipped leftwards" aria-label="Pull Requests">
        <a href="/IdeaBlade/Breeze/pulls" aria-label="Pull Requests" class="js-selected-navigation-item sunken-menu-item js-disable-pjax" data-gotokey="p" data-selected-links="repo_pulls /IdeaBlade/Breeze/pulls">
            <span class="octicon octicon-git-pull-request"></span> <span class="full-word">Pull Requests</span>
            <span class='counter'>6</span>
            <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>


    </ul>
    <div class="sunken-menu-separator"></div>
    <ul class="sunken-menu-group">

      <li class="tooltipped leftwards" aria-label="Pulse">
        <a href="/IdeaBlade/Breeze/pulse" aria-label="Pulse" class="js-selected-navigation-item sunken-menu-item" data-pjax="true" data-selected-links="pulse /IdeaBlade/Breeze/pulse">
          <span class="octicon octicon-pulse"></span> <span class="full-word">Pulse</span>
          <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>

      <li class="tooltipped leftwards" aria-label="Graphs">
        <a href="/IdeaBlade/Breeze/graphs" aria-label="Graphs" class="js-selected-navigation-item sunken-menu-item" data-pjax="true" data-selected-links="repo_graphs repo_contributors /IdeaBlade/Breeze/graphs">
          <span class="octicon octicon-graph"></span> <span class="full-word">Graphs</span>
          <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>

      <li class="tooltipped leftwards" aria-label="Network">
        <a href="/IdeaBlade/Breeze/network" aria-label="Network" class="js-selected-navigation-item sunken-menu-item js-disable-pjax" data-selected-links="repo_network /IdeaBlade/Breeze/network">
          <span class="octicon octicon-git-branch"></span> <span class="full-word">Network</span>
          <img alt="Octocat-spinner-32" class="mini-loader" height="16" src="https://github.global.ssl.fastly.net/images/spinners/octocat-spinner-32.gif" width="16" />
</a>      </li>
    </ul>


  </div>
</div>

              <div class="only-with-full-nav">
                

  

<div class="clone-url open"
  data-protocol-type="http"
  data-url="/users/set_protocol?protocol_selector=http&amp;protocol_type=clone">
  <h3><strong>HTTPS</strong> clone URL</h3>
  <div class="clone-url-box">
    <input type="text" class="clone js-url-field"
           value="https://github.com/IdeaBlade/Breeze.git" readonly="readonly">

    <span class="js-zeroclipboard url-box-clippy minibutton zeroclipboard-button" data-clipboard-text="https://github.com/IdeaBlade/Breeze.git" data-copied-hint="copied!" title="copy to clipboard"><span class="octicon octicon-clippy"></span></span>
  </div>
</div>

  

<div class="clone-url "
  data-protocol-type="ssh"
  data-url="/users/set_protocol?protocol_selector=ssh&amp;protocol_type=clone">
  <h3><strong>SSH</strong> clone URL</h3>
  <div class="clone-url-box">
    <input type="text" class="clone js-url-field"
           value="git@github.com:IdeaBlade/Breeze.git" readonly="readonly">

    <span class="js-zeroclipboard url-box-clippy minibutton zeroclipboard-button" data-clipboard-text="git@github.com:IdeaBlade/Breeze.git" data-copied-hint="copied!" title="copy to clipboard"><span class="octicon octicon-clippy"></span></span>
  </div>
</div>

  

<div class="clone-url "
  data-protocol-type="subversion"
  data-url="/users/set_protocol?protocol_selector=subversion&amp;protocol_type=clone">
  <h3><strong>Subversion</strong> checkout URL</h3>
  <div class="clone-url-box">
    <input type="text" class="clone js-url-field"
           value="https://github.com/IdeaBlade/Breeze" readonly="readonly">

    <span class="js-zeroclipboard url-box-clippy minibutton zeroclipboard-button" data-clipboard-text="https://github.com/IdeaBlade/Breeze" data-copied-hint="copied!" title="copy to clipboard"><span class="octicon octicon-clippy"></span></span>
  </div>
</div>


<p class="clone-options">You can clone with
      <a href="#" class="js-clone-selector" data-protocol="http">HTTPS</a>,
      <a href="#" class="js-clone-selector" data-protocol="ssh">SSH</a>,
      or <a href="#" class="js-clone-selector" data-protocol="subversion">Subversion</a>.
  <span class="octicon help tooltipped upwards" aria-label="Get help on which URL is right for you.">
    <a href="https://help.github.com/articles/which-remote-url-should-i-use">
    <span class="octicon octicon-question"></span>
    </a>
  </span>
</p>

  <a href="http://mac.github.com" data-url="github-mac://openRepo/https://github.com/IdeaBlade/Breeze" class="minibutton sidebar-button js-conduit-rewrite-url">
    <span class="octicon octicon-device-desktop"></span>
    Clone in Desktop
  </a>


                <a href="/IdeaBlade/Breeze/archive/88c64091b5bdd5a548860b318448541c5dba2f41.zip"
                   class="minibutton sidebar-button"
                   title="Download this repository as a zip file"
                   rel="nofollow">
                  <span class="octicon octicon-cloud-download"></span>
                  Download ZIP
                </a>
              </div>
        </div><!-- /.repository-sidebar -->

        <div id="js-repo-pjax-container" class="repository-content context-loader-container" data-pjax-container>
          


<!-- blob contrib key: blob_contributors:v21:3c6b10582015400899fd615eaef75fc7 -->

<p title="This is a placeholder element" class="js-history-link-replace hidden"></p>

<a href="/IdeaBlade/Breeze/find/88c64091b5bdd5a548860b318448541c5dba2f41" data-pjax data-hotkey="t" class="js-show-file-finder" style="display:none">Show File Finder</a>

<div class="file-navigation">
  

<div class="select-menu js-menu-container js-select-menu" >
  <span class="minibutton select-menu-button js-menu-target" data-hotkey="w"
    data-master-branch="master"
    data-ref=""
    role="button" aria-label="Switch branches or tags" tabindex="0">
    <span class="octicon octicon-git-branch"></span>
    <i>tree:</i>
    <span class="js-select-button">88c64091b5</span>
  </span>

  <div class="select-menu-modal-holder js-menu-content js-navigation-container" data-pjax>

    <div class="select-menu-modal">
      <div class="select-menu-header">
        <span class="select-menu-title">Switch branches/tags</span>
        <span class="octicon octicon-remove-close js-menu-close"></span>
      </div> <!-- /.select-menu-header -->

      <div class="select-menu-filters">
        <div class="select-menu-text-filter">
          <input type="text" aria-label="Filter branches/tags" id="context-commitish-filter-field" class="js-filterable-field js-navigation-enable" placeholder="Filter branches/tags">
        </div>
        <div class="select-menu-tabs">
          <ul>
            <li class="select-menu-tab">
              <a href="#" data-tab-filter="branches" class="js-select-menu-tab">Branches</a>
            </li>
            <li class="select-menu-tab">
              <a href="#" data-tab-filter="tags" class="js-select-menu-tab">Tags</a>
            </li>
          </ul>
        </div><!-- /.select-menu-tabs -->
      </div><!-- /.select-menu-filters -->

      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="branches">

        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/IdeaBlade/Breeze/blob/master/Breeze.Client/Scripts/breeze.min.js"
                 data-name="master"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="master">master</a>
            </div> <!-- /.select-menu-item -->
        </div>

          <div class="select-menu-no-results">Nothing to show</div>
      </div> <!-- /.select-menu-list -->

      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="tags">
        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/IdeaBlade/Breeze/tree/v.1.4.0/Breeze.Client/Scripts/breeze.min.js"
                 data-name="v.1.4.0"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="v.1.4.0">v.1.4.0</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/IdeaBlade/Breeze/tree/Version-0.55/Breeze.Client/Scripts/breeze.min.js"
                 data-name="Version-0.55"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="Version-0.55">Version-0.55</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/IdeaBlade/Breeze/tree/Version-0.54/Breeze.Client/Scripts/breeze.min.js"
                 data-name="Version-0.54"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="Version-0.54">Version-0.54</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/IdeaBlade/Breeze/tree/Breeze-release-0.53/Breeze.Client/Scripts/breeze.min.js"
                 data-name="Breeze-release-0.53"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="Breeze-release-0.53">Breeze-release-0.53</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/IdeaBlade/Breeze/tree/1.4.8/Breeze.Client/Scripts/breeze.min.js"
                 data-name="1.4.8"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="1.4.8">1.4.8</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/IdeaBlade/Breeze/tree/1.4.7/Breeze.Client/Scripts/breeze.min.js"
                 data-name="1.4.7"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="1.4.7">1.4.7</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/IdeaBlade/Breeze/tree/1.4.6/Breeze.Client/Scripts/breeze.min.js"
                 data-name="1.4.6"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="1.4.6">1.4.6</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/IdeaBlade/Breeze/tree/1.4.5/Breeze.Client/Scripts/breeze.min.js"
                 data-name="1.4.5"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="1.4.5">1.4.5</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/IdeaBlade/Breeze/tree/1.4.4/Breeze.Client/Scripts/breeze.min.js"
                 data-name="1.4.4"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="1.4.4">1.4.4</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/IdeaBlade/Breeze/tree/1.4.2/Breeze.Client/Scripts/breeze.min.js"
                 data-name="1.4.2"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="1.4.2">1.4.2</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/IdeaBlade/Breeze/tree/1.4.1/Breeze.Client/Scripts/breeze.min.js"
                 data-name="1.4.1"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="1.4.1">1.4.1</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/IdeaBlade/Breeze/tree/1.3.5/Breeze.Client/Scripts/breeze.min.js"
                 data-name="1.3.5"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="1.3.5">1.3.5</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/IdeaBlade/Breeze/tree/1.3.0/Breeze.Client/Scripts/breeze.min.js"
                 data-name="1.3.0"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="1.3.0">1.3.0</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/IdeaBlade/Breeze/tree/1.2.5/Breeze.Client/Scripts/breeze.min.js"
                 data-name="1.2.5"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="1.2.5">1.2.5</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/IdeaBlade/Breeze/tree/0.62/Breeze.Client/Scripts/breeze.min.js"
                 data-name="0.62"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="0.62">0.62</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/IdeaBlade/Breeze/tree/0.61/Breeze.Client/Scripts/breeze.min.js"
                 data-name="0.61"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="0.61">0.61</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/IdeaBlade/Breeze/tree/0.60/Breeze.Client/Scripts/breeze.min.js"
                 data-name="0.60"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="0.60">0.60</a>
            </div> <!-- /.select-menu-item -->
            <div class="select-menu-item js-navigation-item ">
              <span class="select-menu-item-icon octicon octicon-check"></span>
              <a href="/IdeaBlade/Breeze/tree/0.58/Breeze.Client/Scripts/breeze.min.js"
                 data-name="0.58"
                 data-skip-pjax="true"
                 rel="nofollow"
                 class="js-navigation-open select-menu-item-text js-select-button-text css-truncate-target"
                 title="0.58">0.58</a>
            </div> <!-- /.select-menu-item -->
        </div>

        <div class="select-menu-no-results">Nothing to show</div>
      </div> <!-- /.select-menu-list -->

    </div> <!-- /.select-menu-modal -->
  </div> <!-- /.select-menu-modal-holder -->
</div> <!-- /.select-menu -->

  <div class="breadcrumb">
    <span class='repo-root js-repo-root'><span itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="/IdeaBlade/Breeze/tree/88c64091b5bdd5a548860b318448541c5dba2f41" data-branch="88c64091b5bdd5a548860b318448541c5dba2f41" data-direction="back" data-pjax="true" itemscope="url" rel="nofollow"><span itemprop="title">Breeze</span></a></span></span><span class="separator"> / </span><span itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="/IdeaBlade/Breeze/tree/88c64091b5bdd5a548860b318448541c5dba2f41/Breeze.Client" data-branch="88c64091b5bdd5a548860b318448541c5dba2f41" data-direction="back" data-pjax="true" itemscope="url" rel="nofollow"><span itemprop="title">Breeze.Client</span></a></span><span class="separator"> / </span><span itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb"><a href="/IdeaBlade/Breeze/tree/88c64091b5bdd5a548860b318448541c5dba2f41/Breeze.Client/Scripts" data-branch="88c64091b5bdd5a548860b318448541c5dba2f41" data-direction="back" data-pjax="true" itemscope="url" rel="nofollow"><span itemprop="title">Scripts</span></a></span><span class="separator"> / </span><strong class="final-path">breeze.min.js</strong> <span class="js-zeroclipboard minibutton zeroclipboard-button" data-clipboard-text="Breeze.Client/Scripts/breeze.min.js" data-copied-hint="copied!" title="copy to clipboard"><span class="octicon octicon-clippy"></span></span>
  </div>
</div>


  <div class="commit file-history-tease">
    <img alt="jtraband" class="main-avatar js-avatar" data-user="1766167" height="24" src="https://0.gravatar.com/avatar/c0726548e7ce483a080ee97badbbdab3?d=https%3A%2F%2Fidenticons.github.com%2F72a7a0015019edae45af4155959d8284.png&amp;r=x&amp;s=140" width="24" />
    <span class="author"><a href="/jtraband" rel="author">jtraband</a></span>
    <time class="js-relative-date" data-title-format="YYYY-MM-DD HH:mm:ss" datetime="2014-01-07T09:50:31-08:00" title="2014-01-07 09:50:31">January 07, 2014</time>
    <div class="commit-title">
        <a href="/IdeaBlade/Breeze/commit/b3ef6aa3a62606f11993c456bceb5b0a13b6bab3" class="message" data-pjax="true" title="Prep for 1.4.8">Prep for 1.4.8</a>
    </div>

    <div class="participation">
      <p class="quickstat"><a href="#blob_contributors_box" rel="facebox"><strong>1</strong> contributor</a></p>
      
    </div>
    <div id="blob_contributors_box" style="display:none">
      <h2 class="facebox-header">Users who have contributed to this file</h2>
      <ul class="facebox-user-list">
          <li class="facebox-user-list-item">
            <img alt="jtraband" class=" js-avatar" data-user="1766167" height="24" src="https://0.gravatar.com/avatar/c0726548e7ce483a080ee97badbbdab3?d=https%3A%2F%2Fidenticons.github.com%2F72a7a0015019edae45af4155959d8284.png&amp;r=x&amp;s=140" width="24" />
            <a href="/jtraband">jtraband</a>
          </li>
      </ul>
    </div>
  </div>

<div class="file-box">
  <div class="file">
    <div class="meta clearfix">
      <div class="info file-name">
        <span class="icon"><b class="octicon octicon-file-text"></b></span>
        <span class="mode" title="File Mode">file</span>
        <span class="meta-divider"></span>
          <span>6 lines (6 sloc)</span>
          <span class="meta-divider"></span>
        <span>160.724 kb</span>
      </div>
      <div class="actions">
        <div class="button-group">
              <a class="minibutton disabled tooltipped leftwards" href="#"
                 aria-label="You must be on a branch to make or propose changes to this file">Edit</a>
          <a href="/IdeaBlade/Breeze/raw/88c64091b5bdd5a548860b318448541c5dba2f41/Breeze.Client/Scripts/breeze.min.js" class="button minibutton " id="raw-url">Raw</a>
            <a href="/IdeaBlade/Breeze/blame/88c64091b5bdd5a548860b318448541c5dba2f41/Breeze.Client/Scripts/breeze.min.js" class="button minibutton js-update-url-with-hash">Blame</a>
          <a href="/IdeaBlade/Breeze/commits/88c64091b5bdd5a548860b318448541c5dba2f41/Breeze.Client/Scripts/breeze.min.js" class="button minibutton " rel="nofollow">History</a>
        </div><!-- /.button-group -->
          <a class="minibutton danger disabled empty-icon tooltipped leftwards" href="#"
             aria-label="You must be on a branch to make or propose changes to this file">
          Delete
        </a>
      </div><!-- /.actions -->
    </div>
        <div class="blob-wrapper data type-javascript js-blob-data">
        <table class="file-code file-diff tab-size-8">
          <tr class="file-code-line">
            <td class="blob-line-nums">
              <span id="L1" rel="#L1">1</span>
<span id="L2" rel="#L2">2</span>
<span id="L3" rel="#L3">3</span>
<span id="L4" rel="#L4">4</span>
<span id="L5" rel="#L5">5</span>
<span id="L6" rel="#L6">6</span>

            </td>
            <td class="blob-line-code"><div class="code-body highlight"><pre><div class='line' id='LC1'>!function(a){&quot;object&quot;==typeof exports?module.exports=a():&quot;function&quot;==typeof define?define(a):breeze=a()}(function(){function a(a,b){for(var c in a)T(a,c)&amp;&amp;b(c,a[c])}function b(a,b){for(var c in a)if(T(a,c)){var d=a[c];if(b(c,d))return{key:c,value:d}}return null}function c(a,b){var c=[];for(var d in a)if(T(a,d)){var e=b?b(d,a[d]):a[d];void 0!==e&amp;&amp;c.push(e)}return c}function d(a,b){return function(c){return c[a]===b}}function e(a){return function(b){return b[a]}}function f(a){var b=[];for(var c in a)T(a,c)&amp;&amp;b.push(a[c]);return b}function g(a,b,c){if(!b)return a;if(c)c.forEach(function(c){a[c]=b[c]});else for(var d in b)T(b,d)&amp;&amp;(a[d]=b[d]);return a}function h(a,b){for(var c in b)void 0===a[c]&amp;&amp;(a[c]=b[c]);return a}function i(a,b){return b.defaultInstance=h(new b(a),b.defaultInstance),a}function j(a,b){var c={};for(var d in b)if(d in a){var e=a[d],f=b[d];e!=f&amp;&amp;(Array.isArray(e)&amp;&amp;0===e.length||(&quot;function&quot;==typeof f?e=f(e):&quot;object&quot;==typeof e&amp;&amp;e&amp;&amp;e.parentEnum&amp;&amp;(e=e.name),void 0!==e&amp;&amp;(c[d]=e)))}return c}function k(a,b){if(a!==Object(a))return a;if(a._$visited)return void 0;if(a.toJSON){var c=a.toJSON();if(c!==Object(c))return c;if(c!==a)return k(c);a=c}a._$visited=!0;var d;if(a instanceof Array)d=a.map(function(a){return k(a,b)});else if(&quot;function&quot;==typeof a)d=void 0;else{var d={};for(var e in a)if(&quot;_$visited&quot;!==e){var f=a[e];if(!b||(f=b(e,f),void 0!==f)){var f=k(f);void 0!==f&amp;&amp;(d[e]=f)}}}return delete a._$visited,d}function l(a,b){var c={},d=a.length;return b.forEach(function(b){for(var e=0;d&gt;e;e++){var f=a[e];if(f){var g=f[b];if(void 0!==g){c[b]=g;break}}}}),c}function m(a){return null==a?[]:Array.isArray(a)?a:[a]}function n(a,b){if(null==a)return a;var c;return Array.isArray(a)?(c=[],a.map(function(a,d){c[d]=b(a,d)})):c=b(a),c}function o(a,b){for(var c=0,d=a.length;d&gt;c;c++)if(b(a[c]))return a[c];return null}function p(a,b){for(var c=0,d=a.length;d&gt;c;c++)if(b(a[c]))return c;return-1}function q(a,b,c){for(var d=D(b)?b:void 0,e=a.length-1,f=!1,g=e;g&gt;=0;g--)if((d?d(a[g]):a[g]===b)&amp;&amp;(a.splice(g,1),f=!0,!c))return f;return f}function r(a,b,c){for(var d=[],e=Math.min(a.length,b.length),f=0;e&gt;f;++f)d.push(c(a[f],b[f]));return d}function s(a,b,c){if(!a||!b)return!1;if(a.length!==b.length)return!1;for(var d=0;d&lt;a.length;d++)if(Array.isArray(a[d])){if(!s(a[d],b[d]))return!1}else if(c){if(!c(a[d],b[d]))return!1}else if(a[d]!==b[d])return!1;return!0}function t(a,b){var c=a[b];return c||(c=[],a[b]=c),c}function u(a,b){for(var c=a.split(&quot;;&quot;),d=0,e=c.length;e&gt;d;d++){var f=v(c[d]);if(f)return f}if(b)throw new Error(&quot;Unable to initialize &quot;+a+&quot;.  &quot;+b||&quot;&quot;)}function v(a){var b=this.window;if(b){var c=b[a];if(c)return c;var d=b.require;if(d){if(d.defined)return d.defined(a)?d(a):void 0;try{return d(a)}catch(e){return}}}}function w(a,b,c,d){var e=a[b];if(c===e)return d();a[b]=c;try{return d()}finally{void 0===e?delete a[b]:a[b]=e}}function x(a,b,c){var d;try{return d=a(),c()}catch(e){throw&quot;object&quot;==typeof d&amp;&amp;(d.error=e),e}finally{b(d)}}function y(a){return function(){for(var b=U(arguments),c=&quot;&quot;,d=b.length,e=null;d--;)e=b[d],c+=e===Object(e)?JSON.stringify(e):e,a.memoize||(a.memoize={});return c in a.memoize?a.memoize[c]:a.memoize[c]=a.apply(this,b)}}function z(){return&quot;xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx&quot;.replace(/[xy]/g,function(a){var b=16*Math.random()|0,c=&quot;x&quot;==a?b:3&amp;b|8;return c.toString(16)})}function A(a){if(&quot;string&quot;!=typeof a)throw new Error(&quot;Invalid ISO8601 duration &#39;&quot;+a+&quot;&#39;&quot;);var b=/^P((\d+Y)?(\d+M)?(\d+D)?)?(T(\d+H)?(\d+M)?(\d+S)?)?$/.exec(a);if(!b)throw new Error(&quot;Invalid ISO8601 duration &#39;&quot;+a+&quot;&#39;&quot;);for(var c=[2,3,4,6,7,8],d=[31104e3,2592e3,86400,3600,60,1],e=0,f=0;6&gt;f;f++){var g=b[c[f]];g=g?+g.replace(/[A-Za-z]+/g,&quot;&quot;):0,e+=g*d[f]}return e}function B(a){return null===a?&quot;null&quot;:void 0===a?&quot;undefined&quot;:Object.prototype.toString.call(a).slice(8,-1).toLowerCase()}function C(a){return&quot;date&quot;===B(a)&amp;&amp;!isNaN(a.getTime())}function D(a){return&quot;function&quot;===B(a)}function E(a){return&quot;string&quot;==typeof a&amp;&amp;/[a-fA-F\d]{8}-(?:[a-fA-F\d]{4}-){3}[a-fA-F\d]{12}/.test(a)}function F(a){return&quot;string&quot;==typeof a&amp;&amp;/^(-|)?P[T]?[\d\.,\-]+[YMDTHS]/.test(a)}function G(a){if(null===a||void 0===a)return!0;for(var b in a)if(T(a,b))return!1;return!0}function H(a){return!isNaN(parseFloat(a))&amp;&amp;isFinite(a)}function I(a,b){return a&amp;&amp;b?0===a.indexOf(b,0):!1}function J(a,b){return a&amp;&amp;b?-1!==a.indexOf(b,a.length-b.length):!1}function K(a){var b=arguments,c=RegExp(&quot;%([1-&quot;+(arguments.length-1)+&quot;])&quot;,&quot;g&quot;);return a.replace(c,function(a,c){return b[c]})}function L(a){var b=Function.call;return function(){return b.apply(a,arguments)}}function M(a,b,c){void 0===b&amp;&amp;(b=null);var d=c(),e=a.dataType;if(e&amp;&amp;e.parse&amp;&amp;(b=Array.isArray(b)&amp;&amp;!a.isScalar?b.map(function(a){return e.parse(a,typeof a)}):e.parse(b,typeof b)),!(b===d||e&amp;&amp;e.isDate&amp;&amp;b&amp;&amp;d&amp;&amp;b.valueOf()===d.valueOf())){var f,g,h,i=this,j=a.name,k=this.entityAspect;if(k)f=k;else{if(f=this.complexAspect,!f)return c(b),void 0;k=f.getEntityAspect()}var l=f.getPropertyPath(j),m=k._inProcess;if(m){if(m.indexOf(a)&gt;=0)return;m.push(a)}else m=[a],k._inProcess=m;var n=k.entity;try{var o=k.entityManager;if(k.entityState.isUnchangedOrModified()&amp;&amp;void 0===f.originalValues[j]&amp;&amp;a.isDataProperty&amp;&amp;!a.isComplexProperty&amp;&amp;(f.originalValues[j]=void 0!==d?d:a.defaultValue),a.isComplexProperty){if(!a.isScalar)throw new Error(K(&quot;You cannot set the non-scalar complex property: &#39;%1&#39; on the type: &#39;%2&#39;.Instead get the property and use array functions like &#39;push&#39; or &#39;splice&#39; to change its contents.&quot;,a.name,a.parentType.name));if(!b)throw new Error(K(&quot;You cannot set the &#39;%1&#39; property to null because it&#39;s datatype is the ComplexType: &#39;%2&#39;&quot;,a.name,a.dataType.name));if(!d){var p=e.getCtor();d=new p,c(d)}e.dataProperties.forEach(function(a){var c=a.name,e=b.getProperty(c);d.setProperty(c,e)})}else if(a.isDataProperty){if(!a.isScalar)throw new Error(&quot;Nonscalar data properties are readonly - items may be added or removed but the collection may not be changed.&quot;);if(a.isPartOfKey&amp;&amp;!this.complexAspect&amp;&amp;o&amp;&amp;!o.isLoading){var q=this.entityType.keyProperties,r=q.map(function(c){return c===a?b:this.getProperty(c.name)},this),s=new jb(this.entityType,r);if(o.findEntityByKey(s))throw new Error(&quot;An entity with this key is already in the cache: &quot;+s.toString());var t=this.entityAspect.getKey(),u=o._findEntityGroup(this.entityType);u._replaceKey(t,s)}var v=a.relatedNavigationProperty;if(v&amp;&amp;o)null!=b?(g=new jb(v.entityType,[b]),h=o.findEntityByKey(g),h?this.setProperty(v.name,h):o._unattachedChildrenMap.addChild(g,v,this)):this.setProperty(v.name,null);else if(a.inverseNavigationProperty&amp;&amp;o&amp;&amp;!o._inKeyFixup){var w=a.inverseNavigationProperty;if(null!=d&amp;&amp;(g=new jb(w.parentType,[d]),h=o.findEntityByKey(g)))if(w.isScalar)h.setProperty(w.name,null);else{var x=h.getProperty(w.name);x.splice(x.indexOf(this),1)}null!=b&amp;&amp;(g=new jb(w.parentType,[b]),h=o.findEntityByKey(g),h?w.isScalar?h.setProperty(w.name,this):h.getProperty(w.name).push(this):o._unattachedChildrenMap.addChild(g,w,this))}if(c(b),o&amp;&amp;!o.isLoading&amp;&amp;(k.entityState.isUnchanged()&amp;&amp;!a.isUnmapped&amp;&amp;k.setModified(),o.validationOptions.validateOnPropertyChange&amp;&amp;k._validateProperty(b,{entity:n,property:a,propertyName:l,oldValue:d})),a.isPartOfKey&amp;&amp;!this.complexAspect){var y=this.entityType.keyProperties.indexOf(a);this.entityType.navigationProperties.forEach(function(a){var c=a.inverse,d=c?c.foreignKeyNames:a.invForeignKeyNames;if(0!==d.length){var e=i.getProperty(a.name),f=d[y];if(a.isScalar){if(!e)return;e.setProperty(f,b)}else e.forEach(function(a){a.setProperty(f,b)})}}),k.getKey(!0)}}else{if(!a.isScalar)throw new Error(&quot;Nonscalar navigation properties are readonly - entities can be added or removed but the collection may not be changed.&quot;);var z=a.inverse;if(null!=b){var A=b.entityAspect;if(o){if(A.entityState.isDetached())o.isLoading||o.attachEntity(b,kb.Added);else if(A.entityManager!==o)throw new Error(&quot;An Entity cannot be attached to an entity in another EntityManager. One of the two entities must be detached first.&quot;)}else A&amp;&amp;A.entityManager&amp;&amp;(o=A.entityManager,o.isLoading||o.attachEntity(k.entity,kb.Added))}if(z)if(z.isScalar)null!=d&amp;&amp;d.setProperty(z.name,null),null!=b&amp;&amp;b.setProperty(z.name,this);else{if(null!=d){var B=d.getProperty(z.name),C=B.indexOf(this);-1!==C&amp;&amp;B.splice(C,1)}if(null!=b){var D=b.getProperty(z.name);D.push(this)}}else if(a.invForeignKeyNames&amp;&amp;o&amp;&amp;!o._inKeyFixup){var E=a.invForeignKeyNames;if(null!=b){var F=this.entityAspect.getKey().values;E.forEach(function(a,c){b.setProperty(a,F[c])})}else null!=d&amp;&amp;E.forEach(function(a){var b=d.entityType.getProperty(a);b.isPartOfKey||d.setProperty(a,null)})}if(c(b),o&amp;&amp;!o.isLoading&amp;&amp;(k.entityState.isUnchanged()&amp;&amp;!a.isUnmapped&amp;&amp;k.setModified(),o.validationOptions.validateOnPropertyChange&amp;&amp;k._validateProperty(b,{entity:this,property:a,propertyName:l,oldValue:d})),a.relatedDataProperties&amp;&amp;!k.entityState.isDeleted()){var G=a.entityType.keyProperties;G.forEach(function(c,d){var e=a.relatedDataProperties[d];if(b||!e.isPartOfKey){var f=b?b.getProperty(c.name):e.defaultValue;i.setProperty(e.name,f)}})}}var H={entity:n,parent:this,property:a,propertyName:l,oldValue:d,newValue:b};o?o.isLoading||o.isRejectingChanges||(k.propertyChanged.publish(H),o.entityChanged.publish({entityAction:gb.PropertyChange,entity:n,args:H})):k.propertyChanged.publish(H)}finally{m.pop()}}}function N(a){return a.indexOf(&quot;:#&quot;)&gt;=0}function O(a,b){return a+&quot;:#&quot;+b}function P(a,b,c){if(b)if(Array.isArray(b))b.forEach(a.addProperty.bind(a));else{if(&quot;object&quot;!=typeof b)throw new Error(&quot;The &#39;dataProperties&#39; or &#39;navigationProperties&#39; values must be either an array of data/nav properties or an object where each property defines a data/nav property&quot;);for(var d in b)if(T(b,d)){var e=b[d];e.name=d;var f=new c(e);a.addProperty(f)}}}function Q(a,b){var c;if(c=Array.isArray(b)?b:b.split(&quot;.&quot;),1===c.length)return a.getProperty(b);for(var d=a,e=0;e&lt;c.length&amp;&amp;(d=d.getProperty(c[e]),null!=d);e++);return d}function R(a){return a&amp;&amp;a.isDate?function(a){return a&amp;&amp;a.getTime()}:a===lb.Time?function(a){return a&amp;&amp;A(a)}:function(a){return a}}var S={version:&quot;1.4.8&quot;,metadataVersion:&quot;1.0.5&quot;},T=L(Object.prototype.hasOwnProperty),U=L(Array.prototype.slice);Object.create||(Object.create=function(a){var b=function(){};return b.prototype=a,new b});var V={};V.objectForEach=a,V.extend=g,V.propEq=d,V.pluck=e,V.arrayEquals=s,V.arrayFirst=o,V.arrayIndexOf=p,V.arrayRemoveItem=q,V.arrayZip=r,V.requireLib=u,V.using=w,V.memoize=y,V.getUuid=z,V.durationToSeconds=A,V.isDate=C,V.isGuid=E,V.isDuration=F,V.isFunction=D,V.isEmpty=G,V.isNumeric=H,V.stringStartsWith=I,V.stringEndsWith=J,V.formatString=K,V.toJSONSafe=k,V.parent=S,S.core=V;var W=function(){function a(a,b){return null==b?!1:&quot;string&quot;==typeof b&amp;&amp;b.length&gt;0}function b(a,b){return null==b?!1:typeof b===a.typeName?!0:!1}function c(a,b){return null==b?!1:b instanceof a.type}function d(a,b){return null==b?!1:void 0!==b[a.propertyName]}function e(a,b){return null==b?!1:a.enumType.contains(b)}function f(a,b){return a.allowNull?void 0!==b:null!=b}function h(a,b){if(null==b)return!0;var c=a.prevContext;return c?c.fn(c,b):!0}function i(a,b){var c=a.prevContext,d=c?&quot; or it &quot;+l(c,b):&quot;&quot;;return&quot;is optional&quot;+d}function j(a,b){if(!Array.isArray(b))return!1;if(a.mustNotBeEmpty&amp;&amp;0===b.length)return!1;var c=a.prevContext;return c?b.every(function(a){return c.fn(c,a)}):!0}function k(a,b){var c=a.mustNotBeEmpty?&quot;a nonEmpty array&quot;:&quot;an array&quot;,d=a.prevContext,e=d?&quot; where each element &quot;+l(d,b):&quot;&quot;;return&quot; must be &quot;+c+e}function l(a,b){var c=a.msg;return&quot;function&quot;==typeof c&amp;&amp;(c=c(a,b)),c}function m(a,b){if(a._context){for(var c=a._context;null!=c.prevContext;)c=c.prevContext;if(null===c.prevContext)return c.prevContext=b,a;if(null!==b.prevContext)throw new Error(&quot;Illegal construction - use &#39;or&#39; to combine checks&quot;);b.prevContext=a._context}return n(a,b)}function n(a,b){return a._contexts[a._contexts.length-1]=b,a._context=b,a}function o(a){var b=a._contexts;return null==b[b.length-1]&amp;&amp;b.pop(),0===b.length?void 0:b.some(function(b){return b.fn(b,a.v)})}function p(a,b){throw new Error(K(&quot;Error configuring an instance of &#39;%1&#39;. %2&quot;,a&amp;&amp;a._$typeName||&quot;object&quot;,b))}var q=function(a,b){this.v=a,this.name=b,this._contexts=[null]},r=q.prototype;return r.isObject=function(){return this.isTypeOf(&quot;object&quot;)},r.isBoolean=function(){return this.isTypeOf(&quot;boolean&quot;)},r.isString=function(){return this.isTypeOf(&quot;string&quot;)},r.isNonEmptyString=function(){return m(this,{fn:a,msg:&quot;must be a nonEmpty string&quot;})},r.isNumber=function(){return this.isTypeOf(&quot;number&quot;)},r.isFunction=function(){return this.isTypeOf(&quot;function&quot;)},r.isTypeOf=function(a){return m(this,{fn:b,typeName:a,msg:K(&quot;must be a &#39;%1&#39;&quot;,a)})},r.isInstanceOf=function(a,b){return b=b||a.prototype._$typeName,m(this,{fn:c,type:a,typeName:b,msg:K(&quot;must be an instance of &#39;%1&#39;&quot;,b)})},r.hasProperty=function(a){return m(this,{fn:d,propertyName:a,msg:K(&quot;must have a &#39;%1&#39; property &quot;,a)})},r.isEnumOf=function(a){return m(this,{fn:e,enumType:a,msg:K(&quot;must be an instance of the &#39;%1&#39; enumeration&quot;,a.name)})},r.isRequired=function(a){return m(this,{fn:f,allowNull:a,msg:&quot;is required&quot;})},r.isOptional=function(){var a={fn:h,prevContext:null,msg:i};return m(this,a)},r.isNonEmptyArray=function(){return this.isArray(!0)},r.isArray=function(a){var b={fn:j,mustNotBeEmpty:a,prevContext:null,msg:k};return m(this,b)},r.or=function(){return this._contexts.push(null),this._context=null,this},r.check=function(a){var b=o(this);if(void 0!==b){if(!b)throw new Error(this.getMessage());return void 0!==this.v?this.v:a}},r._addContext=function(a){return m(this,a)},r.getMessage=function(){var a=this,b=this._contexts.map(function(b){return l(b,a.v)}).join(&quot;, or it &quot;);return K(this.MESSAGE_PREFIX,this.name)+&quot; &quot;+b},r.withDefault=function(a){return this.defaultValue=a,this},r.whereParam=function(a){return this.parent.whereParam(a)},r.applyAll=function(a,b,c){var d=a._$typeName;c=c||d&amp;&amp;this.parent.config._$typeName===d;var e=g({},this.parent.config);if(this.parent.params.forEach(function(d){c||delete e[d.name];try{d.check()}catch(f){p(a,f.message)}!b&amp;&amp;d._applyOne(a)}),!c)for(var f in e)void 0!==e[f]&amp;&amp;p(a,K(&quot;Unknown property: &#39;%1&#39;.&quot;,f))},r._applyOne=function(a){void 0!==this.v?a[this.name]=this.v:void 0!==this.defaultValue&amp;&amp;(a[this.name]=this.defaultValue)},r.MESSAGE_PREFIX=&quot;The &#39;%1&#39; parameter &quot;,q}(),X=function(a,b){return new W(a,b)},Y=function(){var a=function(a){if(&quot;object&quot;!=typeof a)throw new Error(&quot;Configuration parameter should be an object, instead it is a: &quot;+typeof a);this.config=a,this.params=[]},b=a.prototype;return b.whereParam=function(a){var b=new W(this.config[a],a);return b.parent=this,this.params.push(b),b},a}(),Z=function(a){return new Y(a)};V.Param=W,V.assertParam=X,V.assertConfig=Z;var $=function(){function a(){}var b=function(b,c){this.name=b;var d=new a(c);d.parentEnum=this,this._symbolPrototype=d,c&amp;&amp;Object.keys(c).forEach(function(a){d[a]=c[a]})},c=b.prototype;return b.isSymbol=function(b){return b instanceof a},c.fromName=function(a){return this[a]},c.addSymbol=function(a){var b=Object.create(this._symbolPrototype);return a&amp;&amp;Object.keys(a).forEach(function(c){b[c]=a[c]}),setTimeout(function(){b.getName()},0),b},c.seal=function(){this.getSymbols().forEach(function(a){return a.getName()})},c.getSymbols=function(){return this.getNames().map(function(a){return this[a]},this)},c.getNames=function(){var a=[];for(var b in this)this.hasOwnProperty(b)&amp;&amp;(&quot;name&quot;===b||&quot;_&quot;===b.substr(0,1)||D(this[b])||a.push(b));return a},c.contains=function(b){return b instanceof a?this[b.getName()]===b:!1},a.prototype.getName=function(){if(!this.name){var a=this;this.name=o(this.parentEnum.getNames(),function(b){return a.parentEnum[b]===a})}return this.name},a.prototype.toString=function(){return this.getName()},a.prototype.toJSON=function(){return{_$typeName:this.parentEnum.name,name:this.name}},b}();V.Enum=$;var _=function(){function a(a,c,d){var e=a._subscribers;return e?(e.forEach(function(e){try{e.callback(c)}catch(f){f.context=&quot;unable to publish on topic: &quot;+a.name,d?d(f):a._defaultErrorCallback?a._defaultErrorCallback(f):b(f)}}),void 0):!0}function b(){}var c={},d=1,e=function(a,b,d){X(a,&quot;eventName&quot;).isNonEmptyString().check(),X(b,&quot;publisher&quot;).isObject().check(),this.name=a,c[a]=!0,this.publisher=b,d&amp;&amp;(this._defaultErrorCallback=d)},f=e.prototype;return f.publish=function(b,c,d){return e._isEnabled(this.name,this.publisher)?(c===!0?setTimeout(a,0,this,b,d):a(this,b,d),!0):!1},f.publishAsync=function(a,b){this.publish(a,!0,b)},f.subscribe=function(a){this._subscribers||(this._subscribers=[]);var b=d;return this._subscribers.push({unsubKey:b,callback:a}),++d,b},f.unsubscribe=function(a){if(!this._subscribers)return!1;var b=this._subscribers,c=p(b,function(b){return b.unsubKey===a});return-1!==c?(b.splice(c,1),0===b.length&amp;&amp;(this._subscribers=null),!0):!1},f.clear=function(){this._subscribers=null},e.bubbleEvent=function(a,b){a._getEventParent=b},e.enable=function(a,b,c){X(a,&quot;eventName&quot;).isNonEmptyString().check(),X(b,&quot;obj&quot;).isObject().check(),X(c,&quot;isEnabled&quot;).isBoolean().isOptional().or().isFunction().check(),b._$eventMap||(b._$eventMap={}),b._$eventMap[a]=c},e.isEnabled=function(a,b){if(X(a,&quot;eventName&quot;).isNonEmptyString().check(),X(b,&quot;obj&quot;).isObject().check(),!b._getEventParent)throw new Error(&quot;This object does not support event enabling/disabling&quot;);return e._isEnabled(b,a)},e._isEnabled=function(a,b){var c=null,d=b._$eventMap;if(d&amp;&amp;(c=d[a]),null!=c)return&quot;function&quot;==typeof c?c(b):!!c;var f=b._getEventParent&amp;&amp;b._getEventParent();return f?e._isEnabled(a,f):!0},e}();V.Event=_;var ab=function(){function a(a,b,c){var d=b.defaultInstance;return d||(d=new b.ctor,b.defaultInstance=d,d._$impl=b),d.initialize(),c&amp;&amp;(a.defaultInstance=d),e.interfaceInitialized.publish({interfaceName:a.name,instance:d,isDefault:!0}),d.checkForRecomposition&amp;&amp;e.interfaceInitialized.subscribe(function(a){d.checkForRecomposition(a)}),d}function d(a){var c=a.toLowerCase(),d=b(e.interfaceRegistry||{},function(a){return a.toLowerCase()===c});if(!d)throw new Error(&quot;Unknown interface name: &quot;+a);return d.value}var e={};e.functionRegistry={},e.typeRegistry={},e.objectRegistry={},e.interfaceInitialized=new _(&quot;interfaceInitialized&quot;,e);var f=function(a){this.name=a,this.defaultInstance=null,this._implMap={}};return f.prototype.registerCtor=function(a,b){this._implMap[a.toLowerCase()]={ctor:b,defaultInstance:null}},f.prototype.getImpl=function(a){return this._implMap[a.toLowerCase()]},f.prototype.getFirstImpl=function(){var a=b(this._implMap,function(){return!0});return a?a.value:null},e.interfaceRegistry={ajax:new f(&quot;ajax&quot;),modelLibrary:new f(&quot;modelLibrary&quot;),dataService:new f(&quot;dataService&quot;)},e.interfaceRegistry.modelLibrary.getDefaultInstance=function(){if(!this.defaultInstance)throw new Error(&quot;Unable to locate the default implementation of the &#39;&quot;+this.name+&quot;&#39; interface.  Possible options are &#39;ko&#39;, &#39;backingStore&#39; or &#39;backbone&#39;. See the breeze.config.initializeAdapterInstances method.&quot;);return this.defaultInstance},e.setProperties=function(a){Z(a).whereParam(&quot;remoteAccessImplementation&quot;).isOptional().whereParam(&quot;trackingImplementation&quot;).isOptional().whereParam(&quot;ajaxImplementation&quot;).isOptional().applyAll(a),a.remoteAccessImplementation&amp;&amp;e.initializeAdapterInstance(&quot;dataService&quot;,a.remoteAccessImplementation),a.trackingImplementation&amp;&amp;e.initializeAdapterInstance(&quot;modelLibrary&quot;,a.trackingImplementation),a.ajaxImplementation&amp;&amp;e.initializeAdapterInstance(&quot;ajax&quot;,a.ajaxImplementation)},e.registerAdapter=function(a,b){X(a,&quot;interfaceName&quot;).isNonEmptyString().check(),X(b,&quot;adapterCtor&quot;).isFunction().check();var c=new b,e=c.name;if(!e)throw new Error(&quot;Unable to locate a &#39;name&#39; property on the constructor passed into the &#39;registerAdapter&#39; call.&quot;);var f=d(a);f.registerCtor(e,b)},e.getAdapter=function(a,b){var c=d(a);if(b){var e=c.getImpl(b);return e?e.ctor:null}return c.defaultInstance?c.defaultInstance._$impl.ctor:null},e.initializeAdapterInstances=function(a){return Z(a).whereParam(&quot;dataService&quot;).isOptional().whereParam(&quot;modelLibrary&quot;).isOptional().whereParam(&quot;ajax&quot;).isOptional().applyAll(this,!1),c(a,e.initializeAdapterInstance)},e.initializeAdapterInstance=function(b,c,e){e=void 0===e?!0:e,X(b,&quot;interfaceName&quot;).isNonEmptyString().check(),X(c,&quot;adapterName&quot;).isNonEmptyString().check(),X(e,&quot;isDefault&quot;).isBoolean().check();var f=d(b),g=f.getImpl(c);if(!g)throw new Error(&quot;Unregistered adapter.  Interface: &quot;+b+&quot; AdapterName: &quot;+c);return a(f,g,e)},e.getAdapterInstance=function(b,c){var e,f=d(b);return c&amp;&amp;&quot;&quot;!==c?(e=f.getImpl(c),e?e.defaultInstance:null):f.defaultInstance?f.defaultInstance:(e=f.getFirstImpl(),e.defaultInstance?e.defaultInstance:a(f,e,!0))},e.registerFunction=function(a,b){X(a,&quot;fn&quot;).isFunction().check(),X(b,&quot;fnName&quot;).isString().check(),a.prototype._$fnName=b,e.functionRegistry[b]=a},e._storeObject=function(a,b,c){var d=(&quot;string&quot;==typeof b?b:b.prototype._$typeName)+&quot;.&quot;+c;e.objectRegistry[d]=a},e._fetchObject=function(a,b){if(!b)return void 0;var c=(&quot;string&quot;==typeof a?a:a.prototype._$typeName)+&quot;.&quot;+b,d=e.objectRegistry[c];if(!d)throw new Error(&quot;Unable to locate a registered object by the name: &quot;+c);return d},e.registerType=function(a,b){X(a,&quot;ctor&quot;).isFunction().check(),X(b,&quot;typeName&quot;).isString().check(),a.prototype._$typeName=b,e.typeRegistry[b]=a},e.stringifyPad=&quot;&quot;,e}(),bb=ab.interfaceRegistry.modelLibrary;V.config=ab,S.config=ab;var cb=function(){function a(a){var b=a.getEntityAspect();b.entityState.isUnchanged()&amp;&amp;b.setModified(),b.entityState.isModified()&amp;&amp;!a._origValues&amp;&amp;(a._origValues=a.slice(0))}function b(a,b){a._processAdds(b),d(a,&quot;arrayChanged&quot;,{array:a,added:b})}function c(a,b){a._processRemoves(b),d(a,&quot;arrayChanged&quot;,{array:a,removed:b})}function d(a,b,c){var d=a._getPendingPubs();d?a._pendingArgs?e(a._pendingArgs,c):(a._pendingArgs=c,d.push(function(){a[b].publish(a._pendingArgs),a._pendingArgs=null})):a[b].publish(c)}function e(a,b){for(var c in b)if(&quot;array&quot;!==c&amp;&amp;a.hasOwnProperty(c)){var d=b[c],e=a[c];if(e){if(!Array.isArray(e))throw new Error(&quot;Cannot combine non array args&quot;);Array.prototype.push.apply(e,d)}else a[c]=d}}function f(a,b,c){a.parent=b,a.parentProperty=c}var g={};return g.push=function(){if(this._inProgress)return-1;var a=this._getGoodAdds(U(arguments));if(!a.length)return this.length;this._beforeChange();var c=Array.prototype.push.apply(this,a);return b(this,a),c},g._push=function(){if(this._inProgress)return-1;var a=U(arguments);this._beforeChange();var c=Array.prototype.push.apply(this,a);return b(this,a),c},g.unshift=function(){var a=this._getGoodAdds(U(arguments));if(!a.length)return this.length;this._beforeChange();var c=Array.prototype.unshift.apply(this,a);return b(this,U(a)),c},g.pop=function(){this._beforeChange();var a=Array.prototype.pop.apply(this);return c(this,[a]),a},g.shift=function(){this._beforeChange();var a=Array.prototype.shift.apply(this);return c(this,[a]),a},g.splice=function(){var a=this._getGoodAdds(U(arguments,2)),d=U(arguments,0,2).concat(a);this._beforeChange();var e=Array.prototype.splice.apply(this,d);return c(this,e),a.length&amp;&amp;b(this,a),e},g.getEntityAspect=function(){return this.parent.entityAspect||this.parent.complexAspect.getEntityAspect()},g._getEventParent=function(){return this.getEntityAspect()},g._getPendingPubs=function(){var a=this.getEntityAspect().entityManager;return a&amp;&amp;a._pendingPubs},g._beforeChange=function(){},{mixin:g,publish:d,updateEntityState:a,initializeParent:f}}(),db=function(){function b(a,b,c,d,e){for(d=+a[b=a.length-1],e=0;b--;)c=+a[b],d+=++e%2?2*c%10+(c&gt;4):c;return!(d%10)}function c(a,b,c,d){c&amp;&amp;(n.messageTemplates[a]=c);var e=&quot;string&quot;==typeof b?new RegExp(b):b,f=function(a){return null==a||&quot;&quot;===a?!0:&quot;string&quot;!=typeof a?!1:e.test(a)};return new n(a,f,d)}function d(a,b,c){return b?a.replace(/%([^%]+)%/g,function(a,d){var e;return e=c?b.hasOwnProperty(d)?b[d]:&quot;&quot;:b[d],e?D(e)?e(b):e:&quot;&quot;}):a}function e(a,b,c,d){return n.messageTemplates[a]=K(&quot;&#39;%displayName%&#39; must be an integer between the values of %1 and %2&quot;,b,c),function(){var e=function(a,d){return null==a?!0:(&quot;string&quot;==typeof a&amp;&amp;d&amp;&amp;d.allowString&amp;&amp;(a=parseInt(a,0)),&quot;number&quot;!=typeof a||isNaN(a)||Math.floor(a)!==a?!1:null!=b&amp;&amp;b&gt;a?!1:null!=c&amp;&amp;a&gt;c?!1:!0)};return new n(a,e,d)}}var f=-32768,h=32767,i=-2147483648,j=2147483647,k=0,l=255,m={displayName:function(a){return a.property?a.property.displayName||a.propertyName||a.property.name:&quot;Value&quot;}},n=function(a,b,c){this._baseContext=c||{},this._baseContext.name=a,c=g(Object.create(m),this._baseContext),c.messageTemplate=c.messageTemplate||n.messageTemplates[a],this.name=a,this.valFn=b,this.context=c},o=n.prototype;return o._$typeName=&quot;Validator&quot;,o.validate=function(a,b){var c;c=b?g(Object.create(this.context),b):this.context,this.currentContext=c;try{return this.valFn(a,c)?null:(c.value=a,new eb(this,c,this.getMessage()))}catch(d){return new eb(this,c,&quot;Exception occured while executing this validator: &quot;+this.name)}},o.getMessage=function(){try{var a=this.currentContext,b=a.message;return b?&quot;function&quot;==typeof b?b(a):b:a.messageTemplate?d(a.messageTemplate,a):&quot;invalid value: &quot;+this.name||&quot;{unnamed validator}&quot;}catch(c){return&quot;Unable to format error message&quot;+c.toString()}},o.toJSON=function(){return this._baseContext},n.fromJSON=function(a){var b=&quot;Validator.&quot;+a.name,c=ab.functionRegistry[b];if(!c)throw new Error(&quot;Unable to locate a validator named:&quot;+a.name);return c(a)},n.register=function(a){ab.registerFunction(function(){return a},&quot;Validator.&quot;+a.name)},n.registerFactory=function(a,b){ab.registerFunction(a,&quot;Validator.&quot;+b)},n.messageTemplates={bool:&quot;&#39;%displayName%&#39; must be a &#39;true&#39; or &#39;false&#39; value&quot;,creditCard:&quot;The %displayName% is not a valid credit card number&quot;,date:&quot;&#39;%displayName%&#39; must be a date&quot;,duration:&quot;&#39;%displayName%&#39; must be a ISO8601 duration string, such as &#39;P3H24M60S&#39;&quot;,emailAddress:&quot;The %displayName% &#39;%value%&#39; is not a valid email address&quot;,guid:&quot;&#39;%displayName%&#39; must be a GUID&quot;,integer:&quot;&#39;%displayName%&#39; must be an integer&quot;,integerRange:&quot;&#39;%displayName%&#39; must be an integer between the values of %minValue% and %maxValue%&quot;,maxLength:&quot;&#39;%displayName%&#39; must be a string with %maxLength% characters or less&quot;,number:&quot;&#39;%displayName%&#39; must be a number&quot;,phone:&quot;The %displayName% &#39;%value%&#39; is not a valid phone number&quot;,regularExpression:&quot;The %displayName% &#39;%value%&#39; does not match &#39;%expression%&#39;&quot;,required:&quot;&#39;%displayName%&#39; is required&quot;,string:&quot;&#39;%displayName%&#39; must be a string&quot;,stringLength:&quot;&#39;%displayName%&#39; must be a string with between %minLength% and %maxLength% characters&quot;,url:&quot;The %displayName% &#39;%value%&#39; is not a valid url&quot;},n.required=function(a){var b=function(a,b){return&quot;string&quot;==typeof a?b&amp;&amp;b.allowEmptyStrings?!0:a.length&gt;0:null!=a};return new n(&quot;required&quot;,b,a)},n.maxLength=function(a){var b=function(a,b){return null==a?!0:&quot;string&quot;!=typeof a?!1:a.length&lt;=b.maxLength};return new n(&quot;maxLength&quot;,b,a)},n.stringLength=function(a){var b=function(a,b){return null==a?!0:&quot;string&quot;!=typeof a?!1:null!=b.minLength&amp;&amp;a.length&lt;b.minLength?!1:null!=b.maxLength&amp;&amp;a.length&gt;b.maxLength?!1:!0};return new n(&quot;stringLength&quot;,b,a)},n.string=function(){var a=function(a){return null==a?!0:&quot;string&quot;==typeof a};return new n(&quot;string&quot;,a)},n.guid=function(){var a=function(a){return null==a?!0:E(a)};return new n(&quot;guid&quot;,a)},n.duration=function(){var a=function(a){return null==a?!0:F(a)};return new n(&quot;duration&quot;,a)},n.number=n.double=n.single=function(a){var b=function(a,b){return null==a?!0:(&quot;string&quot;==typeof a&amp;&amp;b&amp;&amp;b.allowString&amp;&amp;(a=parseInt(a,10)),&quot;number&quot;==typeof a&amp;&amp;!isNaN(a))};return new n(&quot;number&quot;,b,a)},n.integer=n.int64=function(a){var b=function(a,b){return null==a?!0:(&quot;string&quot;==typeof a&amp;&amp;b&amp;&amp;b.allowString&amp;&amp;(a=parseInt(a,10)),&quot;number&quot;==typeof a&amp;&amp;!isNaN(a)&amp;&amp;Math.floor(a)===a)};return new n(&quot;integer&quot;,b,a)},n.int32=function(a){return e(&quot;int32&quot;,i,j,a)()},n.int16=function(a){return e(&quot;int16&quot;,f,h,a)()},n.byte=function(a){return e(&quot;byte&quot;,k,l,a)()},n.bool=function(){var a=function(a){return null==a?!0:a===!0||a===!1};return new n(&quot;bool&quot;,a)},n.none=function(){var a=function(){return!0};return new n(&quot;none&quot;,a)},n.date=function(){var a=function(a){if(null==a)return!0;if(&quot;string&quot;!=typeof a)return C(a);try{return!isNaN(Date.parse(a))}catch(b){return!1}};return new n(&quot;date&quot;,a)},n.creditCard=function(a){function c(a){return null==a||&quot;&quot;===a?!0:&quot;string&quot;!=typeof a?!1:(a=a.replace(/(\-|\s)/g,&quot;&quot;),!a||/\D/.test(a)?!1:b(a))}return new n(&quot;creditCard&quot;,c,a)},n.regularExpression=function(a){function b(a,b){if(null==a||&quot;&quot;===a)return!0;if(&quot;string&quot;!=typeof a)return!1;try{var c=new RegExp(b.expression)}catch(d){throw new Error(&quot;Missing or invalid expression parameter to regExp validator&quot;)}return c.test(a)}return new n(&quot;regularExpression&quot;,b,a)},n.emailAddress=function(a){var b=/^((([a-z]|\d|[!#\$%&amp;&#39;\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&amp;&#39;\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/;return c(&quot;emailAddress&quot;,b,null,a)},n.phone=function(a){var b=/^((\+|(0(\d+)?[-/.\s]?))[1-9]\d{0,2}[-/.\s]?)?((\(\d{1,6}\)|\d{1,6})[-/.\s]?)?(\d+[-/.\s]?)+\d+$/;return c(&quot;phone&quot;,b,null,a)},n.url=function(a){var b=/^(https?|ftp):\/\/(((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-fA-F]{2})|[!\$&amp;&#39;\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|([a-zA-Z][\-a-zA-Z0-9]*)|((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-fA-F]{2})|[!\$&amp;&#39;\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-fA-F]{2})|[!\$&amp;&#39;\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-fA-F]{2})|[!\$&amp;&#39;\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-fA-F]{2})|[!\$&amp;&#39;\(\)\*\+,;=]|:|@)|\/|\?)*)?$/;return c(&quot;url&quot;,b,null,a)},n.makeRegExpValidator=c,a(n,function(a,b){&quot;function&quot;==typeof b&amp;&amp;&quot;fromJSON&quot;!==a&amp;&amp;&quot;register&quot;!==a&amp;&amp;&quot;registerFactory&quot;!==a&amp;&amp;&quot;makeRegExpValidator&quot;!==a&amp;&amp;ab.registerFunction(b,&quot;Validator.&quot;+a)}),n}(),eb=function(){var a=function(a,b,c,d){X(a,&quot;validator&quot;).isOptional().isInstanceOf(db).check(),X(c,&quot;errorMessage&quot;).isNonEmptyString().check(),X(d,&quot;key&quot;).isOptional().isNonEmptyString().check(),this.validator=a;var b=b||{};this.context=b,this.errorMessage=c,this.property=b.property,this.propertyName=b.propertyName||b.property&amp;&amp;b.property.name,this.key=d?d:eb.getKey(a||c,this.propertyName),this.isServerError=!1};return a.getKey=function(a,b){return(a.name||a)+(b?&quot;:&quot;+b:&quot;&quot;)},a}();S.Validator=db,S.ValidationError=eb;var fb=function(){function a(a,b){return b&amp;&amp;Z(b).whereParam(&quot;validateOnAttach&quot;).isBoolean().isOptional().whereParam(&quot;validateOnSave&quot;).isBoolean().isOptional().whereParam(&quot;validateOnQuery&quot;).isBoolean().isOptional().whereParam(&quot;validateOnPropertyChange&quot;).isBoolean().isOptional().applyAll(a),a}var b=function(b){a(this,b)},c=b.prototype;</div><div class='line' id='LC2'>return c._$typeName=&quot;ValidationOptions&quot;,c.using=function(b){if(!b)return this;var c=new fb(this);return a(c,b),c},c.setAsDefault=function(){return i(this,b)},b.defaultInstance=new b({validateOnAttach:!0,validateOnSave:!0,validateOnQuery:!1,validateOnPropertyChange:!0}),b}();S.ValidationOptions=fb,S.makeComplexArray=function(){function a(a,b){return b.filter(function(b){return b.parent!==a.parent})}function b(a,b){b.forEach(function(b){if(null!=b.parent)throw new Error(&quot;The complexObject is already attached. Either clone it or remove it from its current owner&quot;);e(b,a)})}function c(a,b){b.forEach(function(b){d(b,a)})}function d(a,b){var c=a.complexAspect;return c.parent!==b.parent?null:(c.parent=null,c.parentProperty=null,c)}function e(a,b){var c=a.complexAspect;return c.parent===b.parent?null:(c.parent=b.parent,c.parentProperty=b.parentProperty,c)}function f(a,b,c){return cb.initializeParent(a,b,c),a.arrayChanged=new _(&quot;arrayChanged&quot;,a),g(a,cb.mixin),g(a,h)}var h={};return h._getGoodAdds=function(b){return a(this,b)},h._beforeChange=function(){cb.updateEntityState(this)},h._processAdds=function(a){b(this,a)},h._processRemoves=function(a){c(this,a)},h._rejectChanges=function(){if(this._origValues){var a=this;this.forEach(function(b){d(b,a)}),this.length=0,this._origValues.forEach(function(b){a.push(b)}),Array.prototype.push.apply(this,this._origValues)}},h._acceptChanges=function(){this._origValues=null},f}();var gb=function(){var a={isAttach:function(){return!!this.isAttach},isDetach:function(){return!!this.isDetach},isModification:function(){return!!this.isModification}},b=new $(&quot;EntityAction&quot;,a);return b.Attach=b.addSymbol({isAttach:!0}),b.AttachOnQuery=b.addSymbol({isAttach:!0}),b.AttachOnImport=b.addSymbol({isAttach:!0}),b.Detach=b.addSymbol({isDetach:!0}),b.MergeOnQuery=b.addSymbol({isModification:!0}),b.MergeOnImport=b.addSymbol({isModification:!0}),b.MergeOnSave=b.addSymbol({isModification:!0}),b.PropertyChange=b.addSymbol({isModification:!0}),b.EntityStateChange=b.addSymbol(),b.AcceptChanges=b.addSymbol(),b.RejectChanges=b.addSymbol({isModification:!0}),b.Clear=b.addSymbol({isDetach:!0}),b.seal(),b}();S.EntityAction=gb;var hb=function(){function b(a){var c=a.entityAspect||a.complexAspect,d=a.entityType||a.complexType,e=c.originalValues;for(var f in e)a.setProperty(f,e[f]);d.complexProperties.forEach(function(c){var d=a.getProperty(c.name);c.isScalar?b(d):(d._rejectChanges(),d.forEach(function(a){b(a)}))})}function c(a){var b=a.entityAspect||a.complexAspect;b.originalValues={};var d=a.entityType||a.complexType;d.complexProperties.forEach(function(b){var d=a.getProperty(b.name);b.isScalar?c(d):(d._acceptChanges(),d.forEach(function(a){c(a)}))})}function d(a){var b=!0,c=a.entityType||a.complexType,e=a.entityAspect||a.complexAspect,f=a.entityAspect||a.complexAspect.getEntityAspect();return c.getProperties().forEach(function(c){var g=a.getProperty(c.name),h=e.getPropertyPath(c.name);if(c.validators.length&gt;0){var i={entity:f.entity,property:c,propertyName:h};b=f._validateProperty(g,i)&amp;&amp;b}c.isComplexProperty&amp;&amp;c.isScalar&amp;&amp;(b=d(g)&amp;&amp;b)}),c.validators.forEach(function(a){b=i(f,a,e.entity)&amp;&amp;b}),b}function e(a,b){var c=b.isDeleted();c?g(a,!0):w(a.entityAspect.entityManager,&quot;isLoading&quot;,!0,function(){g(a,!1)})}function g(a,b){a.entityType.navigationProperties.forEach(function(c){var d=c.inverse,e=a.getProperty(c.name);if(c.isScalar){if(e){if(d)if(d.isScalar)h(e,d,b);else{var f=e.getProperty(d.name);f.length&amp;&amp;q(f,a)}a.setProperty(c.name,null)}}else d&amp;&amp;e.slice(0).forEach(function(a){d.isScalar&amp;&amp;h(a,d,b)}),e.length=0})}function h(a,b,c){if(c)a.setProperty(b.name,null);else{var d=(a.entityAspect.entityManager,b.foreignKeyNames);if(d)var e=d.map(function(b){return a.getProperty(b)});a.setProperty(b.name,null),d&amp;&amp;d.forEach(function(b,c){a.setProperty(b,e[c])})}}function i(a,b,c,d){var e=b.validate(c,d);if(e)return a._addValidationError(e),!1;var f=eb.getKey(b,d?d.propertyName:null);return a._removeValidationError(f),!0}var j=function(a){if(null===a){var b=hb._nullInstance;if(b)return b;hb._nullInstance=this}else{if(void 0===a)throw new Error(&quot;The EntityAspect ctor requires an entity as its only argument.&quot;);if(a.entityAspect)return a.entityAspect}if(!(this instanceof hb))return new hb(a);if(this.entity=a,this.entityGroup=null,this.entityManager=null,this.entityState=kb.Detached,this.isBeingSaved=!1,this.originalValues={},this.hasValidationErrors=!1,this._validationErrors={},this.validationErrorsChanged=new _(&quot;validationErrorsChanged&quot;,this),this.propertyChanged=new _(&quot;propertyChanged&quot;,this),null!=a){a.entityAspect=this;var c=a.entityType||a._$entityType;if(!c){var d=a.prototype._$typeName;throw d?new Error(&quot;Metadata for this entityType has not yet been resolved: &quot;+d):new Error(&quot;This entity is not registered as a valid EntityType&quot;)}var e=c.getEntityCtor();bb.getDefaultInstance().startTracking(a,e.prototype)}},k=j.prototype;return _.bubbleEvent(k,function(){return this.entityManager}),k.getKey=function(a){if(a=X(a,&quot;forceRefresh&quot;).isBoolean().isOptional().check(!1),a||!this._entityKey){var b=this.entity.entityType,c=b.keyProperties,d=c.map(function(a){return this.entity.getProperty(a.name)},this);this._entityKey=new jb(b,d)}return this._entityKey},k.acceptChanges=function(){var a=this.entityManager;this.entityState.isDeleted()?a.detachEntity(this.entity):this.setUnchanged(),a.entityChanged.publish({entityAction:gb.AcceptChanges,entity:this.entity})},k.rejectChanges=function(){var a=this.entity,c=this.entityManager;w(c,&quot;isRejectingChanges&quot;,!0,function(){b(a)}),this.entityState.isAdded()?(c.detachEntity(a),c._notifyStateChange(a,!1)):(this.entityState.isDeleted()&amp;&amp;this.entityManager._linkRelatedEntities(a),this.setUnchanged(),this.propertyChanged.publish({entity:a,propertyName:null}),this.entityManager.entityChanged.publish({entityAction:gb.RejectChanges,entity:a}))},k.getPropertyPath=function(a){return a},k.setUnchanged=function(){c(this.entity),delete this.hasTempKey,this.entityState=kb.Unchanged,this.entityManager._notifyStateChange(this.entity,!1)},k.setModified=function(){this.entityState=kb.Modified,this.entityManager._notifyStateChange(this.entity,!0)},k.setDeleted=function(){var a=this.entityManager,b=this.entity;this.entityState.isAdded()?(a.detachEntity(b),a._notifyStateChange(b,!1)):(this.entityState=kb.Deleted,e(b,kb.Deleted),a._notifyStateChange(b,!0))},k.setDetached=function(){var a=this.entityGroup;if(!a)return!1;var b=this.entity;return a.detachEntity(b),e(b,kb.Detached),this.entityManager.entityChanged.publish({entityAction:gb.Detach,entity:b}),this._detach(),!0},k.loadNavigationProperty=function(a,b,c){var d=this.entity,e=d.entityType._checkNavProperty(a),f=zb.fromEntityNavigation(d,e);return d.entityAspect.entityManager.executeQuery(f,b,c)},k.validateEntity=function(){var a=!0;return this._processValidationOpAndPublish(function(b){a=d(b.entity)}),a},k.validateProperty=function(a,b){var c=this.getPropertyValue(a);return c&amp;&amp;c.complexAspect?d(c):(b=b||{},b.entity=this.entity,&quot;string&quot;==typeof a?(b.property=this.entity.entityType.getProperty(a,!0),b.propertyName=a):(b.property=a,b.propertyName=a.name),this._validateProperty(c,b))},k.getValidationErrors=function(a){X(a,&quot;property&quot;).isOptional().isEntityProperty().or().isString().check();var b=f(this._validationErrors);if(a){var c=&quot;string&quot;==typeof a?a:a.name;b=b.filter(function(a){return a.property&amp;&amp;a.property.name===c})}return b},k.addValidationError=function(a){X(a,&quot;validationError&quot;).isInstanceOf(eb).check(),this._processValidationOpAndPublish(function(b){b._addValidationError(a)})},k.removeValidationError=function(a){X(a,&quot;validationErrorOrKey&quot;).isString().or().isInstanceOf(eb).or().isInstanceOf(db).check();var b=&quot;string&quot;==typeof a?a:a.key;this._processValidationOpAndPublish(function(a){a._removeValidationError(b)})},k.clearValidationErrors=function(){this._processValidationOpAndPublish(function(b){a(b._validationErrors,function(a,c){c&amp;&amp;(delete b._validationErrors[a],b._pendingValidationResult.removed.push(c))}),b.hasValidationErrors=!G(this._validationErrors)})},k.getParentKey=function(a){var b=a.foreignKeyNames;if(0===b.length)return null;var c=this,d=b.map(function(a){return c.entity.getProperty(a)});return new jb(a.entityType,d)},k.getPropertyValue=function(a){X(a,&quot;property&quot;).isString().or().isEntityProperty().check();var b;if(&quot;string&quot;==typeof a){var c=a.trim().split(&quot;.&quot;),d=c.shift();for(b=this.entity,b=b.getProperty(d);c.length&gt;0;)d=c.shift(),b=b.getProperty(d)}else{if(!(a.parentType instanceof rb))throw new Error(&quot;The validateProperty method does not accept a &#39;property&#39; parameter whose parentType is a ComplexType; Pass a &#39;property path&#39; string as the &#39;property&#39; parameter instead &quot;);b=this.entity.getProperty(a.name)}return b},k._detach=function(){this.entityGroup=null,this.entityManager=null,this.entityState=kb.Detached,this.originalValues={},this._validationErrors={},this.hasValidationErrors=!1,this.validationErrorsChanged.clear(),this.propertyChanged.clear()},k._validateProperty=function(a,b){var c=!0;return this._processValidationOpAndPublish(function(d){b.property.validators.forEach(function(e){c=i(d,e,a,b)&amp;&amp;c})}),c},k._processValidationOpAndPublish=function(a){if(this._pendingValidationResult)a(this);else try{this._pendingValidationResult={entity:this.entity,added:[],removed:[]},a(this),(this._pendingValidationResult.added.length&gt;0||this._pendingValidationResult.removed.length&gt;0)&amp;&amp;(this.validationErrorsChanged.publish(this._pendingValidationResult),this.entityManager&amp;&amp;this.entityManager.validationErrorsChanged.publish(this._pendingValidationResult))}finally{this._pendingValidationResult=void 0}},k._addValidationError=function(a){this._validationErrors[a.key]=a,this.hasValidationErrors=!0,this._pendingValidationResult.added.push(a)},k._removeValidationError=function(a){var b=this._validationErrors[a];b&amp;&amp;(delete this._validationErrors[a],this.hasValidationErrors=!G(this._validationErrors),this._pendingValidationResult.removed.push(b))},j}(),ib=function(){var a=function(a,b,c){if(!a)throw new Error(&quot;The  ComplexAspect ctor requires an entity as its only argument.&quot;);if(a.complexAspect)return a.complexAspect;if(!(this instanceof ib))return new ib(a,b,c);this.complexObject=a,a.complexAspect=this,this.originalValues={},null!=b&amp;&amp;(this.parent=b,this.parentProperty=c);var d=a.complexType;if(!d){var e=a.prototype._$typeName;throw e?new Error(&quot;Metadata for this complexType has not yet been resolved: &quot;+e):new Error(&quot;This entity is not registered as a valid ComplexType&quot;)}var f=d.getCtor();bb.getDefaultInstance().startTracking(a,f.prototype)},b=a.prototype;return b.getEntityAspect=function(){var a=this.parent;if(!a)return new hb(null);for(var b=a.entityAspect;a&amp;&amp;!b;)a=a.complexAspect&amp;&amp;a.complexAspect.parent,b=a&amp;&amp;a.entityAspect;return b||new hb(null)},b.getPropertyPath=function(a){var b=this.parent;if(!b)return null;var c=b.complexAspect||b.entityAspect;return c.getPropertyPath(this.parentProperty.name+&quot;.&quot;+a)},a}();S.EntityAspect=hb,S.ComplexAspect=ib;var jb=function(){function a(a){return a.join(b)}var b=&quot;:::&quot;,c=function(b,c){X(b,&quot;entityType&quot;).isInstanceOf(rb).check();var d=b.getSelfAndSubtypes();d.length&gt;1&amp;&amp;(this._subtypes=d.filter(function(a){return a.isAbstract===!1})),Array.isArray(c)||(c=U(arguments,1)),this.entityType=b,b.keyProperties.forEach(function(a,b){a.dataType===lb.Guid&amp;&amp;(c[b]=c[b]&amp;&amp;c[b].toLowerCase())}),this.values=c,this._keyInGroup=a(c)};c._$typeName=&quot;EntityKey&quot;;var d=c.prototype;return d.toJSON=function(){return{entityType:this.entityType.name,values:this.values}},c.fromJSON=function(a,b){var c=b._getEntityType(a.entityType,!0);return new jb(c,a.values)},d.equals=function(a){return a instanceof jb?this.entityType===a.entityType&amp;&amp;s(this.values,a.values):!1},d.toString=function(){return this.entityType.name+&quot;-&quot;+this._keyInGroup},c.equals=function(a,b){return a instanceof jb?a.equals(b):!1},d._isEmpty=function(){return 0===this.values.join(&quot;&quot;).length},c.createKeyString=a,c}();S.EntityKey=jb;var kb=function(){var a={isUnchanged:function(){return this===b.Unchanged},isAdded:function(){return this===b.Added},isModified:function(){return this===b.Modified},isDeleted:function(){return this===b.Deleted},isDetached:function(){return this===b.Detached},isUnchangedOrModified:function(){return this===b.Unchanged||this===b.Modified},isAddedModifiedOrDeleted:function(){return this===b.Added||this===b.Modified||this===b.Deleted}},b=new $(&quot;EntityState&quot;,a);return b.Unchanged=b.addSymbol(),b.Added=b.addSymbol(),b.Modified=b.addSymbol(),b.Deleted=b.addSymbol(),b.Detached=b.addSymbol(),b.seal(),b}();S.EntityState=kb,S.makePrimitiveArray=function(){function a(a,c,d){return cb.initializeParent(a,c,d),a.arrayChanged=new _(&quot;arrayChanged&quot;,a),g(a,cb.mixin),g(a,b)}var b={};return b._getGoodAdds=function(a){return a},b._beforeChange=function(){var a=this.getEntityAspect();a.entityState.isUnchanged()&amp;&amp;a.setModified(),a.entityState.isModified()&amp;&amp;!this._origValues&amp;&amp;(this._origValues=this.slice(0))},b._processAdds=function(){},b._processRemoves=function(){},b._rejectChanges=function(){this._origValues&amp;&amp;(this.length=0,Array.prototype.push.apply(this,this._origValues))},b._acceptChanges=function(){this._origValues=null},a}(),S.makeRelationArray=function(){function a(a,b){var c=d(a,b);if(!c.length)return c;var e=a.parentEntity,f=e.entityAspect.entityManager;return f&amp;&amp;!f.isLoading&amp;&amp;c.forEach(function(b){if(b.entityAspect.entityState.isDetached()){a._inProgress=!0;try{f.attachEntity(b,kb.Added)}finally{a._inProgress=!1}}}),c}function b(a,b){var c=a.parentEntity,d=a.navigationProperty,e=a._addsInProcess,f=d.inverse,g=e.length;try{b.forEach(function(a){if(e.push(a),f)a.setProperty(f.name,c);else{var b=c.entityType.keyProperties;d.invForeignKeyNames.forEach(function(d,e){a.setProperty(d,c.getProperty(b[e].name))})}})}finally{e.splice(g,b.length)}}function c(a,b){var c=a.navigationProperty.inverse;c&amp;&amp;b.forEach(function(a){a.setProperty(c.name,null)})}function d(a,b){var c,d=a.parentEntity,e=a.navigationProperty,f=e.inverse;if(f)c=b.filter(function(b){if(a._addsInProcess.indexOf(b)&gt;=0)return!1;var c=b.getProperty(f.name);return c!==d});else{var g=e.invForeignKeyNames,h=d.entityType.keyProperties;c=b.filter(function(b){return a._addsInProcess.indexOf(b)&gt;=0?!1:g.some(function(a,c){var e=h[c].name,f=d.getProperty(e),g=b.getProperty(a);return f!==g})})}return c}function e(a,b,c){return a.parentEntity=b,a.navigationProperty=c,a.arrayChanged=new _(&quot;arrayChanged&quot;,a),a._addsInProcess=[],g(a,cb.mixin),g(a,f)}var f={};return f.load=function(a,b){var c=this.parentEntity,d=zb.fromEntityNavigation(this.parentEntity,this.navigationProperty),e=c.entityAspect.entityManager;return e.executeQuery(d,a,b)},f._getEventParent=function(){return this.parentEntity.entityAspect},f._getPendingPubs=function(){var a=this.parentEntity.entityAspect.entityManager;return a&amp;&amp;a._pendingPubs},f._getGoodAdds=function(b){return a(this,b)},f._processAdds=function(a){b(this,a)},f._processRemoves=function(a){c(this,a)},e}();var lb=function(){function a(a,b){throw a=K(a,b),new Error(a)}function b(a){switch(a){case x.String:return db.string;case x.Int64:return db.int64;case x.Int32:return db.int32;case x.Int16:return db.int16;case x.Decimal:return db.number;case x.Double:return db.number;case x.Single:return db.number;case x.DateTime:return db.date;case x.DateTimeOffset:return db.date;case x.Boolean:return db.bool;case x.Guid:return db.guid;case x.Byte:return db.byte;case x.Binary:return db.none;case x.Time:return db.duration;case x.Undefined:return db.none}}var c={},d={stringPrefix:&quot;K_&quot;,nextNumber:-1,nextNumberIncrement:-1},e=function(){return d.stringPrefix+f().toString()},f=function(){var a=d.nextNumber;return d.nextNumber+=d.nextNumberIncrement,a},g=function(){return z()},h=function(){return new Date},i=function(a){return null==a?a:a.toString()},j=function(a,b){if(&quot;string&quot;===b){var c=a.trim();if(&quot;&quot;===c)return null;var d=parseInt(c,10);return isNaN(d)?a:d}return&quot;number&quot;===b?Math.round(a):a},k=function(a,b){if(&quot;string&quot;===b){var c=a.trim();if(&quot;&quot;===c)return null;var d=parseFloat(c);return isNaN(d)?a:d}return a},l=function(a,b){var c;if(&quot;string&quot;===b){var d=a.trim();return&quot;&quot;===d?null:(c=new Date(Date.parse(d)),C(c)?c:a)}return&quot;number&quot;===b?(c=new Date(a),C(c)?c:a):a},m=function(a,b){if(&quot;string&quot;===b){var c=a.trim().toLowerCase();return&quot;false&quot;===c||&quot;&quot;===c?!1:&quot;true&quot;===c?!0:a}return a},n=function(a){return null==a?null:&quot;&#39;&quot;+a.replace(/&#39;/g,&quot;&#39;&#39;&quot;)+&quot;&#39;&quot;},o=function(a){return null==a?null:&quot;string&quot;==typeof a?parseInt(a,10):a},p=function(a){return function(b){return null==b?null:(&quot;string&quot;==typeof b&amp;&amp;(b=parseFloat(b)),b+a)}},q=function(b){if(null==b)return null;try{return&quot;datetime&#39;&quot;+b.toISOString()+&quot;&#39;&quot;}catch(c){a(&quot;&#39;%1&#39; is not a valid dateTime&quot;,b)}},r=function(b){if(null==b)return null;try{return&quot;datetimeoffset&#39;&quot;+b.toISOString()+&quot;&#39;&quot;}catch(c){a(&quot;&#39;%1&#39; is not a valid dateTime&quot;,b)}},s=function(b){return null==b?null:(F(b)||a(&quot;&#39;%1&#39; is not a valid ISO 8601 duration&quot;,b),&quot;time&#39;&quot;+b+&quot;&#39;&quot;)},t=function(b){return null==b?null:(E(b)||a(&quot;&#39;%1&#39; is not a valid guid&quot;,b),&quot;guid&#39;&quot;+b+&quot;&#39;&quot;)},u=function(a){return null==a?null:&quot;string&quot;==typeof a?&quot;true&quot;===a.trim().toLowerCase():!!a},v=function(a){return null==a?a:&quot;binary&#39;&quot;+a+&quot;&#39;&quot;},w=function(a){return a},x=new $(&quot;DataType&quot;,c);x.String=x.addSymbol({defaultValue:&quot;&quot;,parse:i,fmtOData:n,getNext:e}),x.Int64=x.addSymbol({defaultValue:0,isNumeric:!0,isInteger:!0,quoteJsonOData:!0,parse:j,fmtOData:p(&quot;L&quot;),getNext:f}),x.Int32=x.addSymbol({defaultValue:0,isNumeric:!0,isInteger:!0,parse:j,fmtOData:o,getNext:f}),x.Int16=x.addSymbol({defaultValue:0,isNumeric:!0,isInteger:!0,parse:j,fmtOData:o,getNext:f}),x.Byte=x.addSymbol({defaultValue:0,isNumeric:!0,isInteger:!0,parse:j,fmtOData:o}),x.Decimal=x.addSymbol({defaultValue:0,isNumeric:!0,quoteJsonOData:!0,parse:k,fmtOData:p(&quot;m&quot;),getNext:f}),x.Double=x.addSymbol({defaultValue:0,isNumeric:!0,parse:k,fmtOData:p(&quot;d&quot;),getNext:f}),x.Single=x.addSymbol({defaultValue:0,isNumeric:!0,parse:k,fmtOData:p(&quot;f&quot;),getNext:f}),x.DateTime=x.addSymbol({defaultValue:new Date(1900,0,1),isDate:!0,parse:l,fmtOData:q,getNext:h}),x.DateTimeOffset=x.addSymbol({defaultValue:new Date(1900,0,1),isDate:!0,parse:l,fmtOData:r,getNext:h}),x.Time=x.addSymbol({defaultValue:&quot;PT0S&quot;,fmtOData:s}),x.Boolean=x.addSymbol({defaultValue:!1,parse:m,fmtOData:u}),x.Guid=x.addSymbol({defaultValue:&quot;00000000-0000-0000-0000-000000000000&quot;,fmtOData:t,getNext:g}),x.Binary=x.addSymbol({defaultValue:null,fmtOData:v}),x.Undefined=x.addSymbol({defaultValue:void 0,fmtOData:w}),x.seal(),x.fromEdmDataType=function(a){var b=null,c=a.split(&quot;.&quot;);if(c.length&gt;1){var d=c[1];b=&quot;image&quot;===d?x.Byte:2===c.length?x.fromName(d)||x.Undefined:x.String}return b},x.fromValue=function(a){if(C(a))return x.DateTime;switch(typeof a){case&quot;string&quot;:return E(a)?x.Guid:F(a)&amp;&amp;a.length&gt;3?x.Time:x.String;case&quot;boolean&quot;:return x.Boolean;case&quot;number&quot;:return x.Int32}return x.Undefined};var y=/.\d{3}$/;return x.parseTimeFromServer=function(a){if(&quot;string&quot;==typeof a)return a;if(a&amp;&amp;&quot;Edm.Time&quot;===a.__edmType){var b=Math.floor(a.ms/1e3);return&quot;PT&quot;+b+&quot;S&quot;}return a},x.parseDateAsUTC=function(a){if(&quot;string&quot;==typeof a){var b=y.test(a);a=b?a+&quot;Z&quot;:a}return a=new Date(Date.parse(a))},x.parseDateFromServer=x.parseDateAsUTC,x.parseRawValue=function(a,b){return void 0===a?void 0:(b.isDate&amp;&amp;a?C(a)||(a=x.parseDateFromServer(a)):b===x.Binary?a&amp;&amp;void 0!==a.$value&amp;&amp;(a=a.$value):b===x.Time&amp;&amp;(a=x.parseTimeFromServer(a)),a)},x.constants=d,x.getSymbols().forEach(function(a){a.validatorCtor=b(a)}),x}();S.DataType=lb;var mb=function(){function a(a,b){return b&amp;&amp;(Z(b).whereParam(&quot;serviceName&quot;).isOptional().whereParam(&quot;adapterName&quot;).isString().isOptional().whereParam(&quot;hasServerMetadata&quot;).isBoolean().isOptional().whereParam(&quot;jsonResultsAdapter&quot;).isInstanceOf(nb).isOptional().whereParam(&quot;useJsonp&quot;).isBoolean().isOptional().applyAll(a),a.serviceName=a.serviceName&amp;&amp;mb._normalizeServiceName(a.serviceName),a.adapterInstance=a.adapterName&amp;&amp;ab.getAdapterInstance(&quot;dataService&quot;,a.adapterName)),a}var b=function(b){a(this,b)},c=b.prototype;return c._$typeName=&quot;DataService&quot;,c.using=function(b){if(!b)return this;var c=new mb(this);return a(c,b)},b.resolve=function(a){a.push({hasServerMetadata:!0,useJsonp:!1});var b=new mb(l(a,[&quot;serviceName&quot;,&quot;adapterName&quot;,&quot;hasServerMetadata&quot;,&quot;jsonResultsAdapter&quot;,&quot;useJsonp&quot;]));if(!b.serviceName)throw new Error(&quot;Unable to resolve a &#39;serviceName&#39; for this dataService&quot;);return b.adapterInstance=b.adapterInstance||ab.getAdapterInstance(&quot;dataService&quot;,b.adapterName),b.jsonResultsAdapter=b.jsonResultsAdapter||b.adapterInstance.jsonResultsAdapter,b},b._normalizeServiceName=function(a){return a=a.trim(),&quot;/&quot;!==a.substr(-1)?a+&quot;/&quot;:a},c.toJSON=function(){return j(this,{serviceName:null,adapterName:null,hasServerMetadata:null,jsonResultsAdapter:function(a){return a&amp;&amp;a.name},useJsonp:null})},b.fromJSON=function(a){return a.jsonResultsAdapter=ab._fetchObject(nb,a.jsonResultsAdapter),new mb(a)},c.makeUrl=function(a){var b=this.serviceName;return V.stringEndsWith(b,&quot;/&quot;)&amp;&amp;(b=b.substr(0,b.length-1)),a=&quot;/&quot;+a,V.stringEndsWith(b,a)||(b+=a),b},b}(),nb=function(){function a(a){return a.results}var b=function(b){if(1!==arguments.length)throw new Error(&quot;The JsonResultsAdapter ctor should be called with a single argument that is a configuration object.&quot;);Z(b).whereParam(&quot;name&quot;).isNonEmptyString().whereParam(&quot;extractResults&quot;).isFunction().isOptional().withDefault(a).whereParam(&quot;visitNode&quot;).isFunction().applyAll(this),ab._storeObject(this,c._$typeName,this.name)},c=b.prototype;return c._$typeName=&quot;JsonResultsAdapter&quot;,b}();S.DataService=mb,S.JsonResultsAdapter=nb;var ob=v(&quot;Q&quot;);ob||(ob=function(){var a=&quot;Q is undefined. Are you missing Q.js? See https://github.com/kriskowal/q&quot;;throw new Error(a)},ob.defer=ob.resolve=ob.reject=ob),S.config.setQ=function(a){ob=a};var pb=function(){function a(a){var b=[];for(var c in a){var d=a[c];c===d.name&amp;&amp;b.push(a[c])}return b}function b(a,b,c){var e=O(b.shortName,b.namespace),g=a._getEntityType(e,!0);if(g)return c?d(g,b):g;var h={shortName:b.shortName,namespace:b.namespace,isAbstract:b.isAbstract,autoGeneratedKeyType:vb.fromName(b.autoGeneratedKeyType),defaultResourceName:b.defaultResourceName,custom:b.custom};if(g=b.isComplexType?new sb(h):new rb(h),b.baseTypeName){g.baseTypeName=b.baseTypeName;var i=a._getEntityType(b.baseTypeName,!0);i?f(a,b,g,i):t(a._deferredTypes,b.baseTypeName).push({json:b,stype:g})}else f(a,b,g,null);return g}function d(a,b){return b.custom&amp;&amp;(a.custom=b.custom),e(a,b.dataProperties),e(a,b.navigationProperties),a}function e(a,b){b&amp;&amp;b.forEach(function(b){var c=b.name;if(!c){if(!b.nameOnServer)throw new Error(&quot;Unable to complete &#39;importMetadata&#39; - cannot locate a &#39;name&#39; or &#39;nameOnServer&#39; for one of the imported property nodes&quot;);c=a.metadataStore.namingConvention.serverPropertyNameToClient(b.nameOnServer,{})}if(b.custom){var d=a.getProperty(c,!0);d.custom=b.custom}})}function f(a,b,c,d){b.validators&amp;&amp;(c.validators=b.validators.map(db.fromJSON)),d&amp;&amp;(c.baseEntityType=d,d.dataProperties.forEach(function(a){var b=new tb(a);b.isInherited=!0,c.addProperty(b)}),d.navigationProperties.forEach(function(a){var b=new ub(a);b.isInherited=!0,c.addProperty(b)})),b.dataProperties.forEach(function(a){c.addProperty(tb.fromJSON(a))});var e=!b.isComplexType;e&amp;&amp;b.navigationProperties&amp;&amp;b.navigationProperties.forEach(function(a){c.addProperty(ub.fromJSON(a))}),a.addEntityType(c);var g=a._deferredTypes,h=g[c.name];h&amp;&amp;(h.forEach(function(b){f(a,b.json,b.stype,c)}),delete g[c.name])}function h(a,b,c){if(N(b))return b;var d=a._shortNameMap[b];if(!d&amp;&amp;c)throw new Error(&quot;Unable to locate &#39;entityTypeName&#39; of: &quot;+b);return d}var i=0,j=function(a){a=a||{},Z(a).whereParam(&quot;namingConvention&quot;).isOptional().isInstanceOf(yb).withDefault(yb.defaultInstance).whereParam(&quot;localQueryComparisonOptions&quot;).isOptional().isInstanceOf(xb).withDefault(xb.defaultInstance).whereParam(&quot;serializerFn&quot;).isOptional().isFunction().applyAll(this),this.dataServices=[],this._resourceEntityTypeMap={},this._structuralTypeMap={},this._shortNameMap={},this._ctorRegistry={},this._incompleteTypeMap={},this._incompleteComplexTypeMap={},this._id=i++},k=j.prototype;return k._$typeName=&quot;MetadataStore&quot;,j.ANONTYPE_PREFIX=&quot;_IB_&quot;,k.setProperties=function(a){Z(a).whereParam(&quot;name&quot;).isString().isOptional().whereParam(&quot;serializerFn&quot;).isFunction().isOptional().applyAll(this)},k.addDataService=function(a,b){X(a,&quot;dataService&quot;).isInstanceOf(mb).check(),X(b,&quot;shouldOverwrite&quot;).isBoolean().isOptional().check();var c=this._getDataServiceIndex(a.serviceName);if(c&gt;=0){if(!b)throw new Error(&quot;A dataService with this name &#39;&quot;+a.serviceName+&quot;&#39; already exists in this MetadataStore&quot;);this.dataServices[c]=a}else this.dataServices.push(a)},k._getDataServiceIndex=function(a){return p(this.dataServices,function(b){return b.serviceName===a})},k.addEntityType=function(a){if(a instanceof rb||a instanceof sb||(a=a.isComplexType?new sb(a):new rb(a)),!a.isComplexType&amp;&amp;0===a.keyProperties.length&amp;&amp;!a.isAbstract)throw new Error(&quot;Unable to add &quot;+a.name+&quot; to this MetadataStore.  An EntityType must have at least one property designated as a key property - See the &#39;DataProperty.isPartOfKey&#39; property.&quot;);if(a.metadataStore=this,!a.isAnonymous){if(this._structuralTypeMap[a.name])throw new Error(&quot;Type &quot;+a.name+&quot; already exists in this MetadataStore.&quot;);this._structuralTypeMap[a.name]=a,this._shortNameMap[a.shortName]=a.name}if(a.getProperties().forEach(function(b){a._updateNames(b),b.isUnmapped||a._mappedPropertiesCount++}),a._updateCps(),!a.isComplexType){a._updateNps();var b=a.defaultResourceName||a.baseEntityType&amp;&amp;a.baseEntityType.defaultResourceName;b&amp;&amp;!this.getEntityTypeNameForResourceName(b)&amp;&amp;this.setEntityTypeForResourceName(b,a.name),a.defaultResourceName=b,a.getEntityCtor()}a.baseEntityType&amp;&amp;a.baseEntityType.subtypes.push(a)},k.exportMetadata=function(){var a=JSON.stringify({metadataVersion:S.metadataVersion,name:this.name,namingConvention:this.namingConvention.name,localQueryComparisonOptions:this.localQueryComparisonOptions.name,dataServices:this.dataServices,structuralTypes:c(this._structuralTypeMap),resourceEntityTypeMap:this._resourceEntityTypeMap},null,ab.stringifyPad);return a},k.importMetadata=function(a,c){X(c,&quot;allowMerge&quot;).isOptional().isBoolean().check(),this._deferredTypes={};var d=&quot;string&quot;==typeof a?JSON.parse(a):a;if(d.schema)return qb.parse(this,d.schema,d.altMetadata);if(d.metadataVersion&amp;&amp;d.metadataVersion!==S.metadataVersion){var e=K(&quot;Cannot import metadata with a different &#39;metadataVersion&#39; (%1) than the current &#39;breeze.metadataVersion&#39; (%2) &quot;,d.metadataVersion,S.metadataVersion);throw new Error(e)}var f=d.namingConvention,h=d.localQueryComparisonOptions;if(this.isEmpty())this.namingConvention=ab._fetchObject(yb,f)||this.namingConvention,this.localQueryComparisonOptions=ab._fetchObject(xb,h)||this.localQueryComparisonOptions;else{if(f&amp;&amp;this.namingConvention.name!==f)throw new Error(&quot;Cannot import metadata with a different &#39;namingConvention&#39; from the current MetadataStore&quot;);if(h&amp;&amp;this.localQueryComparisonOptions.name!==h)throw new Error(&quot;Cannot import metadata with different &#39;localQueryComparisonOptions&#39; from the current MetadataStore&quot;)}var i=this;d.dataServices&amp;&amp;d.dataServices.forEach(function(a){a=mb.fromJSON(a),i.addDataService(a,!0)});this._structuralTypeMap;return d.structuralTypes&amp;&amp;d.structuralTypes.forEach(function(a){b(i,a,c)}),g(this._resourceEntityTypeMap,d.resourceEntityTypeMap),g(this._incompleteTypeMap,d.incompleteTypeMap),this},j.importMetadata=function(a){var b=new pb;return b.importMetadata(a),b},k.hasMetadataFor=function(a){return!!this.getDataService(a)},k.getDataService=function(a){return X(a,&quot;serviceName&quot;).isString().check(),a=mb._normalizeServiceName(a),o(this.dataServices,function(b){return b.serviceName===a})},k.fetchMetadata=function(a,b,c){if(X(a,&quot;dataService&quot;).isString().or().isInstanceOf(mb).check(),X(b,&quot;callback&quot;).isFunction().isOptional().check(),X(c,&quot;errorCallback&quot;).isFunction().isOptional().check(),&quot;string&quot;==typeof a&amp;&amp;(a=this.getDataService(a)||new mb({serviceName:a})),a=mb.resolve([a]),this.hasMetadataFor(a.serviceName))throw new Error(&quot;Metadata for a specific serviceName may only be fetched once per MetadataStore. ServiceName: &quot;+a.serviceName);return a.adapterInstance.fetchMetadata(this,a).then(function(a){return b&amp;&amp;b(a),ob.resolve(a)},function(a){return c&amp;&amp;c(a),ob.reject(a)})},k.trackUnmappedType=function(a,b){X(a,&quot;entityCtor&quot;).isFunction().check(),X(b,&quot;interceptor&quot;).isFunction().isOptional().check();var c=new rb(this);c._setCtor(a,b)},k.registerEntityTypeCtor=function(a,b,c,d){X(a,&quot;structuralTypeName&quot;).isString().check(),X(b,&quot;aCtor&quot;).isFunction().isOptional().check(),X(c,&quot;initFn&quot;).isOptional().isFunction().or().isString().check(),X(d,&quot;noTrackingFn&quot;).isOptional().isFunction().check();var e=h(this,a,!1),f=e||a;if(this._ctorRegistry[f]={ctor:b,initFn:c,noTrackingFn:d},e){var g=this._structuralTypeMap[e];g&amp;&amp;g.getCtor(!0)}},k.toQueryString=function(a){if(!a)throw new Error(&quot;query cannot be empty&quot;);if(&quot;string&quot;==typeof a)return a;if(a instanceof zb)return a._toUri(this);throw new Error(&quot;unable to recognize query parameter as either a string or an EntityQuery&quot;)},k.isEmpty=function(){return G(this._structuralTypeMap)},k.getEntityType=function(a,b){return X(a,&quot;structuralTypeName&quot;).isString().check(),X(b,&quot;okIfNotFound&quot;).isBoolean().isOptional().check(!1),this._getEntityType(a,b)},k._getEntityType=function(a,b){var c=h(this,a,!1),d=this._structuralTypeMap[c];if(!d){if(b)return null;var e=K(&quot;Unable to locate a &#39;Type&#39; by the name: &#39;%1&#39;. Be sure to execute a query or call fetchMetadata first.&quot;,a);throw new Error(e)}if(d.length){var f=d.join(&quot;,&quot;);throw new Error(&quot;There are multiple types with this &#39;shortName&#39;: &quot;+f)}return d},k.getEntityTypes=function(){return a(this._structuralTypeMap)},k.getIncompleteNavigationProperties=function(){return c(this._incompleteTypeMap,function(a,b){return b})},k.getEntityTypeNameForResourceName=function(a){return X(a,&quot;resourceName&quot;).isString().check(),this._resourceEntityTypeMap[a]},k.setEntityTypeForResourceName=function(a,b){X(a,&quot;resourceName&quot;).isString().check(),X(b,&quot;entityTypeOrName&quot;).isInstanceOf(rb).or().isString().check();var c;c=b instanceof rb?b.name:h(this,b,!0),this._resourceEntityTypeMap[a]=c;var d=this._getEntityType(c,!0);d&amp;&amp;!d.defaultResourceName&amp;&amp;(d.defaultResourceName=a)},k._checkEntityType=function(a){if(!a.entityType){var b=a.prototype._$typeName;if(!b)throw new Error(&quot;This entity has not been registered. See the MetadataStore.registerEntityTypeCtor method&quot;);var c=this._getEntityType(b);c&amp;&amp;(a.entityType=c)}},j}(),qb=function(){function a(a,c,e){a._entityTypeResourceMap={},m(c).forEach(function(c){if(c.cSpaceOSpaceMapping){var e=JSON.parse(c.cSpaceOSpaceMapping),f={};e.forEach(function(a){f[a[0]]=a[1]}),c.cSpaceOSpaceMapping=f}c.entityContainer&amp;&amp;m(c.entityContainer).forEach(function(b){m(b.entitySet).forEach(function(b){var d=p(b.entityType,c).typeName;a.setEntityTypeForResourceName(b.name,d),a._entityTypeResourceMap[d]=b.name})}),c.complexType&amp;&amp;m(c.complexType).forEach(function(b){d(b,c,a)}),c.entityType&amp;&amp;m(c.entityType).forEach(function(d){b(d,c,a)})});var f=a.getIncompleteNavigationProperties();if(f.length&gt;0)throw new Error(&quot;Bad nav properties&quot;);return e&amp;&amp;a.importMetadata(e,!0),a}function b(a,b,d){var e=a.name,f=q(e,b),g=new rb({shortName:e,namespace:f,isAbstract:a.abstract&amp;&amp;&quot;true&quot;===a.abstract});if(a.baseType){var h=p(a.baseType,b).typeName;g.baseTypeName=h;var i=d._getEntityType(h,!0);if(i)c(g,a,b,d,i);else{var j=d._deferredTypes[h];j||(j=[],d._deferredTypes[h]=j),j.push({entityType:g,csdlEntityType:a})}}else c(g,a,b,d,null);return g}function c(a,b,d,g,h){var j=[];h&amp;&amp;(a.baseEntityType=h,a.autoGeneratedKeyType=h.autoGeneratedKeyType,j=h.keyProperties.map(e(&quot;name&quot;)),h.dataProperties.forEach(function(b){var c=new tb(b);c.isInherited=!0,a.addProperty(c)}),h.navigationProperties.forEach(function(b){var c=new ub(b);c.isInherited=!0,a.addProperty(c)}));var k=b.key?m(b.key.propertyRef).map(e(&quot;name&quot;)):[];k=j.concat(k),m(b.property).forEach(function(b){f(a,b,d,k)}),m(b.navigationProperty).forEach(function(b){i(a,b,d)</div><div class='line' id='LC3'>}),g.addEntityType(a),a.defaultResourceName=g._entityTypeResourceMap[a.name];var l=g._deferredTypes,n=l[a.name];n&amp;&amp;(n.forEach(function(b){c(b.entityType,b.csdlEntityType,d,g,a)}),delete l[a.name])}function d(a,b,c){var d=a.name,e=q(d,b),g=new sb({shortName:d,namespace:e});return m(a.property).forEach(function(a){f(g,a,b)}),c.addEntityType(g),g}function f(a,b,c,d){var e,f=b.type.split(&quot;.&quot;);return 2===f.length?e=g(a,b,d):j(b,c)?(e=g(a,b,d),e&amp;&amp;(e.enumType=b.type)):e=h(a,b,c),e&amp;&amp;(a.addProperty(e),k(e)),e}function g(a,b,c){var d=lb.fromEdmDataType(b.type);if(null==d)return a.warnings.push(&quot;Unable to recognize DataType for property: &quot;+b.name+&quot; DateType: &quot;+b.type),null;var e=&quot;true&quot;===b.nullable||null==b.nullable,f=null!=c&amp;&amp;c.indexOf(b.name)&gt;=0;f&amp;&amp;a.autoGeneratedKeyType===vb.None&amp;&amp;l(b)&amp;&amp;(a.autoGeneratedKeyType=vb.Identity);var g=b.maxLength;g=null==g||&quot;Max&quot;===g?null:parseInt(g,10);var h=new tb({nameOnServer:b.name,dataType:d,isNullable:e,isPartOfKey:f,maxLength:g,defaultValue:b.defaultValue,concurrencyMode:b.concurrencyMode});return d===lb.Undefined&amp;&amp;(h.rawTypeName=b.type),h}function h(a,b,c){var d=p(b.type,c).typeName,e=new tb({nameOnServer:b.name,complexTypeName:d,isNullable:!1});return e}function i(a,b,c){var d=n(b,c),f=o(d.end,function(a){return a.role===b.toRole}),g=&quot;*&quot;!==f.multiplicity,h=p(f.type,c).typeName,i=d.referentialConstraint;if(i){var j={nameOnServer:b.name,entityTypeName:h,isScalar:g,associationName:d.name},k=i.principal,l=i.dependent,q=m(l.propertyRef),r=q.map(e(&quot;name&quot;));b.fromRole===k.role?j.invForeignKeyNamesOnServer=r:j.foreignKeyNamesOnServer=r;var s=new ub(j);return a.addProperty(s),s}}function j(a,b){if(!b.enumType)return!1;var c=m(b.enumType),d=a.type.split(&quot;.&quot;),e=d[d.length-1];return c.some(function(a){return a.name===e})}function k(a){var b;if(a.isNullable||a.validators.push(db.required()),!a.isComplexProperty){if(a.dataType===lb.String)if(a.maxLength){var c={maxLength:a.maxLength};b=db.maxLength(c)}else b=db.string();else b=a.dataType.validatorCtor();a.validators.push(b)}}function l(a){var b=o(Object.keys(a),function(a){return a.indexOf(&quot;StoreGeneratedPattern&quot;)&gt;=0});if(b)return&quot;Identity&quot;===a[b];var c=a.extensions;if(!c)return!1;var d=o(c,function(a){return&quot;StoreGeneratedPattern&quot;===a.name&amp;&amp;&quot;Identity&quot;===a.value});return!!d}function n(a,b){var c=p(a.relationship,b).shortTypeName,d=b.association;if(!d)return null;Array.isArray(d)||(d=[d]);var e=o(d,function(a){return a.name===c});return e}function p(a,b){if(!a)return null;if(I(a,pb.ANONTYPE_PREFIX))return{shortTypeName:a,namespace:&quot;&quot;,typeName:a,isAnonymous:!0};var c=a.split(&quot;,&quot;)[0],d=c.split(&quot;.&quot;);if(d.length&gt;1){var e,f=d[d.length-1];if(b)e=q(f,b);else{var g=d.slice(0,d.length-1);e=g.join(&quot;.&quot;)}return{shortTypeName:f,namespace:e,typeName:O(f,e)}}return{shortTypeName:a,namespace:&quot;&quot;,typeName:a}}function q(a,b){var c,d=b.cSpaceOSpaceMapping;if(d){var e=d[b.namespace+&quot;.&quot;+a];c=e&amp;&amp;e.substr(0,e.length-(a.length+1))}return c||b.namespace}var r=y(function(a){return a&amp;&amp;p(a).typeName});return{parse:a,normalizeTypeName:r}}(),rb=function(){function a(a,b){return a.entityAspect||a.complexAspect?a.getProperty(b.name):a[b.name]}function b(){return function(){}}function c(a){return a.filter(function(a){return!a.isInherited})}function f(a,b,c){var d=c+&quot;OnServer&quot;,e=b[c];if(e&amp;&amp;e.length){if(b.isUnmapped)return;var f=m(e).map(function(c){var d=a.clientPropertyNameToServer(c,b),e=a.serverPropertyNameToClient(d,b);if(c!==e)throw new Error(&quot;NamingConvention for this client property name does not roundtrip properly:&quot;+c+&quot;--&gt;&quot;+e);return d});b[d]=Array.isArray(e)?f:f[0]}else{var g=b[d];if(!g||0===g.length)return;var h=m(g).map(function(c){var d=a.serverPropertyNameToClient(c,b),e=a.clientPropertyNameToServer(d,b);if(c!==e)throw new Error(&quot;NamingConvention for this server property name does not roundtrip properly:&quot;+c+&quot;--&gt;&quot;+e);return d});b[c]=Array.isArray(g)?h:h[0]}}function g(a,b){var c=b._getEntityType(a.complexTypeName,!0);if(!c)return!1;if(!(c instanceof sb))throw new Error(&quot;Unable to resolve ComplexType with the name: &quot;+a.complexTypeName+&quot; for the property: &quot;+property.name);return a.dataType=c,a.defaultValue=null,!0}function h(a,b){var c=b._getEntityType(a.entityTypeName,!0);if(!c)return!1;a.entityType=c;var d=o(c.navigationProperties,function(b){return b.associationName===a.associationName&amp;&amp;(b.name!==a.name||b.entityTypeName!==a.entityTypeName)});return a.inverse=d,d||a.invForeignKeyNames.forEach(function(b){var d=c.getDataProperty(b),e=a.parentType;d.inverseNavigationProperty=o(e.navigationProperties,function(a){return a.invForeignKeyNames&amp;&amp;a.invForeignKeyNames.indexOf(d.name)&gt;=0&amp;&amp;a.entityType===d.parentType}),i(c.foreignKeyProperties,d)}),k(a),!0}function i(a,b){var c=a.indexOf(b);-1===c&amp;&amp;a.push(b)}function k(a){var b=a.foreignKeyNames;if(0!==b.length){var c=a.parentType,d=b.map(function(a){return c.getDataProperty(a)}),e=c.foreignKeyProperties;d.forEach(function(b){i(e,b),b.relatedNavigationProperty=a,a.relatedDataProperties?a.relatedDataProperties.push(b):a.relatedDataProperties=[b]})}}function l(a,b){var c=a.getPropertyNames(),d=bb.getDefaultInstance().getTrackablePropertyNames(b);d.forEach(function(b){if(-1===c.indexOf(b)){var d=new tb({name:b,dataType:lb.Undefined,isNullable:!0,isUnmapped:!0});a.subtypes?a.getSelfAndSubtypes().forEach(function(a){a.addProperty(new tb(d))}):a.addProperty(d)}})}var n=0,p=function(a){if(arguments.length&gt;1)throw new Error(&quot;The EntityType ctor has a single argument that is either a &#39;MetadataStore&#39; or a configuration object.&quot;);&quot;MetadataStore&quot;===a._$typeName?(this.metadataStore=a,this.shortName=&quot;Anon_&quot;+ ++n,this.namespace=&quot;&quot;,this.isAnonymous=!0):Z(a).whereParam(&quot;shortName&quot;).isNonEmptyString().whereParam(&quot;namespace&quot;).isString().isOptional().withDefault(&quot;&quot;).whereParam(&quot;baseTypeName&quot;).isString().isOptional().whereParam(&quot;isAbstract&quot;).isBoolean().isOptional().withDefault(!1).whereParam(&quot;autoGeneratedKeyType&quot;).isEnumOf(vb).isOptional().withDefault(vb.None).whereParam(&quot;defaultResourceName&quot;).isNonEmptyString().isOptional().withDefault(null).whereParam(&quot;dataProperties&quot;).isOptional().whereParam(&quot;navigationProperties&quot;).isOptional().whereParam(&quot;serializerFn&quot;).isOptional().isFunction().whereParam(&quot;custom&quot;).isOptional().applyAll(this),this.name=O(this.shortName,this.namespace),this.dataProperties=[],this.navigationProperties=[],this.complexProperties=[],this.keyProperties=[],this.foreignKeyProperties=[],this.concurrencyProperties=[],this.unmappedProperties=[],this.validators=[],this.warnings=[],this._mappedPropertiesCount=0,this.subtypes=[],P(this,a.dataProperties,tb),P(this,a.navigationProperties,ub)},q=p.prototype,r=lb.parseRawValue;return q._$typeName=&quot;EntityType&quot;,q.setProperties=function(a){Z(a).whereParam(&quot;autoGeneratedKeyType&quot;).isEnumOf(vb).isOptional().whereParam(&quot;defaultResourceName&quot;).isString().isOptional().whereParam(&quot;serializerFn&quot;).isFunction().isOptional().whereParam(&quot;custom&quot;).isOptional().applyAll(this),a.defaultResourceName&amp;&amp;(this.defaultResourceName=a.defaultResourceName)},q.isSubtypeOf=function(a){X(a,&quot;entityType&quot;).isInstanceOf(rb).check();var b=this;do{if(b===a)return!0;b=b.baseEntityType}while(b);return!1},q.getSelfAndSubtypes=function(){var a=[this];return this.subtypes.forEach(function(b){var c=b.getSelfAndSubtypes();a.push.apply(a,c)}),a},q.addProperty=function(a){if(X(a,&quot;dataProperty&quot;).isInstanceOf(tb).or().isInstanceOf(ub).check(),this.metadataStore&amp;&amp;!a.isUnmapped)throw new Error(&quot;The &#39;&quot;+this.name+&quot;&#39; EntityType has already been added to a MetadataStore and therefore no additional properties may be added to it.&quot;);if(a.parentType){if(a.parentType!==this)throw new Error(&quot;This dataProperty has already been added to &quot;+a.parentType.name);return this}return a.parentType=this,a.isDataProperty?this._addDataProperty(a):this._addNavigationProperty(a),this},q.createEntity=function(b){if(b&amp;&amp;b._$eref&amp;&amp;!b._$eref.entityAspect.entityManager)return b._$eref;var c=this._createInstanceCore();return b&amp;&amp;(this.keyProperties.every(function(a){return null!=b[a.name]})&amp;&amp;(b._$eref=c),this._updateTargetFromRaw(c,b,a),this.navigationProperties.forEach(function(a){var d,e=b[a.name];if(void 0!=e){var f=a.entityType;if(a.isScalar)d=e.entityAspect?e:f.createEntity(e),c.setProperty(a.name,d);else{var g=c.getProperty(a.name);e.forEach(function(a){d=a.entityAspect?a:f.createEntity(a),g.push(d)})}}})),this._initializeInstance(c),c},q._createInstanceCore=function(){var a=this.getEntityCtor(),b=new a;return new hb(b),b},q._initializeInstance=function(a){this.baseEntityType&amp;&amp;this.baseEntityType._initializeInstance(a);var b=this.initFn;b&amp;&amp;(&quot;string&quot;==typeof b&amp;&amp;(b=a[b]),b(a)),this.complexProperties&amp;&amp;this.complexProperties.forEach(function(b){var c=a.getProperty(b.name);Array.isArray(c)?c.forEach(function(a){b.dataType._initializeInstance(a)}):b.dataType._initializeInstance(c)}),a.entityAspect&amp;&amp;(a.entityAspect._initialized=!0)},q.getCtor=q.getEntityCtor=function(a){if(this._ctor&amp;&amp;!a)return this._ctor;var c=this.metadataStore._ctorRegistry,d=c[this.name]||c[this.shortName]||{},e=d.ctor||this._ctor;if(e&amp;&amp;e.prototype.entityType&amp;&amp;e.prototype.entityType.metadataStore!==this.metadataStore)throw new Error(&quot;Cannot register the same constructor for &quot;+this.name+&quot; in different metadata stores.  Please define a separate constructor for each metadata store.&quot;);if(d.ctor&amp;&amp;a&amp;&amp;(this._extra=void 0),!e){var f=bb.getDefaultInstance().createCtor;e=f?f(this):b()}return this.initFn=d.initFn,this.noTrackingFn=d.noTrackingFn,e.prototype._$typeName=this.name,this._setCtor(e),e},q._setCtor=function(a,b){var c=a.prototype;this._extra=this._extra||{};var d=new a;l(this,d),&quot;EntityType&quot;===this._$typeName?c.entityType=this:c.complexType=this,c._$interceptor=b||M,bb.getDefaultInstance().initializeEntityPrototype(c),this._ctor=a},q.addValidator=function(a,b){X(a,&quot;validator&quot;).isInstanceOf(db).check(),X(b,&quot;property&quot;).isOptional().isString().or().isEntityProperty().check(),b?(&quot;string&quot;==typeof b&amp;&amp;(b=this.getProperty(b,!0)),b.validators.push(a)):this.validators.push(a)},q.getProperties=function(){return this.dataProperties.concat(this.navigationProperties)},q.getPropertyNames=function(){return this.getProperties().map(e(&quot;name&quot;))},q.getDataProperty=function(a,b){var c=b?&quot;nameOnServer&quot;:&quot;name&quot;;return o(this.dataProperties,d(c,a))},q.getNavigationProperty=function(a,b){var c=b?&quot;nameOnServer&quot;:&quot;name&quot;;return o(this.navigationProperties,d(c,a))},q.getProperty=function(a,b){b=b||!1;var c=Array.isArray(a)?a:a.trim().split(&quot;.&quot;),e=c[0],f=o(this.getProperties(),d(&quot;name&quot;,e));if(1===c.length){if(f)return f;if(b)throw new Error(&quot;unable to locate property: &quot;+e+&quot; on entityType: &quot;+this.name);return null}if(f){c.shift();var g=f.isNavigationProperty?f.entityType:f.dataType;if(g)return g.getProperty(c,b);throw new Error(&quot;should not get here - unknown property type for: &quot;+f.name)}if(b)throw new Error(&quot;unable to locate property: &quot;+e+&quot; on type: &quot;+this.name);return null},q.getEntityKeyFromRawEntity=function(a,b){var c=this.keyProperties.map(function(c){var d=b(a,c);return r(d,c.dataType)});return new jb(this,c)},q._updateTargetFromRaw=function(a,b,c){this.dataProperties.forEach(function(d){var e=c(b,d);if(void 0!==e){var f,g=d.dataType;if(d.isComplexProperty){if(null===e)return;f=a.getProperty(d.name),d.isScalar?g._updateTargetFromRaw(f,e,c):(f.length=0,Array.isArray(e)&amp;&amp;e.forEach(function(b){var e=g._createInstanceCore(a,d);g._updateTargetFromRaw(e,b,c),g._initializeInstance(e),f.push(e)}))}else{var h;d.isScalar?(h=r(e,g),a.setProperty(d.name,h)):(f=a.getProperty(d.name),f.length=0,Array.isArray(e)&amp;&amp;e.forEach(function(a){h=r(a,g),f.push(h)}))}}});var d=b.entityAspect||b.complexAspect;d&amp;&amp;d.originalValuesMap&amp;&amp;(targetAspect=a.entityAspect||a.complexAspect,targetAspect.originalValues=d.originalValuesMap)},q.toString=function(){return this.name},q.toJSON=function(){return j(this,{shortName:null,namespace:null,baseTypeName:null,isAbstract:!1,autoGeneratedKeyType:null,defaultResourceName:null,dataProperties:c,navigationProperties:c,validators:null,custom:null})},q._clientPropertyPathToServer=function(a){var b=this.metadataStore.namingConvention.clientPropertyNameToServer,c=this,d=a.split(&quot;.&quot;).map(function(a){var d=c.getProperty(a);return b(a,d)}).join(&quot;/&quot;);return d},q._updateNames=function(a){var b=this.metadataStore.namingConvention;f(b,a,&quot;name&quot;),a.isNavigationProperty&amp;&amp;(f(b,a,&quot;foreignKeyNames&quot;),f(b,a,&quot;invForeignKeyNames&quot;))},q._checkNavProperty=function(a){if(a.isNavigationProperty){if(a.parentType!==this)throw new Error(K(&quot;The navigationProperty &#39;%1&#39; is not a property of entity type &#39;%2&#39;&quot;,a.name,this.name));return a}if(&quot;string&quot;==typeof a){var b=this.getProperty(a);if(b&amp;&amp;b.isNavigationProperty)return b}throw new Error(&quot;The &#39;navigationProperty&#39; parameter must either be a NavigationProperty or the name of a NavigationProperty&quot;)},q._addDataProperty=function(a){this.dataProperties.push(a),a.isPartOfKey&amp;&amp;this.keyProperties.push(a),a.isComplexProperty&amp;&amp;this.complexProperties.push(a),a.concurrencyMode&amp;&amp;&quot;None&quot;!==a.concurrencyMode&amp;&amp;this.concurrencyProperties.push(a),a.isUnmapped&amp;&amp;this.unmappedProperties.push(a)},q._addNavigationProperty=function(a){this.navigationProperties.push(a),N(a.entityTypeName)||(a.entityTypeName=O(a.entityTypeName,this.namespace))},q._updateCps=function(){var a=this.metadataStore,b=a._incompleteComplexTypeMap;this.complexProperties.forEach(function(c){c.complexType||g(c,a)||t(b,c.complexTypeName).push(c)}),this.isComplexType&amp;&amp;((b[this.name]||[]).forEach(function(b){g(b,a)}),delete b[this.name])},q._updateNps=function(){var a=this.metadataStore,b=a._incompleteTypeMap;this.navigationProperties.forEach(function(c){c.entityType||h(c,a)||t(b,c.entityTypeName).push(c)}),(b[this.name]||[]).forEach(function(b){h(b,a)}),delete b[this.name]},p}(),sb=function(){var a=function(a){if(arguments.length&gt;1)throw new Error(&quot;The ComplexType ctor has a single argument that is a configuration object.&quot;);Z(a).whereParam(&quot;shortName&quot;).isNonEmptyString().whereParam(&quot;namespace&quot;).isString().isOptional().withDefault(&quot;&quot;).whereParam(&quot;dataProperties&quot;).isOptional().whereParam(&quot;isComplexType&quot;).isOptional().isBoolean().whereParam(&quot;custom&quot;).isOptional().isBoolean().applyAll(this),this.name=O(this.shortName,this.namespace),this.isComplexType=!0,this.dataProperties=[],this.complexProperties=[],this.validators=[],this.concurrencyProperties=[],this.unmappedProperties=[],this.navigationProperties=[],this.keyProperties=[],P(this,a.dataProperties,tb)},b=a.prototype;return b.setProperties=function(a){Z(a).whereParam(&quot;custom&quot;).isOptional().applyAll(this)},b._createInstanceCore=function(a,b){var c=this.getCtor(),d=new c;return new ib(d,a,b),d},b.addProperty=function(a){if(X(a,&quot;dataProperty&quot;).isInstanceOf(tb).check(),this.metadataStore&amp;&amp;!a.isUnmapped)throw new Error(&quot;The &#39;&quot;+this.name+&quot;&#39; ComplexType has already been added to a MetadataStore and therefore no additional properties may be added to it.&quot;);if(a.parentType){if(a.parentType!==this)throw new Error(&quot;This dataProperty has already been added to &quot;+property.parentType.name);return this}return this._addDataProperty(a),this},b.getProperties=function(){return this.dataProperties},b=g(b,rb.prototype,[&quot;addValidator&quot;,&quot;getProperty&quot;,&quot;getPropertyNames&quot;,&quot;_addDataProperty&quot;,&quot;_updateNames&quot;,&quot;_updateCps&quot;,&quot;_initializeInstance&quot;,&quot;_updateTargetFromRaw&quot;,&quot;_clientPropertyPathToServer&quot;,&quot;_setCtor&quot;]),b.createInstance=rb.prototype.createEntity,b.getCtor=rb.prototype.getEntityCtor,b.toJSON=function(){return j(this,{shortName:null,namespace:null,isComplexType:null,dataProperties:null,validators:null,custom:null})},b._$typeName=&quot;ComplexType&quot;,a}(),tb=function(){var a=function(a){Z(a).whereParam(&quot;name&quot;).isString().isOptional().whereParam(&quot;nameOnServer&quot;).isString().isOptional().whereParam(&quot;dataType&quot;).isEnumOf(lb).isOptional().or().isString().or().isInstanceOf(sb).whereParam(&quot;complexTypeName&quot;).isOptional().whereParam(&quot;isNullable&quot;).isBoolean().isOptional().withDefault(!0).whereParam(&quot;isScalar&quot;).isOptional().withDefault(!0).whereParam(&quot;defaultValue&quot;).isOptional().whereParam(&quot;isPartOfKey&quot;).isBoolean().isOptional().whereParam(&quot;isUnmapped&quot;).isBoolean().isOptional().whereParam(&quot;concurrencyMode&quot;).isString().isOptional().whereParam(&quot;maxLength&quot;).isNumber().isOptional().whereParam(&quot;validators&quot;).isInstanceOf(db).isArray().isOptional().withDefault([]).whereParam(&quot;enumType&quot;).isOptional().whereParam(&quot;rawTypeName&quot;).isOptional().whereParam(&quot;custom&quot;).isOptional().applyAll(this);var b=!(!this.name&amp;&amp;!this.nameOnServer);if(!b)throw new Error(&quot;A DataProperty must be instantiated with either a &#39;name&#39; or a &#39;nameOnServer&#39; property&quot;);if(this.complexTypeName)this.isComplexProperty=!0,this.dataType=null;else if(&quot;string&quot;==typeof this.dataType){var c=lb.fromName(this.dataType);if(!c)throw new Error(&quot;Unable to find a DataType enumeration by the name of: &quot;+this.dataType);this.dataType=c}else this.dataType||(this.dataType=lb.String);if(null==this.defaultValue)if(this.isNullable)this.defaultValue=null;else if(this.isComplexProperty);else if(this.dataType===lb.Binary)this.defaultValue=&quot;AAAAAAAAJ3U=&quot;;else if(this.defaultValue=this.dataType.defaultValue,null==this.defaultValue)throw new Error(&quot;A nonnullable DataProperty cannot have a null defaultValue. Name: &quot;+this.name);this.isComplexProperty&amp;&amp;(this.isScalar=null==this.isScalar||this.isScalar===!0)},b=a.prototype;return b._$typeName=&quot;DataProperty&quot;,a.getRawValueFromServer=function(a,b){if(b.isUnmapped)return a[b.nameOnServer||b.name];var c=a[b.nameOnServer];return void 0!==c?c:b.defaultValue},a.getRawValueFromClient=function(a,b){var c=a[b.name];return void 0!==c?c:b.defaultValue},b.isDataProperty=!0,b.isNavigationProperty=!1,b.setProperties=function(a){Z(a).whereParam(&quot;custom&quot;).isOptional().applyAll(this)},b.toJSON=function(){return j(this,{name:null,dataType:function(a){return a&amp;&amp;a.parentEnum?a.name:void 0},complexTypeName:null,isNullable:!0,defaultValue:null,isPartOfKey:!1,isUnmapped:!1,concurrencyMode:null,maxLength:null,validators:null,enumType:null,rawTypeName:null,isScalar:!0,custom:null})},a.fromJSON=function(a){return a.dataType=lb.fromName(a.dataType),a.defaultValue&amp;&amp;a.dataType&amp;&amp;a.dataType.isDate&amp;&amp;(a.defaultValue=new Date(Date.parse(a.defaultValue))),a.validators&amp;&amp;(a.validators=a.validators.map(db.fromJSON)),new tb(a)},a}(),ub=function(){var a=function(a){Z(a).whereParam(&quot;name&quot;).isString().isOptional().whereParam(&quot;nameOnServer&quot;).isString().isOptional().whereParam(&quot;entityTypeName&quot;).isString().whereParam(&quot;isScalar&quot;).isBoolean().isOptional().withDefault(!0).whereParam(&quot;associationName&quot;).isString().isOptional().whereParam(&quot;foreignKeyNames&quot;).isArray().isString().isOptional().withDefault([]).whereParam(&quot;foreignKeyNamesOnServer&quot;).isArray().isString().isOptional().withDefault([]).whereParam(&quot;invForeignKeyNames&quot;).isArray().isString().isOptional().withDefault([]).whereParam(&quot;invForeignKeyNamesOnServer&quot;).isArray().isString().isOptional().withDefault([]).whereParam(&quot;validators&quot;).isInstanceOf(db).isArray().isOptional().withDefault([]).whereParam(&quot;custom&quot;).isOptional().applyAll(this);var b=!(!this.name&amp;&amp;!this.nameOnServer);if(!b)throw new Error(&quot;A Navigation property must be instantiated with either a &#39;name&#39; or a &#39;nameOnServer&#39; property&quot;)},b=a.prototype;return b._$typeName=&quot;NavigationProperty&quot;,b.isDataProperty=!1,b.isNavigationProperty=!0,b.setProperties=function(a){Z(a).whereParam(&quot;custom&quot;).isOptional().applyAll(this)},b.toJSON=function(){return j(this,{name:null,entityTypeName:null,isScalar:null,associationName:null,validators:null,foreignKeyNames:null,invForeignKeyNames:null,custom:null})},a.fromJSON=function(a){return a.validators&amp;&amp;(a.validators=a.validators.map(db.fromJSON)),new ub(a)},a}(),vb=function(){var a=new $(&quot;AutoGeneratedKeyType&quot;);return a.None=a.addSymbol(),a.Identity=a.addSymbol(),a.KeyGenerator=a.addSymbol(),a.seal(),a}();!function(){function a(a,b){return null==b?!1:void 0!==b.entityType}function b(a,b){return null==b?!1:b.isDataProperty||b.isNavigationProperty}var c=W.prototype;c.isEntity=function(){return this._addContext({fn:a,msg:&quot; must be an entity&quot;})},c.isEntityProperty=function(){return this._addContext({fn:b,msg:&quot; must be either a DataProperty or a NavigationProperty&quot;})}}(),S.MetadataStore=pb,S.EntityType=rb,S.ComplexType=sb,S.DataProperty=tb,S.NavigationProperty=ub,S.AutoGeneratedKeyType=vb,pb.normalizeTypeName=qb.normalizeTypeName;var wb=function(){function a(a,b,c){var d=b.name+&quot;..&quot;+b.parentType.name,e=a._tempIdMap[d];return e||c&amp;&amp;(e={entityType:b.parentType,propertyName:b.name,keyMap:{}},a._tempIdMap[d]=e),e}var b=function(){this._tempIdMap={}},c=b.prototype;return c.generateTempKeyValue=function(b,c){var d=b.keyProperties;if(d.length&gt;1)throw new Error(&quot;Ids can not be autogenerated for entities with multipart keys&quot;);var e,f=d[0],g=a(this,f,!0);if(null!=c&amp;&amp;(g.keyMap[c.toString()]||(e=c)),void 0===e){var h=f.dataType;if(!h.getNext)throw new Error(&quot;Cannot use a property with a dataType of: &quot;+h.toString()+&quot; for id generation&quot;);for(e=h.getNext(this);null!=g.keyMap[e.toString()];)e=h.getNext(this)}return g.keyMap[e.toString()]=!0,e},c.getTempKeys=function(){var a=[];for(var b in this._tempIdMap){var c=this._tempIdMap[b],d=c.entityType;for(var e in c.keyMap)a.push(new jb(d,[e]))}return a},c.isTempKey=function(b){var c=b.entityType.keyProperties;if(c.length&gt;1)return!1;var d=c[0],e=a(this,d);return e?void 0!==e.keyMap[b.values[0].toString()]:!1},ab.registerType(b,&quot;KeyGenerator&quot;),b}();S.KeyGenerator=wb;var xb=function(){var a=function(a){Z(a||{}).whereParam(&quot;name&quot;).isOptional().isString().whereParam(&quot;isCaseSensitive&quot;).isOptional().isBoolean().whereParam(&quot;usesSql92CompliantStringComparison&quot;).isBoolean().applyAll(this),this.name||(this.name=z()),ab._storeObject(this,b._$typeName,this.name)},b=a.prototype;return b._$typeName=&quot;LocalQueryComparisonOptions&quot;,a.caseInsensitiveSQL=new a({name:&quot;caseInsensitiveSQL&quot;,isCaseSensitive:!1,usesSql92CompliantStringComparison:!0}),a.defaultInstance=new a(a.caseInsensitiveSQL),b.setAsDefault=function(){return i(this,a)},a}();S.LocalQueryComparisonOptions=xb;var yb=function(){var a=function(a){Z(a||{}).whereParam(&quot;name&quot;).isOptional().isString().whereParam(&quot;serverPropertyNameToClient&quot;).isFunction().whereParam(&quot;clientPropertyNameToServer&quot;).isFunction().applyAll(this),this.name||(this.name=z()),ab._storeObject(this,b._$typeName,this.name)},b=a.prototype;return b._$typeName=&quot;NamingConvention&quot;,a.none=new a({name:&quot;noChange&quot;,serverPropertyNameToClient:function(a){return a},clientPropertyNameToServer:function(a){return a}}),a.camelCase=new a({name:&quot;camelCase&quot;,serverPropertyNameToClient:function(a){return a.substr(0,1).toLowerCase()+a.substr(1)},clientPropertyNameToServer:function(a){return a.substr(0,1).toUpperCase()+a.substr(1)}}),a.defaultInstance=new a(a.none),b.setAsDefault=function(){return i(this,a)},a}();S.NamingConvention=yb;var zb=function(){function b(c,d,e,f){var g=e._$typeName||e.parentEnum&amp;&amp;e.parentEnum.name,h=g&amp;&amp;g.substr(0,1).toLowerCase()+g.substr(1);if(f&amp;&amp;h!=f)throw new Error(&quot;Invalid value for property: &quot;+f);if(h){var i=d[h];if(void 0===i)throw new Error(&quot;Invalid config property: &quot;+h);null===i?c[h]=e:i(c,e)}else a(e,function(a,e){b(c,d,e,a)})}function c(a,b,c){return b&amp;&amp;a[b]===c?a:(copy=g(new zb,a,[&quot;resourceName&quot;,&quot;entityType&quot;,&quot;wherePredicate&quot;,&quot;orderByClause&quot;,&quot;selectClause&quot;,&quot;skipCount&quot;,&quot;takeCount&quot;,&quot;expandClause&quot;,&quot;inlineCountEnabled&quot;,&quot;noTrackingEnabled&quot;,&quot;queryOptions&quot;,&quot;entityManager&quot;,&quot;dataService&quot;,&quot;resultEntityType&quot;]),copy.parameters=g({},a.parameters),b&amp;&amp;(copy[b]=c),copy)}function d(a){return X(a,&quot;propertyPaths&quot;).isOptional().isString().or().isArray().isString().check(),&quot;string&quot;==typeof a&amp;&amp;(a=a.split(&quot;,&quot;)),a=a.map(function(a){return a.trim()})}function e(a){var b=a.entityType,c=b.keyProperties.map(function(b){return Eb.create(b.name,Cb.Equals,a.getProperty(b.name))}),d=Eb.and(c);return d}function f(a,b,e){var f;return null==b?f=null:(b=d(b),f=Hb.create(b,e),a.orderByClause&amp;&amp;(f=a.orderByClause.addClause(f))),c(a,&quot;orderByClause&quot;,f)}function h(a){var b=a.entityType.keyProperties,c=r(b,a.values,function(a,b){return Eb.create(a.name,Cb.Equals,b)}),d=Eb.and(c);return d}function i(a,b){if(b.isScalar){if(0===b.foreignKeyNames.length)return null;var c=b.foreignKeyNames.map(function(b){return a.getProperty(b)}),d=new jb(b.entityType,c);return h(d)}var e=b.inverse,f=e?e.foreignKeyNames:b.invForeignKeyNames;if(0===f.length)return null;var g=a.entityAspect.getKey().values,i=r(f,g,function(a,b){return Eb.create(a,Cb.Equals,b)});return Eb.and(i)}var j=function(a){X(a,&quot;resourceName&quot;).isOptional().isString().check(),this.resourceName=a,this.entityType=null,this.wherePredicate=null,this.orderByClause=null,this.selectClause=null,this.skipCount=null,this.takeCount=null,this.expandClause=null,this.parameters={},this.inlineCountEnabled=!1,this.noTrackingEnabled=!1,this.entityManager=null},k=j.prototype;return k._$typeName=&quot;EntityQuery&quot;,k.from=function(a){return X(a,&quot;resourceName&quot;).isString().check(),c(this,&quot;resourceName&quot;,a)},j.from=function(a){return X(a,&quot;resourceName&quot;).isString().check(),new zb(a)},k.toType=function(a){return X(a,&quot;entityType&quot;).isString().or().isInstanceOf(rb).check(),c(this,&quot;resultEntityType&quot;,a)},k.where=function(a){var b;if(null==a)b=null;else{b=a instanceof Eb?a:Eb.create(U(arguments)),this.entityType&amp;&amp;b.validate(this.entityType),this.wherePredicate&amp;&amp;(b=new Gb(&quot;and&quot;,[this.wherePredicate,b]))}return c(this,&quot;wherePredicate&quot;,b)},k.orderBy=function(a){return f(this,a)},k.orderByDesc=function(a){return f(this,a,!0)},k.select=function(a){var b=null==a?null:new Kb(d(a));return c(this,&quot;selectClause&quot;,b)},k.skip=function(a){return X(a,&quot;count&quot;).isOptional().isNumber().check(),c(this,&quot;skipCount&quot;,null==a?null:a)},k.top=function(a){return this.take(a)},k.take=function(a){return X(a,&quot;count&quot;).isOptional().isNumber().check(),c(this,&quot;takeCount&quot;,null==a?null:a)},k.expand=function(a){var b=null==a?null:new Lb(d(a));return c(this,&quot;expandClause&quot;,b)},k.withParameters=function(a){return X(a,&quot;parameters&quot;).isObject().check(),c(this,&quot;parameters&quot;,a)},k.inlineCount=function(a){return X(a,&quot;enabled&quot;).isBoolean().isOptional().check(),a=void 0===a?!0:!!a,c(this,&quot;inlineCountEnabled&quot;,a)},k.noTracking=function(a){return X(a,&quot;enabled&quot;).isBoolean().isOptional().check(),a=void 0===a?!0:!!a,c(this,&quot;noTrackingEnabled&quot;,a)},k.using=function(a){if(!a)return this;var d=c(this);return b(d,{entityManager:null,dataService:null,queryOptions:null,fetchStrategy:function(a,b){a.queryOptions=(a.queryOptions||new Ob).using(b)},mergeStrategy:function(a,b){a.queryOptions=(a.queryOptions||new Ob).using(b)},jsonResultsAdapter:function(a,b){a.dataService=(a.dataService||new mb).using({jsonResultsAdapter:b})}},a),d},k.execute=function(a,b){if(!this.entityManager)throw new Error(&quot;An EntityQuery must have its EntityManager property set before calling &#39;execute&#39;&quot;);return this.entityManager.executeQuery(this,a,b)},k.executeLocally=function(){if(!this.entityManager)throw new Error(&quot;An EntityQuery must have its EntityManager property set before calling &#39;executeLocally&#39;&quot;);return this.entityManager.executeQueryLocally(this)},j.fromEntities=function(a){X(a,&quot;entities&quot;).isEntity().or().isNonEmptyArray().isEntity().check(),Array.isArray(a)||(a=U(arguments));var b=a[0],c=new zb(b.entityType.defaultResourceName),d=a.map(function(a){return e(a)}),f=Eb.or(d);c=c.where(f);var g=b.entityAspect.entityManager;return g&amp;&amp;(c=c.using(g)),c},j.fromEntityKey=function(a){X(a,&quot;entityKey&quot;).isInstanceOf(jb).check();var b=new zb(a.entityType.defaultResourceName),c=h(a);return b=b.where(c)},j.fromEntityNavigation=function(a,b){X(a,&quot;entity&quot;).isEntity().check();var c=a.entityType._checkNavProperty(b),d=new zb(c.entityType.defaultResourceName),e=i(a,c);d=d.where(e);var f=a.entityAspect.entityManager;return f&amp;&amp;(d=d.using(f)),d},k._getFromEntityType=function(a,b){var c=this.entityType;if(c)return c;var d=this.resourceName;if(!d)throw new Error(&quot;There is no resourceName for this query&quot;);if(a.isEmpty()){if(b)throw new Error(&quot;There is no metadata available for this query. Are you querying the local cache before you&#39;ve fetched metadata?&quot;);return null}var e=a.getEntityTypeNameForResourceName(d);if(c=e?a._getEntityType(e):this._getToEntityType(a,!0),!c){if(b)throw new Error(K(&quot;Cannot find an entityType for resourceName: &#39;%1&#39;.  Consider adding an &#39;EntityQuery.toType&#39; call to your query or calling the MetadataStore.setEntityTypeForResourceName method to register an entityType for this resourceName.&quot;,d));return null}return this.entityType=c,c},k._getToEntityType=function(a,b){return this.resultEntityType instanceof rb?this.resultEntityType:this.resultEntityType?(this.resultEntityType=a._getEntityType(this.resultEntityType,!1),this.resultEntityType):b?null:!this.selectClause&amp;&amp;this._getFromEntityType(a,!1)},k._toUri=function(a){function b(){var a=k.wherePredicate;if(a)return k.entityType&amp;&amp;a.validate(k.entityType),Eb._next=0,a.toODataFragment(j)}function c(){return k.inlineCountEnabled?k.inlineCountEnabled?&quot;allpages&quot;:&quot;none&quot;:void 0}function d(){var a=k.orderByClause;if(a)return k.entityType&amp;&amp;a.validate(k.entityType),a.toODataFragment(j)}function e(){var a=k.selectClause;if(a)return k.entityType&amp;&amp;a.validate(k.entityType),a.toODataFragment(j)}function f(){var a=k.expandClause;if(a)return a.toODataFragment(j)}function g(){var a=k.skipCount;if(a)return a.toString()}function h(){var a=k.takeCount;if(null!=a)return a.toString()}function i(a){var b=[];for(var c in a){var d=a[c];void 0!==d&amp;&amp;(d instanceof Array?d.forEach(function(a){b.push(c+&quot;=&quot;+encodeURIComponent(a))}):b.push(c+&quot;=&quot;+encodeURIComponent(d)))}return b.length&gt;0?&quot;?&quot;+b.join(&quot;&amp;&quot;):&quot;&quot;}var j=this._getFromEntityType(a,!1);j||(j=new rb(a));var k=this,l={};l.$filter=b(),l.$orderby=d(),l.$skip=g(),l.$top=h(),l.$expand=f(),l.$select=e(),l.$inlinecount=c();var m=i(l);return this.resourceName+m},k._toFilterFunction=function(a){var b=this.wherePredicate;return b?(b.validate(a),b.toFunction(a)):null},k._toOrderByComparer=function(a){var b=this.orderByClause;return b?b.getComparer(a):null},j}(),Ab=function(){var a={toupper:{fn:function(a){return a.toUpperCase()},dataType:lb.String},tolower:{fn:function(a){return a.toLowerCase()},dataType:lb.String},substring:{fn:function(a,b,c){return a.substring(b,c)},dataType:lb.String},substringof:{fn:function(a,b){return b.indexOf(a)&gt;=0},dataType:lb.Boolean},length:{fn:function(a){return a.length},dataType:lb.Int32},trim:{fn:function(a){return a.trim()},dataType:lb.String},concat:{fn:function(a,b){return a.concat(b)},dataType:lb.String},replace:{fn:function(a,b,c){return a.replace(b,c)},dataType:lb.String},startswith:{fn:function(a,b){return I(a,b)},dataType:lb.Boolean},endswith:{fn:function(a,b){return J(a,b)},dataType:lb.Boolean},indexof:{fn:function(a,b){return a.indexOf(b)},dataType:lb.Int32},round:{fn:function(a){return Math.round(a)},dataType:lb.Int32},ceiling:{fn:function(a){return Math.ceil(a)},dataType:lb.Int32},floor:{fn:function(a){return Math.floor(a)},dataType:lb.Int32},second:{fn:function(a){return a.getSeconds()},dataType:lb.Int32},minute:{fn:function(a){return a.getMinutes()},dataType:lb.Int32},day:{fn:function(a){return a.getDate()},dataType:lb.Int32},month:{fn:function(a){return a.getMonth()+1},dataType:lb.Int32},year:{fn:function(a){return a.getFullYear()},dataType:lb.Int32}};return a}(),Bb=function(){function a(a){var b=a.split(&quot;.&quot;);return 1===b.length?function(b){return b.getProperty(a)}:function(a){return Q(a,b)}}var b=/^[a-z_][\w.$]*$/i,c=/(&#39;[^&#39;]*&#39;|[^,]+)/g,d=/(&quot;[^&quot;]*&quot;|[^,]+)/g,e=function(e,f,g){var h=e.split(&quot;:&quot;);if(this.isRealNode=!0,1===h.length){var i=h[0].trim();this.value=i;var j=i.substr(0,1),k=(&quot;&#39;&quot;===j||&#39;&quot;&#39;===j)&amp;&amp;i.length&gt;1&amp;&amp;i.substr(i.length-1)===j;if(k){var l=i.substr(1,i.length-2);this.fn=function(){return l},this.dataType=lb.String}else{var m=b.test(i);if(m){if(g&amp;&amp;null==g.getProperty(i,!1))return this.isRealNode=!1,void 0;this.propertyPath=i,this.fn=a(i)}else{if(g)return this.isRealNode=!1,void 0;this.fn=function(){return i},this.dataType=lb.fromValue(i)}}}else try{this.fnName=h[0].trim().toLowerCase();var n=Ab[this.fnName];this.localFn=n.fn,this.dataType=n.dataType;var o=this;this.fn=function(a){var b=o.fnNodes.map(function(b){var c=b.fn(a);return c}),c=o.localFn.apply(null,b);</div><div class='line' id='LC4'>return c};var p=f[h[1]].trim();&quot;(&quot;===p.substr(0,1)&amp;&amp;(p=p.substr(1,p.length-2));var q=e.indexOf(&quot;&#39;&quot;)&gt;=0?c:d,r=p.match(q);this.fnNodes=r.map(function(a){return new Bb(a,f)})}catch(s){this.isRealNode=!1}},f=e.prototype;return e.create=function(a,b,c){if(&quot;string&quot;!=typeof a)return null;for(var d,e=/\([^()]*\)/,f=[],g=0;d=e.exec(a);){var h=d[0];f.push(h);var i=&quot;:&quot;+g++;a=a.replace(h,i)}var j=new Bb(a,f,c?null:b);return j.isRealNode?(!j.dataType&amp;&amp;c&amp;&amp;c.isStringFn&amp;&amp;(j.dataType=lb.String),j._validate(b),j):null},f.toString=function(){if(this.fnName){var a=this.fnNodes.map(function(a){return a.toString()}),b=this.fnName+&quot;(&quot;+a.join(&quot;,&quot;)+&quot;)&quot;;return b}return this.value},f.toODataFragment=function(a){if(this._validate(a),this.fnName){var b=this.fnNodes.map(function(b){return b.toODataFragment(a)}),c=this.fnName+&quot;(&quot;+b.join(&quot;,&quot;)+&quot;)&quot;;return c}var d=this.value.substr(0,1);return&quot;&#39;&quot;===d||&#39;&quot;&#39;===d?this.value:this.value==this.propertyPath?a._clientPropertyPathToServer(this.propertyPath):this.value},f._validate=function(a){if(!this.isValidated)if(this.isValidated=!0,this.propertyPath){if(a.isAnonymous)return;var b=a.getProperty(this.propertyPath,!0);if(!b){var c=K(&quot;Unable to resolve propertyPath.  EntityType: &#39;%1&#39;   PropertyPath: &#39;%2&#39;&quot;,a.name,this.propertyPath);throw new Error(c)}this.dataType=b.isDataProperty?b.dataType:b.entityType}else this.fnNodes&amp;&amp;this.fnNodes.forEach(function(b){b._validate(a)})},e}(),Cb=function(){var a=new $(&quot;FilterQueryOp&quot;);return a.Equals=a.addSymbol({operator:&quot;eq&quot;,aliases:[&quot;==&quot;]}),a.NotEquals=a.addSymbol({operator:&quot;ne&quot;,aliases:[&quot;!=&quot;]}),a.GreaterThan=a.addSymbol({operator:&quot;gt&quot;,aliases:[&quot;&gt;&quot;]}),a.LessThan=a.addSymbol({operator:&quot;lt&quot;,aliases:[&quot;&lt;&quot;]}),a.GreaterThanOrEqual=a.addSymbol({operator:&quot;ge&quot;,aliases:[&quot;&gt;=&quot;]}),a.LessThanOrEqual=a.addSymbol({operator:&quot;le&quot;,aliases:[&quot;&lt;=&quot;]}),a.Contains=a.addSymbol({operator:&quot;substringof&quot;,aliases:[&quot;contains&quot;],isFunction:!0,isStringFn:!0}),a.StartsWith=a.addSymbol({operator:&quot;startswith&quot;,isFunction:!0,isStringFn:!0}),a.EndsWith=a.addSymbol({operator:&quot;endswith&quot;,isFunction:!0,isStringFn:!0}),a.Any=a.addSymbol({operator:&quot;any&quot;,isAnyAll:!0,aliases:[&quot;some&quot;]}),a.All=a.addSymbol({operator:&quot;all&quot;,isAnyAll:!0,aliases:[&quot;every&quot;]}),a.IsTypeOf=a.addSymbol({operator:&quot;isof&quot;,isFunction:!0,aliases:[&quot;isTypeOf&quot;]}),a.seal(),a._map=function(){var b={};return a.getSymbols().forEach(function(a){b[a.name.toLowerCase()]=a,b[a.operator.toLowerCase()]=a,a.aliases&amp;&amp;a.aliases.forEach(function(c){b[c.toLowerCase()]=a})}),b}(),a.from=function(b){return a.contains(b)?b:a._map[b.toLowerCase()]},a}(),Db=function(){var a=new $(&quot;BooleanQueryOp&quot;);return a.And=a.addSymbol({operator:&quot;and&quot;,aliases:[&quot;&amp;&amp;&quot;]}),a.Or=a.addSymbol({operator:&quot;or&quot;,aliases:[&quot;||&quot;]}),a.Not=a.addSymbol({operator:&quot;not&quot;,aliases:[&quot;~&quot;,&quot;!&quot;]}),a.seal(),a._map=function(){var b={};return a.getSymbols().forEach(function(a){b[a.name.toLowerCase()]=a,b[a.operator.toLowerCase()]=a,a.aliases&amp;&amp;a.aliases.forEach(function(c){b[c.toLowerCase()]=a})}),b}(),a.from=function(b){return a.contains(b)?b:a._map[b.toLowerCase()]},a}(),Eb=function(){function a(a){var b;if(1===a.length&amp;&amp;Array.isArray(a[0]))b=a[0];else{var b=U(a);b[0]instanceof Eb||(b=[Eb.create(b)])}return b.filter(function(a){return null!=a})}var b=function(){return arguments[0].prototype===!0?this:new Fb(U(arguments))},c=b.prototype;return b.create=function(a){var b=Array.isArray(a)&amp;&amp;1===arguments.length?a:U(arguments);return new Fb(b)},b.and=function(b){return b=a(arguments),0===b.length?null:1===b.length?b[0]:new Gb(&quot;and&quot;,b)},b.or=function(b){return b=a(arguments),0===b.length?null:1===b.length?b[0]:new Gb(&quot;or&quot;,b)},b.not=function(a){return new Gb(&quot;not&quot;,[a])},c.and=function(c){return c=a(arguments),c.unshift(this),b.and(c)},c.or=function(c){return c=a(arguments),c.unshift(this),b.or(c)},c.not=function(){return new Gb(&quot;not&quot;,[this])},b}(),Fb=function(){function a(a,f,g){var h,i=a.metadataStore.localQueryComparisonOptions,j=R(g);switch(f){case Cb.Equals:h=function(a,c){return a&amp;&amp;&quot;string&quot;==typeof a?b(a,c,i):j(a)==j(c)};break;case Cb.NotEquals:h=function(a,c){return a&amp;&amp;&quot;string&quot;==typeof a?!b(a,c,i):j(a)!=j(c)};break;case Cb.GreaterThan:h=function(a,b){return j(a)&gt;j(b)};break;case Cb.GreaterThanOrEqual:h=function(a,b){return j(a)&gt;=j(b)};break;case Cb.LessThan:h=function(a,b){return j(a)&lt;j(b)};break;case Cb.LessThanOrEqual:h=function(a,b){return j(a)&lt;=j(b)};break;case Cb.StartsWith:h=function(a,b){return c(a,b,i)};break;case Cb.EndsWith:h=function(a,b){return d(a,b,i)};break;case Cb.Contains:h=function(a,b){return e(a,b,i)};break;case Cb.Any:h=function(a,b){return a.some(function(a){return b(a)})};break;case Cb.All:h=function(a,b){return a.every(function(a){return b(a)})};break;default:throw new Error(&quot;Unknown FilterQueryOp: &quot;+f)}return h}function b(a,b,c){return null==b?!1:(&quot;string&quot;!=typeof b&amp;&amp;(b=b.toString()),c.usesSql92CompliantStringComparison&amp;&amp;(a=(a||&quot;&quot;).trim(),b=(b||&quot;&quot;).trim()),c.isCaseSensitive||(a=(a||&quot;&quot;).toLowerCase(),b=(b||&quot;&quot;).toLowerCase()),a===b)}function c(a,b,c){return c.isCaseSensitive||(a=(a||&quot;&quot;).toLowerCase(),b=(b||&quot;&quot;).toLowerCase()),I(a,b)}function d(a,b,c){return c.isCaseSensitive||(a=(a||&quot;&quot;).toLowerCase(),b=(b||&quot;&quot;).toLowerCase()),J(a,b)}function e(a,b,c){return c.isCaseSensitive||(a=(a||&quot;&quot;).toLowerCase(),b=(b||&quot;&quot;).toLowerCase()),a.indexOf(b)&gt;=0}var f=function(a){if(1===a.length)return this._odataExpr=a[0],void 0;var b=a[0];X(b,&quot;propertyOrExpr&quot;).isString().isOptional().check();var c=a[1];X(c,&quot;operator&quot;).isEnumOf(Cb).or().isString().check();var d=Cb.from(c);if(!d)throw new Error(&quot;Unknown query operation: &quot;+c);if(this._filterQueryOp=d,b)this._propertyOrExpr=b;else if(d!==Cb.IsTypeOf)throw new Error(&quot;propertyOrExpr cannot be null except when using the &#39;IsTypeOf&#39; operator&quot;);var e=a[2];return d&amp;&amp;d.isAnyAll?(this._value=e instanceof Eb?e:new Fb(a.slice(2)),this._isLiteral=void 0,void 0):(X(e,&quot;value&quot;).isRequired(!0).check(),null!=e&amp;&amp;&quot;object&quot;==typeof e&amp;&amp;void 0!==e.value?(this._dataType=e.dataType||lb.fromValue(e.value),this._value=e.value,this._isLiteral=e.isLiteral):(this._dataType=lb.fromValue(e),this._value=e,this._isLiteral=void 0),void 0)},g=new Eb({prototype:!0});return f.prototype=g,g.toODataFragment=function(a,b){if(this._odataExpr)return this._odataExpr;var c=this._filterQueryOp,d=this._value;if(c==Cb.IsTypeOf){var e=a.metadataStore.getEntityType(d),f=e.namespace+&quot;.&quot;+e.shortName;return c.operator+&quot;(&quot;+lb.String.fmtOData(f)+&quot;)&quot;}this.validate(a);var g=this._fnNode1&amp;&amp;this._fnNode1.toODataFragment(a);if(b&amp;&amp;(g=b+&quot;/&quot;+g),Eb._next+=1,b=&quot;x&quot;+Eb._next,c.isAnyAll)return g+&quot;/&quot;+c.operator+&quot;(&quot;+b+&quot;: &quot;+d.toODataFragment(this.dataType,b)+&quot;)&quot;;var h;if(this._fnNode2)h=this._fnNode2.toODataFragment(a);else{var i=this._fnNode1.dataType||this._dataType;h=i.fmtOData(d)}return c.isFunction?c==Cb.Contains?c.operator+&quot;(&quot;+h+&quot;,&quot;+g+&quot;) eq true&quot;:c.operator+&quot;(&quot;+g+&quot;,&quot;+h+&quot;) eq true&quot;:g+&quot; &quot;+c.operator+&quot; &quot;+h},g.toFunction=function(b){if(this._odataExpr)throw new Exception(&quot;OData predicateexpressions cannot be interpreted locally&quot;);this.validate(b);var c=this._fnNode1.dataType||this._dataType,d=a(b,this._filterQueryOp,c),e=this._fnNode1.fn;if(this._fnNode2){var f=this._fnNode2.fn;return function(a){return d(e(a),f(a))}}if(this._filterQueryOp&amp;&amp;this._filterQueryOp.isAnyAll){var g=this._value.toFunction(c);return function(a){return d(e(a),g)}}var h=this._value;return function(a){return d(e(a),h)}},g.toString=function(){return K(&quot;{%1} %2 {%3}&quot;,this._propertyOrExpr,this._filterQueryOp.operator,this._value)},g.validate=function(a){var b=this._filterQueryOp;return void 0===this._fnNode1&amp;&amp;this._propertyOrExpr&amp;&amp;(this._fnNode1=Bb.create(this._propertyOrExpr,a,b),this.dataType=this._fnNode1.dataType),b&amp;&amp;b.isAnyAll?(this._value.validate(this.dataType),void 0):(void 0!==this._fnNode2||this._isLiteral||(this._fnNode2=Bb.create(this._value,a)),void 0)},f}(),Gb=function(){function a(a,b,c){var d,e;switch(b){case Db.Not:return d=c[0].toFunction(a),function(a){return!d(a)};case Db.And:return e=c.map(function(b){return b.toFunction(a)}),function(a){var b=e.reduce(function(b,c){return b&amp;&amp;c(a)},!0);return b};case Db.Or:return e=c.map(function(b){return b.toFunction(a)}),function(a){var b=e.reduce(function(b,c){return b||c(a)},!1);return b};default:throw new Error(&quot;Invalid boolean operator:&quot;+b)}}var b=function(a,b){if(!Array.isArray(b))throw new Error(&quot;predicates parameter must be an array&quot;);if(this._booleanQueryOp=Db.from(a),!this._booleanQueryOp)throw new Error(&quot;Unknown query operation: &quot;+a);if(this._booleanQueryOp===Db.Not&amp;&amp;1!==b.length)throw new Error(&quot;Only a single predicate can be passed in with the &#39;Not&#39; operator&quot;);this._predicates=b},c=new Eb({prototype:!0});return b.prototype=c,c.toODataFragment=function(a,b){if(1==this._predicates.length)return this._booleanQueryOp.operator+&quot; (&quot;+this._predicates[0].toODataFragment(a,b)+&quot;)&quot;;var c=this._predicates.map(function(c){return&quot;(&quot;+c.toODataFragment(a,b)+&quot;)&quot;}).join(&quot; &quot;+this._booleanQueryOp.operator+&quot; &quot;);return c},c.toFunction=function(b){return a(b,this._booleanQueryOp,this._predicates)},c.toString=function(){if(1==this._predicates.length)return this._booleanQueryOp.operator+&quot; (&quot;+this._predicates[0]+&quot;)&quot;;var a=this._predicates.map(function(a){return&quot;(&quot;+a.toString()+&quot;)&quot;}).join(&quot; &quot;+this._booleanQueryOp.operator+&quot; &quot;);return a},c.validate=function(a){this._isValidated||(this._predicates.every(function(b){b.validate(a)}),this._isValidated=!0)},b}(),Hb=function(){var a=function(b,c){return b.prototype===!0?this:a.create(b,c)},b=a.prototype;return a.create=function(a,b){if(a.length&gt;1){var c=a.map(function(a){return new Ib(a,b)});return new Jb(c)}return new Ib(a[0],b)},a.combine=function(a){return new Jb(a)},a.isOrderByClause=function(a){return a instanceof Hb},b.addClause=function(a){return new Jb([this,a])},a}(),Ib=function(){var a=function(a,b){if(&quot;string&quot;!=typeof a)throw new Error(&quot;propertyPath is not a string&quot;);a=a.trim();var c=a.split(&quot; &quot;);if(c.length&gt;1&amp;&amp;b!==!0&amp;&amp;b!==!1&amp;&amp;(b=I(c[1].toLowerCase(),&quot;desc&quot;),!b)){var d=I(c[1].toLowerCase(),&quot;asc&quot;);if(!d)throw new Error(&quot;the second word in the propertyPath must begin with &#39;desc&#39; or &#39;asc&#39;&quot;)}this.propertyPath=c[0],this.isDesc=b},b=new Hb({prototype:!0});return a.prototype=b,b.validate=function(a){a&amp;&amp;(this.lastProperty=a.getProperty(this.propertyPath,!0))},b.toODataFragment=function(a){return a._clientPropertyPathToServer(this.propertyPath)+(this.isDesc?&quot; desc&quot;:&quot;&quot;)},b.getComparer=function(a){if(this.lastProperty||this.validate(a),this.lastProperty)var b=this.lastProperty.dataType,c=this.lastProperty.parentType.metadataStore.localQueryComparisonOptions.isCaseSensitive;var d=this.propertyPath,e=this.isDesc;return function(a,f){var g=Q(a,d),h=Q(f,d),i=b||g&amp;&amp;lb.fromValue(g)||lb.fromValue(h);if(i===lb.String)c?(g=g||&quot;&quot;,h=h||&quot;&quot;):(g=(g||&quot;&quot;).toLowerCase(),h=(h||&quot;&quot;).toLowerCase());else{var j=R(i);g=j(g),h=j(h)}return g===h?0:g&gt;h||void 0===h?e?-1:1:e?1:-1}},a}(),Jb=function(){var a=function(a){var b=[];a.forEach(function(a){if(a instanceof Jb)b=b.concat(a.orderByClauses);else{if(!(a instanceof Ib))throw new Error(&quot;Invalid argument to CompositeOrderByClause ctor.&quot;);b.push(a)}}),this._orderByClauses=b},b=new Hb({prototype:!0});return a.prototype=b,b.validate=function(a){this._orderByClauses.forEach(function(b){b.validate(a)})},b.toODataFragment=function(a){var b=this._orderByClauses.map(function(b){return b.toODataFragment(a)});return b.join(&quot;,&quot;)},b.getComparer=function(a){var b=this._orderByClauses.map(function(b){return b.getComparer(a)});return function(a,c){for(var d=0;d&lt;b.length;d++){var e=b[d](a,c);if(0!==e)return e}return 0}},a}(),Kb=function(){var a=function(a){this.propertyPaths=a,this._pathNames=a.map(function(a){return a.replace(&quot;.&quot;,&quot;_&quot;)})},b=a.prototype;return b.validate=function(a){a&amp;&amp;this.propertyPaths.forEach(function(b){a.getProperty(b,!0)})},b.toODataFragment=function(a){var b=this.propertyPaths.map(function(b){return a._clientPropertyPathToServer(b)}).join(&quot;,&quot;);return b},b.toFunction=function(){var a=this;return function(b){var c={};return a.propertyPaths.forEach(function(d,e){c[a._pathNames[e]]=Q(b,d)}),c}},a}(),Lb=function(){var a=function(a){this.propertyPaths=a},b=a.prototype;return b.toODataFragment=function(a){var b=this.propertyPaths.map(function(b){return a._clientPropertyPathToServer(b)}).join(&quot;,&quot;);return b},a}();S.FilterQueryOp=Cb,S.Predicate=Eb,S.EntityQuery=zb,S.FnNode=Bb,S.OrderByClause=Hb;var Mb=function(){var a=new $(&quot;MergeStrategy&quot;);return a.PreserveChanges=a.addSymbol(),a.OverwriteChanges=a.addSymbol(),a.SkipMerge=a.addSymbol(),a.Disallowed=a.addSymbol(),a.seal(),a}(),Nb=function(){var a=new $(&quot;FetchStrategy&quot;);return a.FromServer=a.addSymbol(),a.FromLocalCache=a.addSymbol(),a.seal(),a}(),Ob=function(){function a(a,b){return b&amp;&amp;Z(b).whereParam(&quot;fetchStrategy&quot;).isEnumOf(Nb).isOptional().whereParam(&quot;mergeStrategy&quot;).isEnumOf(Mb).isOptional().applyAll(a),a}var b=function(b){a(this,b)},c=b.prototype;return c._$typeName=&quot;QueryOptions&quot;,b.resolve=function(a){return new Ob(l(a,[&quot;fetchStrategy&quot;,&quot;mergeStrategy&quot;]))},b.defaultInstance=new b({fetchStrategy:Nb.FromServer,mergeStrategy:Mb.PreserveChanges}),c.using=function(b){if(!b)return this;var c=new Ob(this);return Mb.contains(b)?b={mergeStrategy:b}:Nb.contains(b)&amp;&amp;(b={fetchStrategy:b}),a(c,b)},c.setAsDefault=function(){return i(this,b)},c.toJSON=function(){return j(this,{fetchStrategy:null,mergeStrategy:null})},b.fromJSON=function(a){return new Ob({fetchStrategy:Nb.fromName(a.fetchStrategy),mergeStrategy:Mb.fromName(a.mergeStrategy)})},b}();S.QueryOptions=Ob,S.FetchStrategy=Nb,S.MergeStrategy=Mb;var Pb=function(){function a(a){if(a){if(1===a.length){var b=a[0];return function(a){return a?a.entityAspect.entityState===b:!1}}return function(b){return b?a.some(function(a){return b.entityAspect.entityState===a}):!1}}return function(a){return!!a}}var b=a([kb.Added,kb.Modified,kb.Deleted]),c=function(a,b){this.entityManager=a,this.entityType=b,this._indexMap={},this._entities=[],this._emptyIndexes=[]},d=c.prototype;return d.attachEntity=function(a,b,c){var d=a.entityAspect;d._initialized||this.entityType._initializeInstance(a),delete d._initialized;var e=d.getKey()._keyInGroup,f=this._indexMap[e];if(f&gt;=0){var g=this._entities[f],h=g.entityAspect.entityState.isUnchanged();if(g===a)d.entityState=b;else{if(c===Mb.Disallowed)throw new Error(&quot;A MergeStrategy of &#39;Disallowed&#39; does not allow you to attach an entity when an entity with the same key is already attached: &quot;+d.getKey());(c===Mb.OverwriteChanges||c===Mb.PreserveChanges&amp;&amp;h)&amp;&amp;(this.entityType._updateTargetFromRaw(g,a,tb.getRawValueFromClient),this.entityManager._checkStateChange(g,h,b.isUnchanged()))}return g}return 0===this._emptyIndexes.length?f=this._entities.push(a)-1:(f=this._emptyIndexes.pop(),this._entities[f]=a),this._indexMap[e]=f,d.entityState=b,d.entityGroup=this,d.entityManager=this.entityManager,a},d.detachEntity=function(a){var b=a.entityAspect,c=b.getKey()._keyInGroup,d=this._indexMap[c];if(void 0===d)throw new Error(&quot;internal error - entity cannot be found in group&quot;);return delete this._indexMap[c],this._emptyIndexes.push(d),this._entities[d]=null,a},d.findEntityByKey=function(a){var b;b=a instanceof jb?a._keyInGroup:jb.createKeyString(a);var c=this._indexMap[b];return void 0!==c?this._entities[c]:null},d.hasChanges=function(){return this._entities.some(b)},d.getEntities=function(b){var c=a(b);return this._entities.filter(c)},d._clear=function(){this._entities.forEach(function(a){null!=a&amp;&amp;a.entityAspect._detach()}),this._entities=null,this._indexMap=null,this._emptyIndexes=null},d._fixupKey=function(a,b){var c=this._indexMap[a];if(void 0===c)throw new Error(&quot;Internal Error in key fixup - unable to locate entity&quot;);var d=this._entities[c],e=d.entityType.keyProperties[0].name;d.setProperty(e,b),delete d.entityAspect.hasTempKey,delete this._indexMap[a],this._indexMap[b]=c},d._replaceKey=function(a,b){var c=this._indexMap[a._keyInGroup];delete this._indexMap[a._keyInGroup],this._indexMap[b._keyInGroup]=c},c}(),Qb=function(){function b(a,b,c){var d=c?Ob.defaultInstance:a.queryOptions,e=c?Sb.defaultInstance:a.saveOptions,f=c?fb.defaultInstance:a.validationOptions,g=Z(b).whereParam(&quot;serviceName&quot;).isOptional().isString().whereParam(&quot;dataService&quot;).isOptional().isInstanceOf(mb).whereParam(&quot;queryOptions&quot;).isInstanceOf(Ob).isOptional().withDefault(d).whereParam(&quot;saveOptions&quot;).isInstanceOf(Sb).isOptional().withDefault(e).whereParam(&quot;validationOptions&quot;).isInstanceOf(fb).isOptional().withDefault(f).whereParam(&quot;keyGeneratorCtor&quot;).isFunction().isOptional();c&amp;&amp;(g=g.whereParam(&quot;metadataStore&quot;).isInstanceOf(pb).isOptional().withDefault(new pb)),g.applyAll(a),h(a.queryOptions,d),h(a.saveOptions,e),h(a.validationOptions,f),b.serviceName&amp;&amp;(a.dataService=new mb({serviceName:a.serviceName})),a.serviceName=a.dataService&amp;&amp;a.dataService.serviceName,a.keyGeneratorCtor=a.keyGeneratorCtor||wb,(c||b.keyGeneratorCtor)&amp;&amp;(a.keyGenerator=new a.keyGeneratorCtor)}function c(b){b.forEach(function(b){var c=[],d=b.entityAspect._validationErrors;a(d,function(a,b){b.isServerError&amp;&amp;c.push(a)}),0!==c.length&amp;&amp;(c.forEach(function(a){delete d[a]}),b.hasValidationErrors=!G(d))})}function d(b){var c=[];return b.forEach(function(b){a(b.entityAspect._validationErrors,function(a,d){var e=g({entity:b,errorName:d.validator.name},d,[&quot;errorMessage&quot;,&quot;propertyName&quot;,&quot;isServerError&quot;]);c.push(e)})}),c}function e(a,b){var c=b.entityErrors;if(c){var d=a.entityManager,e=d.metadataStore;b.entityErrors=c.map(function(a){var b=null;if(a.keyValues){var c=e._getEntityType(a.entityTypeName),f=new jb(c,a.keyValues);b=d.findEntityByKey(f)}if(b){var h=a.propertyName?{propertyName:a.propertyName,property:c.getProperty(a.propertyName)}:{},i=eb.getKey(a.errorName||a.errorMessage,a.propertyName),j=new eb(null,h,a.errorMessage,i);j.isServerError=!0,b.entityAspect.addValidationError(j)}var k=g({entity:b,isServerError:!0},a,[&quot;errorName&quot;,&quot;errorMessage&quot;,&quot;propertyName&quot;]);return k})}}function i(a,b){if(a.length!==b.length)return!1;for(var c=0,d=a.length;d&gt;c;c++)if(a[c]!==b[c])return!1;return!0}function j(a,b){return X(b,&quot;entityTypes&quot;).isString().isOptional().or().isNonEmptyArray().isString().or().isInstanceOf(rb).or().isNonEmptyArray().isInstanceOf(rb).check(),&quot;string&quot;==typeof b?b=a.metadataStore._getEntityType(b,!1):Array.isArray(b)&amp;&amp;&quot;string&quot;==typeof b[0]&amp;&amp;(b=b.map(function(b){return a.metadataStore._getEntityType(b,!1)})),b}function l(a,b,c){var d,e=F(a,b);return e.forEach(function(a){if(a){var b=a.getEntities(c);d?d.push.apply(d,b):d=b}}),d||[]}function p(a,b){if(b[0]instanceof jb)return{entityKey:b[0],remainingArgs:U(b,1)};if(&quot;string&quot;==typeof b[0]&amp;&amp;b.length&gt;=2){var c=a.metadataStore._getEntityType(b[0],!1);return{entityKey:new jb(c,b[1]),remainingArgs:U(b,2)}}throw new Error(&quot;This method requires as its initial parameters either an EntityKey or an entityType name followed by a value or an array of values.&quot;)}function s(a,b){a.forEach(function(a){a.entityAspect.isBeingSaved=b})}function u(b,c){var d;c?(d={},c.forEach(function(a){var b=d[a.entityType.name];b||(b={},b.entityType=a.entityType,b._entities=[],d[a.entityType.name]=b),b._entities.push(a)})):d=b._entityGroupMap;var e=[],f={};return a(d,function(a,b){f[a]=v(b,e)}),{entityGroupMap:f,tempKeys:e}}function v(a,b){var c={},d=a.entityType,e=d.dataProperties,f=T(d),g=[];return a._entities.forEach(function(a){if(a){var c=y(a,e,f,b);g.push(c)}}),c.entities=g,c}function y(a,b,c,d){var e={};b.forEach(function(b){var d=b.name,f=a.getProperty(d);if(null!=f||null!=b.defaultValue){if(f&amp;&amp;b.isComplexProperty){var g=b.dataType.dataProperties;f=n(f,function(a){return y(a,g,c)})}else f=c?c(b,f):f,b.isUnmapped&amp;&amp;(f=k(f));void 0!==f&amp;&amp;(e[d]=f)}});var f,g;if(a.entityAspect){f=a.entityAspect;var h=f.entityState;g={tempNavPropNames:A(f,d),entityState:h.name},(h.isModified()||h.isDeleted())&amp;&amp;(g.originalValuesMap=f.originalValues),e.entityAspect=g}else f=a.complexAspect,g={},f.originalValues&amp;&amp;!G(f.originalValues)&amp;&amp;(g.originalValuesMap=f.originalValues),e.complexAspect=g;return e}function A(a,b){var c=a.entity;a.hasTempKey&amp;&amp;b.push(a.getKey().toJSON());var d;return c.entityType.navigationProperties.forEach(function(a){if(a.relatedDataProperties){var b=c.getProperty(a.name);b&amp;&amp;b.entityAspect.hasTempKey&amp;&amp;(d=d||[],d.push(a.name))}}),d}function B(a,b,c){var d=c.tempKeyMap,e=a.entityType,f=c.mergeStrategy,g=null,h=a.entityManager,i=h.entityChanged,j=[],k=tb.getRawValueFromClient;return b.entities.forEach(function(b){var c,l=b.entityAspect,m=e.getEntityKeyFromRawEntity(b,k),n=kb.fromName(l.entityState);if(n.isAdded()?(c=d[m.toString()],g=void 0===c?a.findEntityByKey(m):null):g=a.findEntityByKey(m),g)if(f===Mb.SkipMerge);else{if(f===Mb.Disallowed)throw new Error(&quot;A MergeStrategy of &#39;Disallowed&#39; prevents &quot;+m.toString()+&quot; from being merged&quot;);var o=g.entityAspect.entityState.isUnchanged();(f===Mb.OverwriteChanges||o)&amp;&amp;(e._updateTargetFromRaw(g,b,k),g.entityAspect.entityState=n,i.publish({entityAction:gb.MergeOnImport,entity:g}),h._checkStateChange(g,o,n.isUnchanged()))}else g=e._createInstanceCore(),e._updateTargetFromRaw(g,b,k),void 0!==c&amp;&amp;(g.setProperty(e.keyProperties[0].name,c.values[0]),l.tempNavPropNames&amp;&amp;l.tempNavPropNames.forEach(function(a){var b=e.getNavigationProperty(a),c=b.relatedDataProperties[0].name,f=g.getProperty(c),h=new jb(b.entityType,[f]),i=d[h.toString()];g.setProperty(c,i.values[0])})),g=a.attachEntity(g,n),i.publish({entityAction:gb.AttachOnImport,entity:g}),n.isUnchanged()||h._notifyStateChange(g,!0);j.push(g)}),j}function C(a,b,c){return a=a.then(function(a){return b&amp;&amp;b(a),ob.resolve(a)},function(a){return c&amp;&amp;c(a),ob.reject(a)})}function D(a,b){var c;return c=b?b.filter(function(b){if(b.entityAspect.entityManager!==a)throw new Error(&quot;Only entities in this entityManager may be saved&quot;);return!b.entityAspect.entityState.isDetached()}):a.getChanges()}function E(a,b){a._inKeyFixup=!0,b.forEach(function(b){var c=a._entityGroupMap[b.entityTypeName];if(!c)throw new Error(&quot;Unable to locate the following fully qualified EntityType name: &quot;+b.entityTypeName);c._fixupKey(b.tempValue,b.realValue)}),a._inKeyFixup=!1}function F(a,b){var c=a._entityGroupMap;return b?m(b).map(function(a){if(a instanceof rb)return c[a.name];throw new Error(&quot;The EntityManager.getChanges() &#39;entityTypes&#39; parameter must be either an entityType or an array of entityTypes or null&quot;)}):f(c)}function H(a,b){var c=b.entityAspect.getKey(),d=r(b.entityType.keyProperties,c.values,function(a,b){return a.defaultValue===b?a:null}).filter(function(a){return null!==a});if(d.length)if(b.entityType.autoGeneratedKeyType!==vb.None)a.generateTempKeyValue(b);else if(d.length===c.values.length)throw new Error(&quot;Cannot attach an object of type  (&quot;+b.entityType.name+&quot;) to an EntityManager without first setting its key or setting its entityType &#39;AutoGeneratedKeyType&#39; property to something other than &#39;None&#39;&quot;)}function I(a,b){return b?(b=m(b),b.forEach(function(a){if(!kb.contains(a))throw new Error(&quot;The EntityManager.getChanges() &#39;entityStates&#39; parameter must either be null, an entityState or an array of entityStates&quot;)}),b):null}function J(a,b,c,d){var e=b.entityType.navigationProperties;e.forEach(function(e){var f=b.getProperty(e.name);if(e.isScalar){if(!f)return;a.attachEntity(f,c,d)}else f.forEach(function(b){a.attachEntity(b,c,d)})})}function K(a,b,c,d){try{var e=a.metadataStore;if(e.isEmpty()&amp;&amp;d.hasServerMetadata)throw new Error(&quot;cannot execute _executeQueryCore until metadataStore is populated.&quot;);if(c.fetchStrategy===Nb.FromLocalCache)try{var f=a.executeQueryLocally(b);return ob.resolve({results:f,query:b})}catch(g){return ob.reject(g)}var h=new Rb({query:b,entityManager:a,dataService:d,mergeOptions:{mergeStrategy:c.mergeStrategy,noTracking:!!b.noTrackingEnabled}}),i=a.validationOptions.validateOnQuery;return d.adapterInstance.executeQuery(h).then(function(c){var e=x(function(){var b={isLoading:a.isLoading};return a.isLoading=!0,a._pendingPubs=[],b},function(c){a.isLoading=c.isLoading,a._pendingPubs.forEach(function(a){a()}),a._pendingPubs=null,b=null,h=null,c.error&amp;&amp;ob.reject(c.error)},function(){var e=d.jsonResultsAdapter.extractResults(c);e=m(e);var f=h.visitAndMerge(e,{nodeType:&quot;root&quot;});return i&amp;&amp;f.forEach(function(a){a.entityAspect&amp;&amp;a.entityAspect.validateEntity()}),h.processDeferred(),{results:f,query:b,entityManager:a,httpResponse:c.httpResponse,inlineCount:c.inlineCount}});return ob.resolve(e)},function(c){return c&amp;&amp;(c.query=b,c.entityManager=a),ob.reject(c)})}catch(g){return g&amp;&amp;(g.query=b),ob.reject(g)}}function L(a){var b=a.filter(function(a){return a.entityAspect.isBeingSaved=!0,a.entityAspect.entityState.isModified()&amp;&amp;a.entityType.concurrencyProperties.length&gt;0});0!==b.length&amp;&amp;b.forEach(function(a){a.entityType.concurrencyProperties.forEach(function(b){M(a,b)})})}function M(a,b){if(!a.entityAspect.originalValues[b.name]){var c=a.getProperty(b.name);if(c||(c=b.dataType.defaultValue),b.dataType.isNumeric)a.setProperty(b.name,c+1);else if(b.dataType.isDate){for(var d=new Date,e=new Date;d.getTime()===e.getTime();)e=new Date;a.setProperty(b.name,e)}else{if(b.dataType!==lb.Guid){if(b.dataType===lb.Binary)return;throw new Error(&quot;Unable to update the value of concurrency property before saving: &quot;+b.name)}a.setProperty(b.name,z())}}}function N(a,b){var c=a._entityGroupMap[b.name];return c||(c=new Pb(a,b),a._entityGroupMap[b.name]=c),c}function O(a,b){var c=b.getSelfAndSubtypes();return c.map(function(b){return N(a,b)})}function P(a,b){var c={},d=a.entityType||a.complexType,e=T(d),f={};return d.dataProperties.forEach(function(d){if(d.isComplexProperty)c[d.nameOnServer]=n(a.getProperty(d.name),function(a){return P(a,b)});else{var g=a.getProperty(d.name);if(g=b?b(d,g):g,void 0===g)return;g=e?e(d,g):g,void 0!==g&amp;&amp;(d.isUnmapped?f[d.name]=k(g):c[d.nameOnServer]=g)}}),G(f)||(c.__unmapped=f),c}function Q(b,c,d){var e=b.entityType||b.complexType,f=b.entityAspect||b.complexAspect,g=c.namingConvention.clientPropertyNameToServer,h={};return a(f.originalValues,function(a,b){var c=e.getProperty(a);b=d?d(c,b):b,void 0!==b&amp;&amp;(h[g(a,c)]=b)}),e.complexProperties.forEach(function(a){var e=b.getProperty(a.name);if(a.isScalar){var f=Q(e,c,d);G(f)||(h[g(a.name,a)]=f)}else{var i=e.map(function(a){return Q(a,c,d)});h[g(a.name,a)]=i}}),h}function R(b,c,d){var e=b.entityType||b.complexType,f=T(e),g=b.entityAspect||b.complexAspect,h=c.namingConvention.clientPropertyNameToServer,i={};return a(g.originalValues,function(a){var c=e.getProperty(a),g=b.getProperty(a);g=d?d(c,g):g,void 0!==g&amp;&amp;(g=f?f(dp,g):g,void 0!==g&amp;&amp;(i[h(a,c)]=g))}),e.complexProperties.forEach(function(a){var e=b.getProperty(a.name);if(a.isScalar){var f=R(e,c,d);G(f)||(i[h(a.name,a)]=f)}else{var g=e.map(function(a){return R(a,c,d)});i[h(a.name,a)]=g}}),i}function T(a){return a.serializerFn||a.metadataStore&amp;&amp;a.metadataStore.serializerFn}function V(){this.map={}}var W=function(a){if(arguments.length&gt;1)throw new Error(&quot;The EntityManager ctor has a single optional argument that is either a &#39;serviceName&#39; or a configuration object.&quot;);0===arguments.length?a={serviceName:&quot;&quot;}:&quot;string&quot;==typeof a&amp;&amp;(a={serviceName:a}),b(this,a,!0),this.entityChanged=new _(&quot;entityChanged&quot;,this),this.validationErrorsChanged=new _(&quot;validationErrorsChanged&quot;,this),this.hasChangesChanged=new _(&quot;hasChangesChanged&quot;,this),this.clear()},Y=W.prototype;return Y._$typeName=&quot;EntityManager&quot;,_.bubbleEvent(Y,null),Y.setProperties=function(a){b(this,a,!1)},Y.createEntity=function(a,b,c,d){X(a,&quot;entityType&quot;).isString().or().isInstanceOf(rb).check(),X(c,&quot;entityState&quot;).isEnumOf(kb).isOptional().check(),X(d,&quot;mergeStrategy&quot;).isEnumOf(Mb).isOptional().check(),&quot;string&quot;==typeof a&amp;&amp;(a=this.metadataStore._getEntityType(a)),c=c||kb.Added;var e;return w(this,&quot;isLoading&quot;,!0,function(){e=a.createEntity(b)}),c!==kb.Detached&amp;&amp;(e=this.attachEntity(e,c,d)),e},W.importEntities=function(a,b){var c=new Qb;return c.importEntities(a,b),c},Y.acceptChanges=function(){this.getChanges().forEach(function(a){a.entityAspect.acceptChanges()})},Y.rejectChanges=function(){this.getChanges().forEach(function(a){a.entityAspect.rejectChanges()})},Y.exportEntities=function(a,b){X(b,&quot;includeMetadata&quot;).isBoolean().isOptional().check(),b=null==b?!0:b;var c=u(this,a),d=g({},c,[&quot;tempKeys&quot;,&quot;entityGroupMap&quot;]);b?(d=g(d,this,[&quot;dataService&quot;,&quot;saveOptions&quot;,&quot;queryOptions&quot;,&quot;validationOptions&quot;]),d.metadataStore=this.metadataStore.exportMetadata()):(d.metadataVersion=S.metadataVersion,d.metadataStoreName=this.metadataStore.name);var e=JSON.stringify(d,null,ab.stringifyPad);return e},Y.importEntities=function(b,c){c=c||{},Z(c).whereParam(&quot;mergeStrategy&quot;).isEnumOf(Mb).isOptional().withDefault(this.queryOptions.mergeStrategy).whereParam(&quot;metadataVersionFn&quot;).isFunction().isOptional().applyAll(c);var d=this,e=&quot;string&quot;==typeof b?JSON.parse(b):b;e.metadataStore?(this.metadataStore.importMetadata(e.metadataStore),this.dataService=e.dataService&amp;&amp;mb.fromJSON(e.dataService)||new mb({serviceName:e.serviceName}),this.saveOptions=new Sb(e.saveOptions),this.queryOptions=Ob.fromJSON(e.queryOptions),this.validationOptions=new fb(e.validationOptions)):c.metadataVersionFn&amp;&amp;c.metadataVersionFn({metadataVersion:e.metadataVersion,metadataStoreName:e.metadataStoreName});var f={};e.tempKeys.forEach(function(a){var b=jb.fromJSON(a,d.metadataStore);f[b.toString()]=new jb(b.entityType,d.keyGenerator.generateTempKeyValue(b.entityType,b.values[0]))});var g=[];return c.tempKeyMap=f,x(function(){d._pendingPubs=[]},function(){d._pendingPubs.forEach(function(a){a()}),d._pendingPubs=null},function(){a(e.entityGroupMap,function(a,b){var e=d.metadataStore._getEntityType(a,!0),f=N(d,e),h=B(f,b,c);Array.prototype.push.apply(g,h)}),g.forEach(function(a){d._linkRelatedEntities(a)})}),{entities:g,tempKeyMapping:f}},Y.clear=function(){a(this._entityGroupMap,function(a,b){b._clear()}),this._entityGroupMap={},this._unattachedChildrenMap=new V,this.keyGenerator=new this.keyGeneratorCtor,this.entityChanged.publish({entityAction:gb.Clear}),this._hasChanges&amp;&amp;(this._hasChanges=!1,this.hasChangesChanged.publish({entityManager:this,hasChanges:!1}))},Y.createEmptyCopy=function(){var a=new W(g({},this,[&quot;dataService&quot;,&quot;metadataStore&quot;,&quot;queryOptions&quot;,&quot;saveOptions&quot;,&quot;validationOptions&quot;,&quot;keyGeneratorCtor&quot;]));return a},Y.addEntity=function(a){return this.attachEntity(a,kb.Added)},Y.attachEntity=function(a,b,c){if(X(a,&quot;entity&quot;).isRequired().check(),this.metadataStore._checkEntityType(a),b=X(b,&quot;entityState&quot;).isEnumOf(kb).isOptional().check(kb.Unchanged),c=X(c,&quot;mergeStrategy&quot;).isEnumOf(Mb).isOptional().check(Mb.Disallowed),a.entityType.metadataStore!==this.metadataStore)throw new Error(&quot;Cannot attach this entity because the EntityType (&quot;+a.entityType.name+&quot;) and MetadataStore associated with this entity does not match this EntityManager&#39;s MetadataStore.&quot;);var d=a.entityAspect;if(d){if(d._inProcessEntity)return d._inProcessEntity}else d=new hb(a);var e=d.entityManager;if(e){if(e===this)return a;throw new Error(&quot;This entity already belongs to another EntityManager&quot;)}var f,g=this;return w(this,&quot;isLoading&quot;,!0,function(){b.isAdded()&amp;&amp;H(g,a),f=g._attachEntityCore(a,b,c),d._inProcessEntity=f;try{J(g,a,b,c)}finally{d._inProcessEntity=null}}),this.validationOptions.validateOnAttach&amp;&amp;f.entityAspect.validateEntity(),b.isUnchanged()||this._notifyStateChange(f,!0),this.entityChanged.publish({entityAction:gb.Attach,entity:f}),f},Y.detachEntity=function(a){X(a,&quot;entity&quot;).isEntity().check();var b=a.entityAspect;if(!b)return!1;if(b.entityManager!==this)throw new Error(&quot;This entity does not belong to this EntityManager.&quot;);return b.setDetached()},Y.fetchMetadata=function(a,b,c){&quot;function&quot;==typeof a?(c=b,b=a,a=null):(X(a,&quot;dataService&quot;).isInstanceOf(mb).isOptional().check(),X(b,&quot;callback&quot;).isFunction().isOptional().check(),X(c,&quot;errorCallback&quot;).isFunction().isOptional().check());var d=this.metadataStore.fetchMetadata(a||this.dataService);return C(d,b,c)},Y.executeQuery=function(a,b,c){X(a,&quot;query&quot;).isInstanceOf(zb).or().isString().check(),X(b,&quot;callback&quot;).isFunction().isOptional().check(),X(c,&quot;errorCallback&quot;).isFunction().isOptional().check();var d,e=Ob.resolve([a.queryOptions,this.queryOptions,Ob.defaultInstance]),f=mb.resolve([a.dataService,this.dataService]);if(!f.hasServerMetadata||this.metadataStore.hasMetadataFor(f.serviceName))d=K(this,a,e,f);</div><div class='line' id='LC5'>else{var g=this;d=this.fetchMetadata(f).then(function(){return K(g,a,e,f)})}return C(d,b,c)},Y.executeQueryLocally=function(a){X(a,&quot;query&quot;).isInstanceOf(zb).check();var b=this.metadataStore,c=a._getFromEntityType(b,!0),d=O(this,c),e=a._toFilterFunction(c);if(e)var f=function(a){return a&amp;&amp;!a.entityAspect.entityState.isDeleted()&amp;&amp;e(a)};else var f=function(a){return a&amp;&amp;!a.entityAspect.entityState.isDeleted()};var g=[];d.forEach(function(a){g.push.apply(g,a._entities.filter(f))});var h=a._toOrderByComparer(c);h&amp;&amp;g.sort(h);var i=a.skipCount;i&amp;&amp;(g=g.slice(i));var j=a.takeCount;j&amp;&amp;(g=g.slice(0,j));var k=a.selectClause;if(k){var l=k.toFunction();g=g.map(function(a){return l(a)})}return g},Y.saveChanges=function(a,b,f,g){X(a,&quot;entities&quot;).isOptional().isArray().isEntity().check(),X(b,&quot;saveOptions&quot;).isInstanceOf(Sb).isOptional().check(),X(f,&quot;callback&quot;).isFunction().isOptional().check(),X(g,&quot;errorCallback&quot;).isFunction().isOptional().check(),b=b||this.saveOptions||Sb.defaultInstance;var h=null==a,j=D(this,a);if(0===j.length){var k={entities:[],keyMappings:[]};return f&amp;&amp;f(k),ob.resolve(k)}if(!b.allowConcurrentSaves){var l=j.some(function(a){return a.entityAspect.isBeingSaved});if(l){var m=new Error(&quot;Concurrent saves not allowed - SaveOptions.allowConcurrentSaves is false&quot;);return g&amp;&amp;g(m),ob.reject(m)}}if(c(j),this.validationOptions.validateOnSave){var n=j.filter(function(a){var b=a.entityAspect,c=b.entityState.isDeleted()||b.validateEntity();return!c});if(n.length&gt;0){var o=new Error(&quot;Client side validation errors encountered - see the entityErrors collection on this object for more detail&quot;);return o.entityErrors=d(n),g&amp;&amp;g(o),ob.reject(o)}}L(j);var p=mb.resolve([b.dataService,this.dataService]),q={entityManager:this,dataService:p,resourceName:b.resourceName||this.saveOptions.resourceName||&quot;SaveChanges&quot;},r={entities:j,saveOptions:b},t=this;return p.adapterInstance.saveChanges(q,r).then(function(a){E(t,a.keyMappings);var b=new Rb({query:null,entityManager:t,mergeOptions:{mergeStrategy:Mb.OverwriteChanges},dataService:p}),c=b.visitAndMerge(a.entities,{nodeType:&quot;root&quot;});return s(j,!1),t._hasChanges=h&amp;&amp;i(j,c)?!1:t._hasChangesCore(),t._hasChanges||t.hasChangesChanged.publish({entityManager:t,hasChanges:!1}),a.entities=c,f&amp;&amp;f(a),ob.resolve(a)},function(a){return e(q,a),s(j,!1),g&amp;&amp;g(a),ob.reject(a)})},Y._findEntityGroup=function(a){return this._entityGroupMap[a.name]},Y.getEntityByKey=function(){var a,b=p(this,arguments).entityKey,c=b._subtypes;if(!c)return a=this._findEntityGroup(b.entityType),a&amp;&amp;a.findEntityByKey(b);for(var d=0,e=c.length;e&gt;d;d++){a=this._findEntityGroup(c[d]);var f=a&amp;&amp;a.findEntityByKey(b);if(f)return f}},Y.fetchEntityByKey=function(){var a,b=p(this,arguments),c=b.entityKey,d=0===b.remainingArgs.length?!1:!!b.remainingArgs[0],e=!1;return d&amp;&amp;(a=this.getEntityByKey(c),e=a&amp;&amp;a.entityAspect.entityState.isDeleted(),e&amp;&amp;(a=null,this.queryOptions.mergeStrategy===Mb.OverwriteChanges&amp;&amp;(e=!1))),a||e?ob.resolve({entity:a,entityKey:c,fromCache:!0}):zb.fromEntityKey(c).using(this).execute().then(function(b){return a=0===b.results.length?null:b.results[0],ob.resolve({entity:a,entityKey:c,fromCache:!1})})},Y.findEntityByKey=function(a){return this.getEntityByKey(a)},Y.generateTempKeyValue=function(a){X(a,&quot;entity&quot;).isEntity().check();var b=a.entityType,c=this.keyGenerator.generateTempKeyValue(b),d=b.keyProperties[0];return a.setProperty(d.name,c),a.entityAspect.hasTempKey=!0,c},Y.hasChanges=function(a){return this._hasChanges?void 0===a?this._hasChanges:this._hasChangesCore(a):!1},Y._hasChangesCore=function(a){a=j(this,a);var b=F(this,a);return b.some(function(a){return a.hasChanges()})},Y.getChanges=function(a){a=j(this,a);var b=[kb.Added,kb.Modified,kb.Deleted];return l(this,a,b)},Y.rejectChanges=function(){if(!this._hasChanges)return[];var a=[kb.Added,kb.Modified,kb.Deleted],b=l(this,null,a);return this._hasChanges=!1,b.forEach(function(a){a.entityAspect.rejectChanges()}),this.hasChangesChanged.publish({entityManager:this,hasChanges:!1}),b},Y.getEntities=function(a,b){return a=j(this,a),X(b,&quot;entityStates&quot;).isOptional().isEnumOf(kb).or().isNonEmptyArray().isEnumOf(kb).check(),b&amp;&amp;(b=I(this,b)),l(this,a,b)},Y._checkStateChange=function(a,b,c){b?c||this._notifyStateChange(a,!0):c&amp;&amp;this._notifyStateChange(a,!1)},Y._notifyStateChange=function(a,b){this.entityChanged.publish({entityAction:gb.EntityStateChange,entity:a}),b?this._hasChanges||(this._hasChanges=!0,this.hasChangesChanged.publish({entityManager:this,hasChanges:!0})):this._hasChanges&amp;&amp;(this._hasChanges=this._hasChangesCore(),this._hasChanges||this.hasChangesChanged.publish({entityManager:this,hasChanges:!1}))},Y._linkRelatedEntities=function(a){var b=this,c=a.entityAspect;w(b,&quot;isLoading&quot;,!0,function(){var d=b._unattachedChildrenMap,e=c.getKey(),f=d.getTuples(e);f&amp;&amp;f.forEach(function(b){var c,f,g=b.children.filter(function(a){return a.entityAspect.entityState!==kb.Detached}),h=b.navigationProperty;if(h.inverse)if(c=h,f=h.inverse,f.isScalar){var i=g[0];a.setProperty(f.name,i),i.setProperty(c.name,a)}else{var j=a.getProperty(f.name);g.forEach(function(b){j.push(b),b.setProperty(c.name,a)})}else if(h.parentType===a.entityType)if(f=h,f.isScalar)a.setProperty(f.name,g[0]);else{var j=a.getProperty(f.name);g.forEach(function(a){j._push(a)})}else c=h,g.forEach(function(b){b.setProperty(c.name,a)});d.removeChildren(e,c)}),a.entityType.navigationProperties.forEach(function(e){if(e.isScalar){var f=a.getProperty(e.name);if(f)return}var g=c.getParentKey(e);if(g){if(g._isEmpty())return;var h=b.findEntityByKey(g);h?a.setProperty(e.name,h):d.addChild(g,e,a)}}),a.entityType.foreignKeyProperties.forEach(function(c){var e=c.inverseNavigationProperty;if(e){var f=a.getProperty(c.name),g=new jb(e.parentType,[f]),h=b.findEntityByKey(g);h?e.isScalar?h.setProperty(e.name,a):b.isLoading?h.getProperty(e.name)._push(a):h.getProperty(e.name).push(a):d.addChild(g,e,a)}})})},Y._attachEntityCore=function(a,b,c){var d=N(this,a.entityType),e=d.attachEntity(a,b,c);return this._linkRelatedEntities(e),e},Y.helper={unwrapInstance:P,unwrapOriginalValues:Q,unwrapChangedValues:R},V.prototype.addChild=function(a,b,c){var d=this.getTuple(a,b);d||(d={navigationProperty:b,children:[]},t(this.map,a.toString()).push(d)),d.children.push(c)},V.prototype.removeChildren=function(a,b){var c=this.map[a.toString()];c&amp;&amp;(q(c,function(a){return a.navigationProperty===b}),c.length||delete this.map[a.toString()])},V.prototype.getChildren=function(a,b){var c=this.getTuple(a,b);return c?c.children.filter(function(a){return!a.entityAspect.entityState.isDetached()}):null},V.prototype.getTuple=function(a,b){var c=this.map[a.toString()];if(!c)return null;var d=o(c,function(a){return a.navigationProperty===b});return d},V.prototype.getTuples=function(a){return this.map[a.toString()]},W}();S.EntityManager=Qb;var Rb=function(){function b(a,b,e,g){if(e.ignore||null==b)return null;if(e.nodeRefId){var h=f(a,e.nodeRefId);return&quot;function&quot;==typeof h&amp;&amp;null!=g?(a.deferredFns.push(function(){g(h)}),void 0):h}if(e.entityType){var j=e.entityType;return a.mergeOptions.noTracking?(b=c(a,j,b),j.noTrackingFn&amp;&amp;(b=j.noTrackingFn(b,j)),e.nodeId&amp;&amp;(a.refMap[e.nodeId]=b),b):j.isComplexType?c(a,j,b):i(a,b,e)}return&quot;object&quot;!=typeof b||C(b)||(b=d(a,b)),e.nodeId&amp;&amp;(a.refMap[e.nodeId]=b),b}function c(a,b,d){var f={};return b.dataProperties.forEach(function(b){f[b.name]=b.isComplexProperty?n(d[b.nameOnServer],function(d){return c(a,b.dataType,d)}):u(d[b.nameOnServer],b.dataType)}),b.navigationProperties&amp;&amp;b.navigationProperties.forEach(function(b){var c={nodeType:&quot;navProp&quot;,navigationProperty:b};e(d[b.nameOnServer],a,c,f,b.name)}),f}function d(b,c){var d=b.metadataStore.namingConvention.serverPropertyNameToClient,f={};return a(c,function(a,c){var g=d(a),h={nodeType:&quot;anonProp&quot;,propertyName:g};e(c,b,h,f,g)}),f}function e(a,c,d,e,f){var g=c.jsonResultsAdapter,h=g.visitNode(a,c,d)||{};a=h.node||a,h.ignore||(Array.isArray(a)?(d.nodeType=d.nodeType+&quot;Item&quot;,e[f]=a.map(function(a,i){return h=g.visitNode(a,c,d)||{},a=h.node||a,b(c,a,h,function(a){e[f][i]=a()})})):e[f]=b(c,a,h,function(a){e[f]=a()}))}function f(a,b){var c=a.refMap[b];return void 0===c?function(){return a.refMap[b]}:c}function h(a,b,c){var d=c._$meta.nodeId;null!=d&amp;&amp;(a.refMap[d]=b)}function i(a,b,c){b._$meta=c;var d=a.entityManager,e=c.entityType;&quot;string&quot;==typeof e&amp;&amp;(e=a.metadataStore._getEntityType(e,!1)),b.entityType=e;var f=a.mergeOptions.mergeStrategy,g=null==a.query,h=e.getEntityKeyFromRawEntity(b,a.rawValueFn),i=d.findEntityByKey(h);if(i){if(g&amp;&amp;i.entityAspect.entityState.isDeleted())return d.detachEntity(i),i;var l=i.entityAspect.entityState;if(f===Mb.Disallowed)throw new Error(&quot;A MergeStrategy of &#39;Disallowed&#39; prevents &quot;+h.toString()+&quot; from being merged&quot;);if(f===Mb.SkipMerge)j(a,i,b);else if(f===Mb.OverwriteChanges||l.isUnchanged()){k(a,i,b),i.entityAspect.wasLoaded=!0,c.extra&amp;&amp;(i.entityAspect.extraMetadata=c.extra),i.entityAspect.entityState=kb.Unchanged,i.entityAspect.originalValues={},i.entityAspect.propertyChanged.publish({entity:i,propertyName:null});var m=g?gb.MergeOnSave:gb.MergeOnQuery;d.entityChanged.publish({entityAction:m,entity:i}),l.isUnchanged||d._notifyStateChange(i,!1)}else j(a,i,b)}else i=e._createInstanceCore(),k(a,i,b),c.extra&amp;&amp;(i.entityAspect.extraMetadata=c.extra),d._attachEntityCore(i,kb.Unchanged,Mb.Disallowed),i.entityAspect.wasLoaded=!0,d.entityChanged.publish({entityAction:gb.AttachOnQuery,entity:i});return i}function j(a,b,c){h(a,b,c),c.entityType.navigationProperties.forEach(function(b){b.isScalar?o(a,c,b):p(a,c,b)})}function k(a,b,c){h(a,b,c);var d=b.entityType;d._updateTargetFromRaw(b,c,a.rawValueFn),d.navigationProperties.forEach(function(d){d.isScalar?l(a,d,b,c):m(a,d,b,c)})}function l(a,b,c,d){var e=o(a,d,b);null!=e&amp;&amp;(&quot;function&quot;==typeof e?a.deferredFns.push(function(){e=e(),q(e,c,b)}):q(e,c,b))}function m(a,b,c,d){var e=p(a,d,b);if(null!=e){var f=b.inverse;if(f){var g=c.getProperty(b.name);g.wasLoaded=!0,e.forEach(function(b){&quot;function&quot;==typeof b?a.deferredFns.push(function(){b=b(),r(b,g,c,f)}):r(b,g,c,f)})}}}function o(a,b,c){var d=b[c.nameOnServer];if(!d)return null;var e=a.visitAndMerge(d,{nodeType:&quot;navProp&quot;,navigationProperty:c});return e}function p(a,b,c){var d=b[c.nameOnServer];if(!d)return null;if(!Array.isArray(d)&amp;&amp;(d=d.results,!d))return null;var e=a.visitAndMerge(d,{nodeType:&quot;navPropItem&quot;,navigationProperty:c});return e}function q(a,b,c){if(a){var d=c.name,e=b.getProperty(d);if(e!==a){b.setProperty(d,a);var f=c.inverse;if(!f)return;if(f.isScalar)a.setProperty(f.name,b);else{var g=a.getProperty(f.name);g.push(b)}}}}function r(a,b,c,d){if(a){var e=a.getProperty(d.name);e!==c&amp;&amp;(b.push(a),a.setProperty(d.name,c))}}var s=function(a){g(this,a,[&quot;query&quot;,&quot;entityManager&quot;,&quot;dataService&quot;,&quot;mergeOptions&quot;]),this.refMap={},this.deferredFns=[],this.jsonResultsAdapter=this.dataService.jsonResultsAdapter,this.metadataStore=this.entityManager.metadataStore,this.rawValueFn=tb.getRawValueFromServer},t=s.prototype,u=lb.parseRawValue;return t._$typeName=&quot;MappingContext&quot;,t.getUrl=function(){return this.dataService.makeUrl(this.metadataStore.toQueryString(this.query))},t.visitAndMerge=function(a,c){var d=this.query,e=this.jsonResultsAdapter;c=c||{};var f=this;return n(a,function(a){if(null==d&amp;&amp;a.entityAspect)return a.entityAspect.entityState.isDeleted()?f.entityManager.detachEntity(a):a.entityAspect.acceptChanges(),a;var g=e.visitNode(a,f,c)||{};return a=g.node||a,d&amp;&amp;&quot;root&quot;===c.nodeType&amp;&amp;!g.entityType&amp;&amp;(g.entityType=d._getToEntityType&amp;&amp;d._getToEntityType(f.metadataStore)),b(f,a,g)})},t.processDeferred=function(){this.deferredFns.length&gt;0&amp;&amp;this.deferredFns.forEach(function(a){a()})},s}(),Sb=function(){function a(a,b){return b&amp;&amp;Z(b).whereParam(&quot;resourceName&quot;).isOptional().isString().whereParam(&quot;dataService&quot;).isOptional().isInstanceOf(mb).whereParam(&quot;allowConcurrentSaves&quot;).isBoolean().isOptional().whereParam(&quot;tag&quot;).isOptional().applyAll(a),a}var b=function(b){a(this,b)},c=b.prototype;return c._$typeName=&quot;SaveOptions&quot;,c.setAsDefault=function(){return i(this,b)},c.using=function(b){return a(this,b)},b.defaultInstance=new b({allowConcurrentSaves:!1}),b}();S.SaveOptions=Sb,S.AbstractDataServiceAdapter=function(){function a(a,c,d){var e=b(c);return d&amp;&amp;(e.message=d+&quot;; &quot;+e.message),a.reject(e)}function b(a){var b=new Error;b.httpResponse=a,b.status=a.status;var e=a.data;if(&quot;string&quot;==typeof e)try{e=JSON.parse(e)}catch(f){}if(e){var g=e.EntityErrors||e.entityErrors||e.Errors||e.errors;g&amp;&amp;a.saveContext?d(b,g,a.saveContext):b.message=c(e)}else b.message=a.error&amp;&amp;a.error.toString();return b}function c(a){for(;a.InnerException;)a=a.InnerException;return a.ExceptionMessage||a.Message||a.toString()}function d(a,b,c){a.message=&quot;Server side errors encountered - see the entityErrors collection on this object for more detail&quot;;var d=c.entityManager.metadataStore.namingConvention.serverPropertyNameToClient;a.entityErrors=b.map(function(a){return{errorName:a.ErrorName,entityTypeName:pb.normalizeTypeName(a.EntityTypeName),keyValues:a.KeyValues,propertyName:a.PropertyName&amp;&amp;d(a.PropertyName),errorMessage:a.ErrorMessage}})}var e,f=function(){};return f.prototype.checkForRecomposition=function(a){&quot;ajax&quot;===a.interfaceName&amp;&amp;a.isDefault&amp;&amp;this.initialize()},f.prototype.initialize=function(){if(e=S.config.getAdapterInstance(&quot;ajax&quot;),!e)throw new Error(&quot;Unable to initialize ajax for WebApi.&quot;);var a=e.ajax;if(!a)throw new Error(&quot;Breeze was unable to find an &#39;ajax&#39; adapter&quot;)},f.prototype.fetchMetadata=function(b,c){var d=c.serviceName,f=c.makeUrl(&quot;Metadata&quot;),g=ob.defer();return e.ajax({type:&quot;GET&quot;,url:f,dataType:&quot;json&quot;,success:function(e){if(b.hasMetadataFor(d))return g.resolve(&quot;already fetched&quot;);var h=e.data;try{var i=&quot;string&quot;==typeof h?JSON.parse(h):h;b.importMetadata(i)}catch(j){var k=&quot;Unable to either parse or import metadata: &quot;+j.message;return a(g,e,&quot;Metadata query failed for: &quot;+f+&quot;. &quot;+k)}b.hasMetadataFor(d)||b.addDataService(c),g.resolve(i)},error:function(b){a(g,b,&quot;Metadata query failed for: &quot;+f)}}),g.promise},f.prototype.executeQuery=function(b){var c=ob.defer(),d=b.getUrl(),f={type:&quot;GET&quot;,url:d,params:b.query.parameters,dataType:&quot;json&quot;,success:function(b){var d=b.data;try{var e;e=d&amp;&amp;d.Results?{results:d.Results,inlineCount:d.InlineCount,httpResponse:b}:{results:d,httpResponse:b},c.resolve(e)}catch(f){f instanceof Error?c.reject(f):a(b)}},error:function(b){a(c,b)}};return b.dataService.useJsonp&amp;&amp;(f.dataType=&quot;jsonp&quot;,f.crossDomain=!0),e.ajax(f),c.promise},f.prototype.saveChanges=function(b,c){var d=ob.defer();c=this._prepareSaveBundle(c,b);var f=JSON.stringify(c),g=b.dataService.makeUrl(b.resourceName),h=this;return e.ajax({type:&quot;POST&quot;,url:g,dataType:&quot;json&quot;,contentType:&quot;application/json&quot;,data:f,success:function(c){var e=c.data;c.saveContext=b;var f=e.Errors||e.errors;if(f)a(d,c);else{var g=h._prepareSaveResult(b,e);d.resolve(g)}},error:function(c){c.saveContext=b,a(d,c)}}),d.promise},f.prototype._prepareSaveBundle=function(){throw new Error(&quot;Need a concrete implementation of _prepareSaveBundle&quot;)},f.prototype._prepareSaveResult=function(){throw new Error(&quot;Need a concrete implementation of _prepareSaveResult&quot;)},f.prototype.jsonResultsAdapter=new nb({name:&quot;noop&quot;,visitNode:function(){return{}}}),f}(),function(a){S?a(S):&quot;function&quot;==typeof require&amp;&amp;&quot;object&quot;==typeof exports&amp;&amp;&quot;object&quot;==typeof module?a(require(&quot;breeze&quot;)):&quot;function&quot;==typeof define&amp;&amp;define.amd&amp;&amp;define([&quot;breeze&quot;],a)}(function(a){function b(a){var c,d,e=&quot;&quot;;for(var f in a){var g=a[f];if(g instanceof Array)for(var h=0;h&lt;g.length;++h)c=g[h],fullSubName=f+&quot;[&quot;+h+&quot;]&quot;,d={},d[fullSubName]=c,e+=b(d)+&quot;&amp;&quot;;else if(g instanceof Object)for(var i in g)c=g[i],fullSubName=f+&quot;[&quot;+i+&quot;]&quot;,d={},d[fullSubName]=c,e+=b(d)+&quot;&amp;&quot;;else void 0!==g&amp;&amp;(e+=encodeURIComponent(f)+&quot;=&quot;+encodeURIComponent(g)+&quot;&amp;&quot;)}return e.length?e.substr(0,e.length-1):e}var c,d,e=a.core,f=function(){this.name=&quot;angular&quot;,this.defaultSettings={}};f.prototype.initialize=function(){var a=e.requireLib(&quot;angular&quot;);if(a){var b=a.injector([&quot;ng&quot;]);b.invoke([&quot;$http&quot;,&quot;$rootScope&quot;,function(a,b){c=a,d=b}])}},f.prototype.setHttp=function(a){c=a,d=null},f.prototype.ajax=function(a){if(!c)throw new Error(&quot;Unable to locate angular for ajax adapter&quot;);var f={method:a.type,url:a.url,dataType:a.dataType,contentType:a.contentType,crossDomain:a.crossDomain};if(a.params){var g=f.url.indexOf(&quot;?&quot;)&gt;=0?&quot;&amp;&quot;:&quot;?&quot;;f.url=f.url+g+b(a.params)}if(a.data&amp;&amp;(f.data=a.data),!e.isEmpty(this.defaultSettings)){var h=e.extend({},this.defaultSettings);f=e.extend(h,f)}c(f).success(function(b,c,d){&quot;null&quot;===b&amp;&amp;(b=null);var e={data:b,status:c,getHeaders:d,config:a};a.success(e)}).error(function(b,c,d){var e={data:b,status:c,getHeaders:d,config:a};a.error(e)}),d&amp;&amp;d.$digest()},a.config.registerAdapter(&quot;ajax&quot;,f)}),function(a){S?a(S):&quot;function&quot;==typeof require&amp;&amp;&quot;object&quot;==typeof exports&amp;&amp;&quot;object&quot;==typeof module?a(require(&quot;breeze&quot;)):&quot;function&quot;==typeof define&amp;&amp;define.amd&amp;&amp;define([&quot;breeze&quot;],a)}(function(a){function b(a){return function(b){return b&amp;&amp;b.length&gt;0?a.getResponseHeader(b):a.getAllResponseHeaders()}}var c,d=a.core,e=function(){this.name=&quot;jQuery&quot;,this.defaultSettings={}};e.prototype.initialize=function(){c=d.requireLib(&quot;jQuery&quot;)},e.prototype.ajax=function(a){if(!c)throw new Error(&quot;Unable to locate jQuery&quot;);var e={type:a.type,url:a.url,data:a.params||a.data,dataType:a.dataType,contentType:a.contentType,crossDomain:a.crossDomain};if(!d.isEmpty(this.defaultSettings)){var f=d.extend({},this.defaultSettings);e=d.extend(f,e)}e.success=function(c,d,e){var f={data:c,status:e.status,getHeaders:b(e),config:a};a.success(f),e.onreadystatechange=null,e.abort=null},e.error=function(c,d,e){var f={data:c.responseText,status:c.status,getHeaders:b(c),error:e,config:a};a.error(f),c.onreadystatechange=null,c.abort=null},c.ajax(e)},a.config.registerAdapter(&quot;ajax&quot;,e)}),function(a){S?a(S):&quot;function&quot;==typeof require&amp;&amp;&quot;object&quot;==typeof exports&amp;&amp;&quot;object&quot;==typeof module?a(require(&quot;breeze&quot;)):&quot;function&quot;==typeof define&amp;&amp;define.amd&amp;&amp;!S&amp;&amp;define([&quot;breeze&quot;],a)}(function(a){function b(a,b){return a.isUnmapped?void 0:(a.dataType===lb.DateTimeOffset?b=b&amp;&amp;new Date(b.getTime()-6e4*b.getTimezoneOffset()):a.dataType.quoteJsonOData&amp;&amp;(b=null!=b?b.toString():b),b)}function c(a,c){var e=[],f=[],g=[],h=a.dataService.serviceName,i=a.entityManager,j=i.helper,k=0;return c.entities.forEach(function(a){var c=a.entityAspect;k+=1;var l={headers:{&quot;Content-ID&quot;:k,DataServiceVersion:&quot;2.0&quot;}};if(g[k]=a,c.entityState.isAdded())l.requestUri=a.entityType.defaultResourceName,l.method=&quot;POST&quot;,l.data=j.unwrapInstance(a,b),f[k]=c.getKey();else if(c.entityState.isModified())d(l,c,h),l.method=&quot;MERGE&quot;,l.data=j.unwrapChangedValues(a,i.metadataStore,b);else{if(!c.entityState.isDeleted())return;d(l,c,h),l.method=&quot;DELETE&quot;}e.push(l)}),a.contentKeys=g,a.tempKeys=f,{__batchRequests:[{__changeRequests:e}]}}function d(a,b,c){var d=b.extraMetadata,e=d.uri||d.id;h.stringStartsWith(e,c)&amp;&amp;(e=e.substring(c.length)),a.requestUri=e,d.etag&amp;&amp;(a.headers[&quot;If-Match&quot;]=d.etag)}function e(a,b){var c=new Error,d=a.response;if(c.message=d.statusText,c.statusText=d.statusText,c.status=d.statusCode,b&amp;&amp;(c.url=b),c.body=d.body,d.body){var e;try{var g=JSON.parse(d.body);c.body=g,g[&quot;odata.error&quot;]&amp;&amp;(g=g[&quot;odata.error&quot;]);var h=&quot;&quot;;do e=g.error||g.innererror,e||(h+=f(g)),e=e||g.internalexception,g=e||g;while(e);h.length&gt;0&amp;&amp;(c.message=h)}catch(i){}}return c}function f(a){var b=a.message||&quot;&quot;;return(&quot;string&quot;==typeof b?b:b.value)+&quot;; &quot;}var g,h=a.core,i=a.MetadataStore,j=a.JsonResultsAdapter,k=a.DataProperty,l=function(){this.name=&quot;OData&quot;};l.prototype.initialize=function(){g=h.requireLib(&quot;OData&quot;,&quot;Needed to support remote OData services&quot;),g.jsonHandler.recognizeDates=!0},l.prototype.executeQuery=function(a){var b=ob.defer(),c=a.getUrl();return g.read({requestUri:c,headers:{DataServiceVersion:&quot;2.0&quot;}},function(a){var c;return a.__count&amp;&amp;(c=parseInt(a.__count,10)),b.resolve({results:a.results,inlineCount:c})},function(a){return b.reject(e(a,c))}),b.promise},l.prototype.fetchMetadata=function(a,b){var c=ob.defer(),d=b.serviceName,f=b.makeUrl(&quot;$metadata&quot;);return g.read(f,function(e){if(!e||!e.dataServices){var g=new Error(&quot;Metadata query failed for: &quot;+f);return c.reject(g)}var h=e.dataServices;if(!a.hasMetadataFor(d)){try{a.importMetadata(h)}catch(i){return c.reject(new Error(&quot;Metadata query failed for &quot;+f+&quot;; Unable to process returned metadata: &quot;+i.message))}a.addDataService(b)}return c.resolve(h)},function(a){var b=e(a,f);return b.message=&quot;Metadata query failed for: &quot;+f+&quot;; &quot;+(b.message||&quot;&quot;),c.reject(b)},g.metadataHandler),c.promise},l.prototype.saveChanges=function(a,b){var d=ob.defer(),f=(a.entityManager.helper,a.dataService.makeUrl(&quot;$batch&quot;)),h=c(a,b),i=a.tempKeys,j=a.contentKeys;return g.request({headers:{DataServiceVersion:&quot;2.0&quot;},requestUri:f,method:&quot;POST&quot;,data:h},function(a){var b=[],c=[],g={entities:b,keyMappings:c};return a.__batchResponses.forEach(function(a){a.__changeResponses.forEach(function(a){var g=a.response||a,h=g.statusCode;if(!h||h&gt;=400)return d.reject(e(a,f));var l=a.headers[&quot;Content-ID&quot;],m=a.data;if(m){var n=i[l];if(n){var o=n.entityType;if(o.autoGeneratedKeyType!==vb.None){var p=n.values[0],q=o.getEntityKeyFromRawEntity(m,k.getRawValueFromServer),r={entityTypeName:o.name,tempValue:p,realValue:q.values[0]};c.push(r)}}b.push(m)}else{var s=j[l];b.push(s)}})}),d.resolve(g)},function(a){return d.reject(e(a,f))},g.batchHandler),d.promise},l.prototype.jsonResultsAdapter=new j({name:&quot;OData_default&quot;,visitNode:function(a,b,c){var d={};if(null==a)return d;if(null!=a.__metadata){var e=i.normalizeTypeName(a.__metadata.type),f=e&amp;&amp;b.entityManager.metadataStore.getEntityType(e,!0);f&amp;&amp;f._mappedPropertiesCount&lt;=Object.keys(a).length-1&amp;&amp;(d.entityType=f,d.extra=a.__metadata)}a.results&amp;&amp;(d.node=a.results);var g=c.propertyName;return d.ignore=null!=a.__deferred||&quot;__metadata&quot;===g||&quot;EntityKey&quot;===g&amp;&amp;a.$type&amp;&amp;h.stringStartsWith(a.$type,&quot;System.Data&quot;),d}}),a.config.registerAdapter(&quot;dataService&quot;,l)}),function(a){S?a(S):&quot;function&quot;==typeof require&amp;&amp;&quot;object&quot;==typeof exports&amp;&amp;&quot;object&quot;==typeof module?a(require(&quot;breeze&quot;)):&quot;function&quot;==typeof define&amp;&amp;define.amd&amp;&amp;!S&amp;&amp;define([&quot;breeze&quot;],a)}(function(a){var b=(a.core,a.MetadataStore),c=a.JsonResultsAdapter,d=a.AbstractDataServiceAdapter,e=function(){this.name=&quot;webApi&quot;};e.prototype=new d,e.prototype._prepareSaveBundle=function(a,b){var c=b.entityManager,d=c.metadataStore,e=c.helper;return a.entities=a.entities.map(function(a){var b=e.unwrapInstance(a),c=null;a.entityType.autoGeneratedKeyType!==vb.None&amp;&amp;(c={propertyName:a.entityType.keyProperties[0].nameOnServer,autoGeneratedKeyType:a.entityType.autoGeneratedKeyType.name});var f=e.unwrapOriginalValues(a,d);return b.entityAspect={entityTypeName:a.entityType.name,defaultResourceName:a.entityType.defaultResourceName,entityState:a.entityAspect.entityState.name,originalValuesMap:f,autoGeneratedKey:c},b}),a.saveOptions={tag:a.saveOptions.tag},a},e.prototype._prepareSaveResult=function(a,c){var d=c.KeyMappings.map(function(a){var c=b.normalizeTypeName(a.EntityTypeName);return{entityTypeName:c,tempValue:a.TempValue,realValue:a.RealValue}});return{entities:c.Entities,keyMappings:d,httpResponse:c.httpResponse}},e.prototype.jsonResultsAdapter=new c({name:&quot;webApi_default&quot;,visitNode:function(a,c,d){if(null==a)return{};var e=b.normalizeTypeName(a.$type),f=e&amp;&amp;c.entityManager.metadataStore._getEntityType(e,!0),g=d.propertyName,h=g&amp;&amp;&quot;$&quot;===g.substr(0,1);return{entityType:f,nodeId:a.$id,nodeRefId:a.$ref,ignore:h}}}),a.config.registerAdapter(&quot;dataService&quot;,e)}),function(a){S?a(S):&quot;function&quot;==typeof require&amp;&amp;&quot;object&quot;==typeof exports&amp;&amp;&quot;object&quot;==typeof module?a(require(&quot;breeze&quot;)):&quot;function&quot;==typeof define&amp;&amp;define.amd&amp;&amp;!S&amp;&amp;define([&quot;breeze&quot;],a)}(function(a){var b,c,d,e,f=a.core,g=(a.ComplexAspect,Object.prototype.hasOwnProperty),h=function(){this.name=&quot;backbone&quot;};h.prototype.initialize=function(){b=f.requireLib(&quot;Backbone&quot;),c=f.requireLib(&quot;_;underscore&quot;),d=b.Model.prototype.set,e=b.Model.prototype.get},h.prototype.createCtor=function(c){var d={};c.dataProperties.forEach(function(a){d[a.name]=a.defaultValue});var e=b.Model.extend({defaults:d,initialize:function(){if(c.navigationProperties){var d=this;c.navigationProperties.forEach(function(c){if(!c.isScalar){var e=a.makeRelationArray([],d,c);b.Model.prototype.set.call(d,c.name,e)}})}}});return e},h.prototype.getTrackablePropertyNames=function(a){var b=[];for(var c in a.attributes)b.push(c);return b},h.prototype.initializeEntityPrototype=function(a){a.getProperty=function(a){return this.get(a)},a.setProperty=function(a,b){return this.set(a,b),this},a.set=function(a,b,f){var h=this.entityAspect||this.complexAspect;if(!h)return d.call(this,a,b,f);var i,j,k,l=this,m=this.entityType||this.complexType;if(c.isObject(a)||null==a){if(i=a,f=b,!this._validate(i,f))return!1;for(k in i)if(g.call(i,k)){if(j=m.getProperty(k),null==j)throw new Error(&quot;Unknown property: &quot;+a);var n=function(a){return function(b){return 0===arguments.length?e.call(l,a):d.call(l,a,b,f)}}(k);this._$interceptor(j,i[k],n)}}else{if(i={},i[a]=b,f||(f={}),!this._validate(i,f))return!1;if(j=m.getProperty(a),null==j)throw new Error(&quot;Unknown property: &quot;+a);k=a,this._$interceptor(j,b,function(a){return 0===arguments.length?e.call(l,k):d.call(l,k,a,f)})}return this}},h.prototype.startTracking=function(c){if(!(c instanceof b.Model))throw new Error(&quot;This entity is not an Backbone.Model instance&quot;);var g=c.entityType||c.complexType,h=c.attributes;g.dataProperties.forEach(function(b){var e=b.name,f=h[e];b.isComplexProperty?f=b.isScalar?b.dataType._createInstanceCore(c,b):a.makeComplexArray([],c,b):b.isScalar?void 0===f&amp;&amp;(f=b.defaultValue):f=a.makePrimitiveArray([],c,b),d.call(c,e,f)}),g.navigationProperties&amp;&amp;g.navigationProperties.forEach(function(b){var g;if(b.name in h){var i=e.call(c,b.name);if(b.isScalar){if(i&amp;&amp;!i.entityType)throw g=f.formatString(&quot;The value of the &#39;%1&#39; property for entityType: &#39;%2&#39; must be either null or another entity&quot;,b.name,c.entityType.name),new Error(g)}else if(i){if(!i.parentEntity)throw g=f.formatString(&quot;The value of the &#39;%1&#39; property for entityType: &#39;%2&#39; must be either null or a Breeze relation array&quot;,b.name,c.entityType.name),new Error(g)}else i=a.makeRelationArray([],c,b),d.call(c,b.name,i)}else b.isScalar?d.call(c,b.name,null):(i=a.makeRelationArray([],c,b),d.call(c,b.name,i))})},a.config.registerAdapter(&quot;modelLibrary&quot;,h)}),function(a){S?a(S):&quot;function&quot;==typeof require&amp;&amp;&quot;object&quot;==typeof exports&amp;&amp;&quot;object&quot;==typeof module?a(require(&quot;breeze&quot;)):&quot;function&quot;==typeof define&amp;&amp;define.amd&amp;&amp;!S&amp;&amp;define([&quot;breeze&quot;],a)}(function(a){function b(a){var b=a.entityType||a.complexType,c=b._extra,e=c.alreadyWrappedProps||{};b.getProperties().forEach(function(b){var c=b.name;e[c]||(c in a?f(a,b):d(a,b),e[c]=!0)}),c.alreadyWrappedProps=e}function c(a){var b=g(a),c=Object.getPrototypeOf(a),d=c.entityType||c.complexType;return d.getProperties().forEach(function(b){var c=b.name;if(a.hasOwnProperty(c)){var d=a[c];delete a[c],a[c]=d}}),b}function d(a,b){var c=b.name,d=a._pendingBackingStores;d||(d=[],a._pendingBackingStores=d);var f={get:function(){var a=this._backingStore||g(this);return a[c]},set:function(a){var d=this._backingStore||h(this),f=e(d,c);this._$interceptor(b,a,f)},enumerable:!0,configurable:!0};Object.defineProperty(a,c,f)}function e(a,b){return function(){return 0==arguments.length?a[b]:(a[b]=arguments[0],void 0)}}function f(a,b){if(!a.hasOwnProperty(b.name)){var c=Object.getPrototypeOf(a);return f(c,b),void 0}var d=Object.getOwnPropertyDescriptor(a,b.name);if(d.configurable&amp;&amp;!d.value&amp;&amp;d.set){var e=function(a){return function(){return 0==arguments.length?d.get.bind(a)():(d.set.bind(a)(arguments[0]),void 0)}},g={get:function(){return d.get.bind(this)()},set:function(a){this._$interceptor(b,a,e(this))},enumerable:d.enumerable,configurable:!0};Object.defineProperty(a,b.name,g)}}function g(a){var b=Object.getPrototypeOf(a);i(b);var c=a._backingStore;return c||(c={},a._backingStore=c),c}function h(a){var b=Object.getPrototypeOf(a),c=b._pendingBackingStores,d=j.arrayFirst(c,function(b){return b.entity===a});return d?d.backingStore:(bs={},c.push({entity:a,backingStore:bs}),bs)}function i(a){var b=a._pendingBackingStores;b&amp;&amp;(b.forEach(function(a){a.entity._backingStore=a.backingStore}),b.length=0)}var j=a.core,k=function(){this.name=&quot;backingStore&quot;};k.prototype.initialize=function(){},k.prototype.getTrackablePropertyNames=function(a){var b=[];for(var c in a)if(&quot;entityType&quot;!==c&amp;&amp;&quot;_$typeName&quot;!==c&amp;&amp;&quot;_pendingSets&quot;!==c&amp;&amp;&quot;_backingStore&quot;!==c){var d=a[c];j.isFunction(d)||b.push(c)}return b},k.prototype.initializeEntityPrototype=function(a){a.getProperty=function(a){return this[a]},a.setProperty=function(a,b){return this[a]=b,this},b(a)},k.prototype.startTracking=function(b){var d=c(b),e=b.entityType||b.complexType;e.getProperties().forEach(function(c){var e=c.name,f=b[e];if(c.isDataProperty)c.isComplexProperty?f=c.isScalar?c.dataType._createInstanceCore(b,c):a.makeComplexArray([],b,c):c.isScalar?void 0===f&amp;&amp;(f=c.defaultValue):f=a.makePrimitiveArray([],b,c);else{if(!c.isNavigationProperty)throw new Error(&quot;unknown property: &quot;+e);if(void 0!==f)throw new Error(&quot;Cannot assign a navigation property in an entity ctor.: &quot;+c.Name);f=c.isScalar?null:a.makeRelationArray([],b,c)}d[e]=f})},a.config.registerAdapter(&quot;modelLibrary&quot;,k)}),function(a){S?a(S):&quot;function&quot;==typeof require&amp;&amp;&quot;object&quot;==typeof exports&amp;&amp;&quot;object&quot;==typeof module?a(require(&quot;breeze&quot;)):&quot;function&quot;==typeof define&amp;&amp;define.amd&amp;&amp;!S&amp;&amp;define([&quot;breeze&quot;],a)}(function(a){function b(){try{return Object.getPrototypeOf&amp;&amp;Object.defineProperty({},&quot;x&quot;,{})}catch(a){return!1}}function c(a){var b=a.entityType||a.complexType;if(es5Descriptors={},b.getProperties().forEach(function(b){propDescr=d(a,b.name),propDescr&amp;&amp;(es5Descriptors[b.name]=propDescr)}),!G(es5Descriptors)){var c=b._extra;c.es5Descriptors=es5Descriptors,b._koDummy=h.observable(null)}}function d(a,c){if(!b())return null;if(a.hasOwnProperty(c))return Object.getOwnPropertyDescriptor&amp;&amp;Object.getOwnPropertyDescriptor(a,c);var e=Object.getPrototypeOf(a);return e?d(e,c):null}function e(b,c,d){if(c.isDataProperty)c.isComplexProperty?d=c.isScalar?c.dataType._createInstanceCore(b,c):a.makeComplexArray([],b,c):c.isScalar?void 0===d&amp;&amp;(d=c.defaultValue):d=a.makePrimitiveArray([],b,c);else{if(!c.isNavigationProperty)throw new Error(&quot;unknown property: &quot;+c.name);if(void 0!==d)throw new Error(&quot;Cannot assign a navigation property in an entity ctor.: &quot;+c.name);d=c.isScalar?null:a.makeRelationArray([],b,c)}return d}function f(a){a._koObj._suppressBreeze=!0}function g(a){var b=a.array._koObj;b._suppressBreeze?b._suppressBreeze=!1:b.valueHasMutated()}var h,i=a.core,j=function(){this.name=&quot;ko&quot;};j.prototype.initialize=function(){h=i.requireLib(&quot;ko&quot;,&quot;The Knockout library&quot;),h.extenders.intercept=function(a,b){var c,d=b.instance,e=b.property;return c=a.splice?h.computed({read:a}):h.computed({read:a,write:function(b){return d._$interceptor(e,b,a),d}})}},j.prototype.getTrackablePropertyNames=function(a){var b=[];for(var c in a)if(&quot;entityType&quot;!==c&amp;&amp;&quot;_$typeName&quot;!==c){var e=d(a,c);if(e&amp;&amp;e.get)b.push(c);else{var f=a[c];h.isObservable(f)?b.push(c):i.isFunction(f)||b.push(c)}}return b},j.prototype.initializeEntityPrototype=function(a){a.getProperty=function(a){return this[a]()},a.setProperty=function(a,b){return this[a](b),this},b()&amp;&amp;c(a)},j.prototype.startTracking=function(a){var b=a.entityType||a.complexType,c=b._extra.es5Descriptors||{};b.getProperties().sort(function(a,b){var c=a.isUnmapped?1:0,d=b.isUnmapped?1:0;return c-d}).forEach(function(d){var i,j=d.name,k=a[j],l=c[j];if(l){var m=l.get.bind(a);if(l.set){var n=l.set.bind(a),o=function(a){return 0===arguments.length?m():(n(a),void 0)};i=h.computed({read:function(){return b._koDummy(),m()},write:function(c){return a._$interceptor(d,c,o),b._koDummy.valueHasMutated(),a}})}else i=h.computed({read:m,write:function(){}})}else if(h.isObservable(k)){if(d.isNavigationProperty)throw new Error(&quot;Cannot assign a navigation property in an entity ctor.: &quot;+j);i=k}else{var k=e(a,d,k);i=d.isScalar?h.observable(k):h.observableArray(k)}if(d.isScalar)if(l)Object.defineProperty(a,j,{enumerable:!0,configurable:!0,writable:!0,value:i});</div><div class='line' id='LC6'>else{var p=i.extend({intercept:{instance:a,property:d}});a[j]=p}else k._koObj=i,i.subscribe(f,null,&quot;beforeChange&quot;),k.arrayChanged.subscribe(g),i.equalityComparer=function(){throw new Error(&quot;Collection navigation properties may NOT be set.&quot;)},a[j]=i})},a.config.registerAdapter(&quot;modelLibrary&quot;,j)}),S.config.initializeAdapterInstances({dataService:&quot;webApi&quot;,ajax:&quot;jQuery&quot;});var Tb=v(&quot;ko&quot;);return Tb?S.config.initializeAdapterInstance(&quot;modelLibrary&quot;,&quot;ko&quot;):S.config.initializeAdapterInstance(&quot;modelLibrary&quot;,&quot;backingStore&quot;),this.window&amp;&amp;(this.window.breeze=S),S});</div></pre></div></td>
          </tr>
        </table>
  </div>

  </div>
</div>

<a href="#jump-to-line" rel="facebox[.linejump]" data-hotkey="l" class="js-jump-to-line" style="display:none">Jump to Line</a>
<div id="jump-to-line" style="display:none">
  <form accept-charset="UTF-8" class="js-jump-to-line-form">
    <input class="linejump-input js-jump-to-line-field" type="text" placeholder="Jump to line&hellip;" autofocus>
    <button type="submit" class="button">Go</button>
  </form>
</div>

        </div>

      </div><!-- /.repo-container -->
      <div class="modal-backdrop"></div>
    </div><!-- /.container -->
  </div><!-- /.site -->


    </div><!-- /.wrapper -->

      <div class="container">
  <div class="site-footer">
    <ul class="site-footer-links right">
      <li><a href="https://status.github.com/">Status</a></li>
      <li><a href="http://developer.github.com">API</a></li>
      <li><a href="http://training.github.com">Training</a></li>
      <li><a href="http://shop.github.com">Shop</a></li>
      <li><a href="/blog">Blog</a></li>
      <li><a href="/about">About</a></li>

    </ul>

    <a href="/">
      <span class="mega-octicon octicon-mark-github" title="GitHub"></span>
    </a>

    <ul class="site-footer-links">
      <li>&copy; 2014 <span title="0.05140s from github-fe125-cp1-prd.iad.github.net">GitHub</span>, Inc.</li>
        <li><a href="/site/terms">Terms</a></li>
        <li><a href="/site/privacy">Privacy</a></li>
        <li><a href="/security">Security</a></li>
        <li><a href="/contact">Contact</a></li>
    </ul>
  </div><!-- /.site-footer -->
</div><!-- /.container -->


    <div class="fullscreen-overlay js-fullscreen-overlay" id="fullscreen_overlay">
  <div class="fullscreen-container js-fullscreen-container">
    <div class="textarea-wrap">
      <textarea name="fullscreen-contents" id="fullscreen-contents" class="js-fullscreen-contents" placeholder="" data-suggester="fullscreen_suggester"></textarea>
    </div>
  </div>
  <div class="fullscreen-sidebar">
    <a href="#" class="exit-fullscreen js-exit-fullscreen tooltipped leftwards" aria-label="Exit Zen Mode">
      <span class="mega-octicon octicon-screen-normal"></span>
    </a>
    <a href="#" class="theme-switcher js-theme-switcher tooltipped leftwards"
      aria-label="Switch themes">
      <span class="octicon octicon-color-mode"></span>
    </a>
  </div>
</div>



    <div id="ajax-error-message" class="flash flash-error">
      <span class="octicon octicon-alert"></span>
      <a href="#" class="octicon octicon-remove-close close js-ajax-error-dismiss"></a>
      Something went wrong with that request. Please try again.
    </div>

  </body>
</html>

